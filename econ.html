<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ruptura</title>
  <meta name="description" content="">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="econ.css">
</head>
<body>

  <!-- OPENING STATEMENT -->
  <section id="opening" class="opening-section" aria-label="Opening statement">
    <!-- Populated from content.json by econ.js -->
  </section>

  <!-- PHASE 1: INPUT FORM -->
  <section id="phase1" class="phase-section phase-form" aria-label="Enter your information">
    <form id="worker-form" novalidate>
      <!-- ZIP Code -->
      <div class="form-field" data-field="zip_code">
        <label class="form-label" for="zip_code">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
          <span data-label="zip_code"></span>
        </label>
        <input class="form-input" type="text" id="zip_code" name="zip_code" inputmode="numeric" maxlength="5" autocomplete="postal-code">
        <span class="field-error" data-error="zip_code"></span>
      </div>

      <!-- Current Salary/Wage -->
      <div class="form-field" data-field="current_wage">
        <label class="form-label" for="current_wage">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
          <span data-label="current_wage"></span>
        </label>
        <input class="form-input" type="text" id="current_wage" name="current_wage" inputmode="decimal" autocomplete="off">
        <span class="field-error" data-error="current_wage"></span>
      </div>

      <!-- Pay Frequency Toggle -->
      <div class="form-field" data-field="frequency">
        <label class="form-label">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          <span data-label="frequency"></span>
        </label>
        <div class="frequency-toggle" role="radiogroup" aria-label="Pay frequency">
          <div class="frequency-slider" data-pos="0"></div>
          <!-- Buttons populated from content.json -->
        </div>
      </div>

      <!-- Starting Salary -->
      <div class="form-field" data-field="start_salary">
        <label class="form-label" for="start_salary">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
          <span data-label="start_salary"></span>
        </label>
        <input class="form-input" type="text" id="start_salary" name="start_salary" inputmode="decimal" autocomplete="off">
        <span class="field-error" data-error="start_salary"></span>
      </div>

      <!-- Year Started Working -->
      <div class="form-field" data-field="start_year">
        <label class="form-label" for="start_year">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          <span data-label="start_year"></span>
        </label>
        <input class="form-input" type="text" id="start_year" name="start_year" inputmode="numeric" maxlength="4" autocomplete="off">
        <span class="field-error" data-error="start_year"></span>
      </div>

      <!-- Monthly Rent -->
      <div class="form-field" data-field="current_rent">
        <label class="form-label" for="current_rent">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
          <span data-label="current_rent"></span>
        </label>
        <input class="form-input" type="text" id="current_rent" name="current_rent" inputmode="decimal" autocomplete="off">
        <span class="field-error" data-error="current_rent"></span>
      </div>

      <!-- Years of Experience -->
      <div class="form-field" data-field="years_experience">
        <label class="form-label" for="years_experience">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          <span data-label="years_experience"></span>
        </label>
        <input class="form-input" type="text" id="years_experience" name="years_experience" inputmode="numeric" maxlength="2" autocomplete="off">
        <span class="field-error" data-error="years_experience"></span>
      </div>

      <!-- State -->
      <div class="form-field" data-field="state">
        <label class="form-label" for="state">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
          <span data-label="state"></span>
        </label>
        <select class="form-select" id="state" name="state">
          <!-- Options populated from content.json -->
        </select>
        <span class="field-error" data-error="state"></span>
      </div>

      <!-- Submit -->
      <button class="btn-submit" type="submit" id="submit-btn"></button>
    </form>
  </section>

  <!-- LOADING STATE -->
  <div id="loading" class="loading-section" aria-label="Calculating results" hidden>
    <div class="loading-bars">
      <div class="loading-bar" style="--bar-width: 70%"></div>
      <div class="loading-bar" style="--bar-width: 45%"></div>
      <div class="loading-bar" style="--bar-width: 85%"></div>
    </div>
    <p class="loading-text" id="loading-text"></p>
  </div>

  <!-- ERROR STATE -->
  <div id="error-state" class="error-section" hidden>
    <p class="error-heading" id="error-heading"></p>
    <p class="error-body" id="error-body"></p>
    <button class="btn-primary" id="retry-btn" style="max-width:200px;margin:0 auto;"></button>
  </div>

  <!-- PHASE 2: RESULTS -->
  <section id="phase2" class="phase-section phase-results" aria-label="Your results" hidden>
    <div class="results-card" id="results-card">
      <span class="card-label" id="card-label"></span>
      <div class="hero-stat" id="hero-stat"></div>
      <p class="hero-context" id="hero-context"></p>
      <div class="card-divider"></div>
      <div class="secondary-stat" id="secondary-stat"></div>
      <p class="secondary-stat-context" id="secondary-stat-context"></p>
      <span class="card-url" id="card-url"></span>
    </div>

    <div class="card-actions">
      <button class="btn-primary" id="download-btn" aria-label="Download results as image">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
        <span id="download-btn-text"></span>
      </button>
      <button class="btn-secondary" id="share-btn" aria-label="Share your results">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
        <span id="share-btn-text"></span>
      </button>
    </div>

    <button class="breakdown-trigger" id="breakdown-trigger" aria-expanded="false" aria-controls="breakdown-content">
      <span id="breakdown-trigger-text"></span>
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
    </button>
    <div class="breakdown-content" id="breakdown-content">
      <div class="breakdown-inner" id="breakdown-inner">
        <!-- Rows populated by JS from API data -->
      </div>
    </div>
  </section>

  <!-- PHASE 3A: Stat Cards -->
  <section id="phase3a" class="phase-section phase-permission" aria-label="Context statistics" hidden>
    <div id="stat-cards-container">
      <!-- Stat cards populated from content.json -->
    </div>
    <p class="reframe-statement" id="reframe-statement"></p>
  </section>

  <!-- PHASE 3B: Validation -->
  <section id="phase3b" class="phase-section phase-validation" aria-label="Addressing doubts" hidden>
    <div id="validation-container">
      <!-- Validation blocks populated from content.json -->
    </div>
  </section>

  <!-- PHASE 3C: What Change Looks Like -->
  <section id="phase3c" class="phase-section phase-change" aria-label="What change could mean" hidden>
    <h2 class="change-heading" id="raise-heading"></h2>
    <div class="bar-chart" id="bar-chart">
      <div class="bar-row">
        <div class="bar-label" id="bar-label-current"></div>
        <div class="bar-track">
          <div class="bar-fill current" id="bar-current"></div>
          <span class="bar-value current" id="bar-value-current"></span>
        </div>
      </div>
      <div class="bar-row">
        <div class="bar-label" id="bar-label-projected"></div>
        <div class="bar-track">
          <div class="bar-fill projected" id="bar-projected"></div>
          <span class="bar-value projected" id="bar-value-projected"></span>
        </div>
      </div>
    </div>
    <div class="bar-difference" id="bar-difference"></div>
    <div class="projection-cards" id="projection-cards">
      <!-- 3 projection cards populated by JS -->
    </div>
    <p class="context-line" id="context-line"></p>

    <h3 class="wins-heading" id="wins-heading"></h3>
    <div id="wins-container">
      <!-- Win cards populated from content.json -->
    </div>
  </section>

  <!-- PHASE 3D: Take a Step -->
  <section id="phase3d" class="phase-section phase-action" aria-label="Take action" hidden>
    <h2 class="action-heading" id="action-heading"></h2>

    <!-- Share CTA -->
    <div class="action-item">
      <button class="btn-secondary" id="share-btn-bottom" style="width:100%;max-width:480px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
        <span id="share-bottom-text"></span>
      </button>
      <p class="action-description" id="share-description"></p>
    </div>

    <!-- Negotiation Script CTA -->
    <div class="action-item">
      <button class="btn-primary" id="negotiation-btn" style="width:100%;max-width:480px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line></svg>
        <span id="negotiation-btn-text"></span>
      </button>
      <p class="action-description" id="negotiation-description"></p>
      <div class="script-content" id="script-content">
        <div class="script-inner" id="script-inner">
          <!-- Negotiation script populated by JS after API call -->
        </div>
      </div>
    </div>

    <!-- Forum Card -->
    <div class="forum-card" id="forum-card">
      <h3 class="forum-heading" id="forum-heading"></h3>
      <p class="forum-body" id="forum-body"></p>
      <a class="btn-primary" id="forum-btn" href="#" target="_blank" rel="noopener noreferrer" style="display:inline-flex;text-decoration:none;padding:0 24px;"></a>
    </div>

    <!-- Closing -->
    <p class="closing-line" id="closing-line"></p>
  </section>

  <!-- HIDDEN: Downloadable card render target (off-screen, for html2canvas) -->
  <div id="download-card" class="download-card-offscreen" aria-hidden="true">
    <div class="dl-header" id="dl-header"></div>
    <div class="dl-hero" id="dl-hero"></div>
    <div class="dl-context" id="dl-context"></div>
    <div class="dl-secondary" id="dl-secondary"></div>
    <div class="dl-footer">
      <div class="dl-url" id="dl-url"></div>
      <div class="dl-tagline" id="dl-tagline"></div>
    </div>
    <div class="dl-watermark" id="dl-watermark"></div>
  </div>

  <script src="econ.js" defer></script>
</body>
</html>
