<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOLIDARITY_NET — Workers First</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background-color: #0a0a0a;
      font-family: 'IBM Plex Mono', 'Courier New', monospace;
    }
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #111;
    }
    ::-webkit-scrollbar-thumb {
      background: #333;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #444;
    }
    input:focus, textarea:focus, button:focus {
      outline: 1px solid #ff3333;
      outline-offset: 2px;
    }
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1.2); box-shadow: 0 0 20px rgba(255, 51, 51, 0.4); }
      50% { transform: scale(1.3); box-shadow: 0 0 30px rgba(255, 51, 51, 0.8); }
    }
    @keyframes jolt {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(5deg); }
      75% { transform: rotate(-5deg); }
    }
    @keyframes intensityPulse {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.3); }
    }
    .notification-enter {
      animation: slideIn 0.3s ease-out;
    }
    .modal-enter {
      animation: fadeIn 0.2s ease-out;
    }
    .pop-out {
      transform: scale(1.1) translateY(-4px);
      transition: transform 0.3s ease;
    }
    .threat-lift {
      box-shadow: 0 8px 20px rgba(255, 51, 51, 0.6);
      transition: box-shadow 0.3s ease;
    }
    .heartbeat {
      animation: pulse 1s infinite;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useCallback } = React;

    // ============================================
    // API BASE URL
    // ============================================
    const API_BASE = window.location.origin + '/api';

    // ============================================
    // REAL DATA SOURCES & API INTEGRATION
    // ============================================

    // BLS Median Hourly Wage by MSA (Q3 2024 data)
    // Source: Bureau of Labor Statistics Occupational Employment and Wage Statistics
    const MSA_WAGE_DATA = {
      'New York-Newark-Jersey City, NY-NJ-PA': 26.48,
      'Los Angeles-Long Beach-Anaheim, CA': 24.12,
      'Chicago-Naperville-Elgin, IL-IN-WI': 23.67,
      'Dallas-Fort Worth-Arlington, TX': 22.34,
      'Houston-The Woodlands-Sugar Land, TX': 22.89,
      'Washington-Arlington-Alexandria, DC-VA-MD-WV': 28.45,
      'Miami-Fort Lauderdale-Pompano Beach, FL': 20.56,
      'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD': 24.23,
      'Atlanta-Sandy Springs-Alpharetta, GA': 22.15,
      'Boston-Cambridge-Newton, MA-NH': 27.89,
      'Phoenix-Mesa-Chandler, AZ': 21.34,
      'San Francisco-Oakland-Berkeley, CA': 31.45,
      'Riverside-San Bernardino-Ontario, CA': 19.87,
      'Detroit-Warren-Dearborn, MI': 22.45,
      'Seattle-Tacoma-Bellevue, WA': 28.67,
      'Minneapolis-St. Paul-Bloomington, MN-WI': 25.12,
      'San Diego-Chula Vista-Carlsbad, CA': 24.89,
      'Tampa-St. Petersburg-Clearwater, FL': 19.78,
      'Denver-Aurora-Lakewood, CO': 25.56,
      'St. Louis, MO-IL': 21.89,
      'Baltimore-Columbia-Towson, MD': 24.67,
      'Orlando-Kissimmee-Sanford, FL': 18.95,
      'Charlotte-Concord-Gastonia, NC-SC': 22.34,
      'San Antonio-New Braunfels, TX': 20.12,
      'Portland-Vancouver-Hillsboro, OR-WA': 25.23,
      'Sacramento-Roseville-Folsom, CA': 24.45,
      'Pittsburgh, PA': 22.12,
      'Las Vegas-Henderson-Paradise, NV': 20.45,
      'Austin-Round Rock-Georgetown, TX': 24.78,
      'Cincinnati, OH-KY-IN': 21.56,
      'Kansas City, MO-KS': 21.89,
      'Columbus, OH': 22.34,
      'Indianapolis-Carmel-Anderson, IN': 21.23,
      'Cleveland-Elyria, OH': 21.45,
      'San Jose-Sunnyvale-Santa Clara, CA': 35.67,
      'Nashville-Davidson-Murfreesboro-Franklin, TN': 21.78,
      'Virginia Beach-Norfolk-Newport News, VA-NC': 20.89,
      'Providence-Warwick, RI-MA': 23.12,
      'Milwaukee-Waukesha, WI': 22.67,
      'Jacksonville, FL': 20.34,
      'Memphis, TN-MS-AR': 19.45,
      'Oklahoma City, OK': 19.89,
      'Louisville/Jefferson County, KY-IN': 20.56,
      'Hartford-East Hartford-Middletown, CT': 25.34,
      'Richmond, VA': 22.12,
      'New Orleans-Metairie, LA': 19.78,
      'Buffalo-Cheektowaga, NY': 21.23,
      'Raleigh-Cary, NC': 24.45,
      'Birmingham-Hoover, AL': 20.12,
      'Salt Lake City, UT': 22.89,
      'Honolulu, HI': 23.45,
      'Tucson, AZ': 19.56,
      'Fresno, CA': 18.67,
      'Albuquerque, NM': 19.23,
      'Omaha-Council Bluffs, NE-IA': 21.34,
      'Bakersfield, CA': 18.45,
      'default': 22.45  // National median
    };

    // State median hourly wage (2023 BLS OEWS, rounded)
    // Source: Bureau of Labor Statistics Occupational Employment and Wage Statistics (statewide)
    const STATE_WAGE_DATA = {
      'AL': 20.23,
      'AK': 26.41,
      'AZ': 23.08,
      'AR': 19.66,
      'CA': 27.88,
      'CO': 27.12,
      'CT': 27.45,
      'DE': 25.38,
      'FL': 22.12,
      'GA': 22.18,
      'HI': 24.89,
      'ID': 21.58,
      'IL': 25.12,
      'IN': 22.06,
      'IA': 21.97,
      'KS': 21.68,
      'KY': 21.32,
      'LA': 20.34,
      'ME': 22.64,
      'MD': 27.02,
      'MA': 29.32,
      'MI': 23.54,
      'MN': 25.98,
      'MS': 19.32,
      'MO': 22.21,
      'MT': 21.48,
      'NE': 22.11,
      'NV': 22.34,
      'NH': 24.85,
      'NJ': 27.36,
      'NM': 21.12,
      'NY': 27.58,
      'NC': 22.06,
      'ND': 24.12,
      'OH': 22.76,
      'OK': 21.04,
      'OR': 25.34,
      'PA': 24.02,
      'RI': 25.01,
      'SC': 21.24,
      'SD': 21.08,
      'TN': 21.46,
      'TX': 23.16,
      'UT': 24.04,
      'VT': 23.58,
      'VA': 25.68,
      'WA': 29.04,
      'WV': 20.12,
      'WI': 23.48,
      'WY': 23.12,
      'DC': 36.88
    };

    // HUD Fair Market Rents FY2024 (2-bedroom monthly)
    // Source: HUD Office of Policy Development and Research
    const MSA_RENT_DATA = {
      'New York-Newark-Jersey City, NY-NJ-PA': 2387,
      'Los Angeles-Long Beach-Anaheim, CA': 2166,
      'Chicago-Naperville-Elgin, IL-IN-WI': 1398,
      'Dallas-Fort Worth-Arlington, TX': 1534,
      'Houston-The Woodlands-Sugar Land, TX': 1352,
      'Washington-Arlington-Alexandria, DC-VA-MD-WV': 1987,
      'Miami-Fort Lauderdale-Pompano Beach, FL': 1987,
      'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD': 1456,
      'Atlanta-Sandy Springs-Alpharetta, GA': 1612,
      'Boston-Cambridge-Newton, MA-NH': 2534,
      'Phoenix-Mesa-Chandler, AZ': 1534,
      'San Francisco-Oakland-Berkeley, CA': 2876,
      'Riverside-San Bernardino-Ontario, CA': 1723,
      'Detroit-Warren-Dearborn, MI': 1156,
      'Seattle-Tacoma-Bellevue, WA': 2123,
      'Minneapolis-St. Paul-Bloomington, MN-WI': 1445,
      'San Diego-Chula Vista-Carlsbad, CA': 2234,
      'Tampa-St. Petersburg-Clearwater, FL': 1612,
      'Denver-Aurora-Lakewood, CO': 1845,
      'St. Louis, MO-IL': 1089,
      'Baltimore-Columbia-Towson, MD': 1656,
      'Orlando-Kissimmee-Sanford, FL': 1678,
      'Charlotte-Concord-Gastonia, NC-SC': 1423,
      'San Antonio-New Braunfels, TX': 1267,
      'Portland-Vancouver-Hillsboro, OR-WA': 1756,
      'Sacramento-Roseville-Folsom, CA': 1689,
      'Pittsburgh, PA': 1078,
      'Las Vegas-Henderson-Paradise, NV': 1534,
      'Austin-Round Rock-Georgetown, TX': 1612,
      'Cincinnati, OH-KY-IN': 1045,
      'Kansas City, MO-KS': 1156,
      'Columbus, OH': 1189,
      'Indianapolis-Carmel-Anderson, IN': 1078,
      'Cleveland-Elyria, OH': 989,
      'San Jose-Sunnyvale-Santa Clara, CA': 3123,
      'Nashville-Davidson-Murfreesboro-Franklin, TN': 1534,
      'Virginia Beach-Norfolk-Newport News, VA-NC': 1378,
      'Providence-Warwick, RI-MA': 1456,
      'Milwaukee-Waukesha, WI': 1134,
      'Jacksonville, FL': 1434,
      'Memphis, TN-MS-AR': 1067,
      'Oklahoma City, OK': 1023,
      'Louisville/Jefferson County, KY-IN': 1012,
      'Hartford-East Hartford-Middletown, CT': 1456,
      'Richmond, VA': 1334,
      'New Orleans-Metairie, LA': 1189,
      'Buffalo-Cheektowaga, NY': 1045,
      'Raleigh-Cary, NC': 1534,
      'Birmingham-Hoover, AL': 1045,
      'Salt Lake City, UT': 1445,
      'Honolulu, HI': 2345,
      'Tucson, AZ': 1134,
      'Fresno, CA': 1178,
      'Albuquerque, NM': 1089,
      'Omaha-Council Bluffs, NE-IA': 1067,
      'Bakersfield, CA': 1156,
      'default': 1402  // National median
    };

    // Regional Cost Multipliers (relative to national average = 1.0)
    // Sources: BLS Consumer Price Index, USDA Thrifty Food Plan, EIA utilities
    const REGIONAL_COSTS = {
      'New York-Newark-Jersey City, NY-NJ-PA': { food: 1.15, healthcare: 1.12, transport: 0.85, utilities: 1.08 },
      'Los Angeles-Long Beach-Anaheim, CA': { food: 1.08, healthcare: 1.15, transport: 1.25, utilities: 1.05 },
      'Chicago-Naperville-Elgin, IL-IN-WI': { food: 0.98, healthcare: 1.02, transport: 0.90, utilities: 0.95 },
      'Dallas-Fort Worth-Arlington, TX': { food: 0.95, healthcare: 0.98, transport: 1.15, utilities: 1.02 },
      'Houston-The Woodlands-Sugar Land, TX': { food: 0.93, healthcare: 0.95, transport: 1.18, utilities: 1.05 },
      'Washington-Arlington-Alexandria, DC-VA-MD-WV': { food: 1.05, healthcare: 1.08, transport: 0.92, utilities: 1.02 },
      'Miami-Fort Lauderdale-Pompano Beach, FL': { food: 1.02, healthcare: 1.05, transport: 1.12, utilities: 0.98 },
      'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD': { food: 1.02, healthcare: 1.05, transport: 0.88, utilities: 1.08 },
      'Atlanta-Sandy Springs-Alpharetta, GA': { food: 0.95, healthcare: 0.98, transport: 1.15, utilities: 0.95 },
      'Boston-Cambridge-Newton, MA-NH': { food: 1.10, healthcare: 1.12, transport: 0.85, utilities: 1.15 },
      'Phoenix-Mesa-Chandler, AZ': { food: 0.98, healthcare: 1.02, transport: 1.10, utilities: 1.08 },
      'San Francisco-Oakland-Berkeley, CA': { food: 1.18, healthcare: 1.20, transport: 0.92, utilities: 1.12 },
      'Riverside-San Bernardino-Ontario, CA': { food: 1.02, healthcare: 1.05, transport: 1.22, utilities: 1.02 },
      'Detroit-Warren-Dearborn, MI': { food: 0.92, healthcare: 0.95, transport: 1.10, utilities: 1.05 },
      'Seattle-Tacoma-Bellevue, WA': { food: 1.08, healthcare: 1.10, transport: 0.95, utilities: 0.92 },
      'Minneapolis-St. Paul-Bloomington, MN-WI': { food: 0.95, healthcare: 1.02, transport: 1.02, utilities: 1.02 },
      'San Diego-Chula Vista-Carlsbad, CA': { food: 1.10, healthcare: 1.12, transport: 1.15, utilities: 1.05 },
      'Tampa-St. Petersburg-Clearwater, FL': { food: 0.98, healthcare: 1.00, transport: 1.12, utilities: 0.95 },
      'Denver-Aurora-Lakewood, CO': { food: 1.02, healthcare: 1.05, transport: 1.05, utilities: 0.95 },
      'St. Louis, MO-IL': { food: 0.92, healthcare: 0.95, transport: 1.05, utilities: 0.98 },
      'Baltimore-Columbia-Towson, MD': { food: 1.00, healthcare: 1.05, transport: 0.95, utilities: 1.02 },
      'Orlando-Kissimmee-Sanford, FL': { food: 0.98, healthcare: 1.02, transport: 1.15, utilities: 0.95 },
      'Charlotte-Concord-Gastonia, NC-SC': { food: 0.95, healthcare: 0.98, transport: 1.10, utilities: 0.92 },
      'San Antonio-New Braunfels, TX': { food: 0.92, healthcare: 0.95, transport: 1.12, utilities: 1.02 },
      'Portland-Vancouver-Hillsboro, OR-WA': { food: 1.05, healthcare: 1.08, transport: 1.00, utilities: 0.88 },
      'Sacramento-Roseville-Folsom, CA': { food: 1.05, healthcare: 1.08, transport: 1.15, utilities: 1.02 },
      'Pittsburgh, PA': { food: 0.95, healthcare: 0.98, transport: 1.05, utilities: 1.02 },
      'Las Vegas-Henderson-Paradise, NV': { food: 1.00, healthcare: 1.02, transport: 1.08, utilities: 1.05 },
      'Austin-Round Rock-Georgetown, TX': { food: 0.98, healthcare: 1.00, transport: 1.12, utilities: 1.02 },
      'Cincinnati, OH-KY-IN': { food: 0.90, healthcare: 0.95, transport: 1.05, utilities: 0.98 },
      'Kansas City, MO-KS': { food: 0.92, healthcare: 0.95, transport: 1.08, utilities: 0.98 },
      'Columbus, OH': { food: 0.92, healthcare: 0.98, transport: 1.05, utilities: 0.95 },
      'Indianapolis-Carmel-Anderson, IN': { food: 0.90, healthcare: 0.95, transport: 1.08, utilities: 0.95 },
      'Cleveland-Elyria, OH': { food: 0.92, healthcare: 0.98, transport: 1.02, utilities: 1.00 },
      'San Jose-Sunnyvale-Santa Clara, CA': { food: 1.22, healthcare: 1.25, transport: 1.00, utilities: 1.15 },
      'Nashville-Davidson-Murfreesboro-Franklin, TN': { food: 0.95, healthcare: 0.98, transport: 1.12, utilities: 0.92 },
      'Virginia Beach-Norfolk-Newport News, VA-NC': { food: 0.95, healthcare: 0.98, transport: 1.10, utilities: 0.98 },
      'Providence-Warwick, RI-MA': { food: 1.02, healthcare: 1.05, transport: 0.95, utilities: 1.08 },
      'Milwaukee-Waukesha, WI': { food: 0.95, healthcare: 0.98, transport: 1.00, utilities: 0.98 },
      'Jacksonville, FL': { food: 0.95, healthcare: 0.98, transport: 1.15, utilities: 0.95 },
      'Memphis, TN-MS-AR': { food: 0.88, healthcare: 0.92, transport: 1.10, utilities: 0.92 },
      'Oklahoma City, OK': { food: 0.88, healthcare: 0.90, transport: 1.12, utilities: 0.95 },
      'Louisville/Jefferson County, KY-IN': { food: 0.90, healthcare: 0.95, transport: 1.08, utilities: 0.95 },
      'Hartford-East Hartford-Middletown, CT': { food: 1.05, healthcare: 1.08, transport: 0.95, utilities: 1.12 },
      'Richmond, VA': { food: 0.95, healthcare: 0.98, transport: 1.08, utilities: 0.98 },
      'New Orleans-Metairie, LA': { food: 0.95, healthcare: 0.98, transport: 1.10, utilities: 0.95 },
      'Buffalo-Cheektowaga, NY': { food: 0.95, healthcare: 0.98, transport: 1.00, utilities: 1.05 },
      'Raleigh-Cary, NC': { food: 0.95, healthcare: 1.00, transport: 1.12, utilities: 0.92 },
      'Birmingham-Hoover, AL': { food: 0.88, healthcare: 0.92, transport: 1.12, utilities: 0.95 },
      'Salt Lake City, UT': { food: 0.98, healthcare: 1.00, transport: 1.08, utilities: 0.92 },
      'Honolulu, HI': { food: 1.35, healthcare: 1.15, transport: 0.95, utilities: 1.40 },
      'Tucson, AZ': { food: 0.95, healthcare: 0.98, transport: 1.10, utilities: 1.05 },
      'Fresno, CA': { food: 0.98, healthcare: 0.98, transport: 1.18, utilities: 1.02 },
      'Albuquerque, NM': { food: 0.95, healthcare: 0.95, transport: 1.12, utilities: 0.98 },
      'Omaha-Council Bluffs, NE-IA': { food: 0.90, healthcare: 0.95, transport: 1.05, utilities: 0.95 },
      'Bakersfield, CA': { food: 0.98, healthcare: 0.95, transport: 1.20, utilities: 1.05 },
      'Riverside-San Bernardino-Ontario, CA': { food: 1.02, healthcare: 1.05, transport: 1.22, utilities: 1.02 },
      'default': { food: 1.00, healthcare: 1.00, transport: 1.00, utilities: 1.00 }
    };

    // National baseline costs (monthly, 2024)
    const NATIONAL_BASELINES = {
      food: 475,        // USDA Thrifty Food Plan, single adult
      healthcare: 385,  // Average marketplace premium + out-of-pocket
      transport: 285,   // AAA average vehicle ownership cost
      utilities: 175    // EIA average residential utilities
    };

    // ============================================
    // TAX DATA (2024)
    // Sources: IRS 2024 brackets, Tax Foundation state rates, SSA FICA rates
    // ============================================

    // 2024 Federal Income Tax Brackets (Single Filer)
    // Source: IRS Revenue Procedure 2023-34
    const FEDERAL_TAX_BRACKETS = [
      { min: 0,      max: 11600,  rate: 0.10 },
      { min: 11600,  max: 47150,  rate: 0.12 },
      { min: 47150,  max: 100525, rate: 0.22 },
      { min: 100525, max: 191950, rate: 0.24 },
      { min: 191950, max: 243725, rate: 0.32 },
      { min: 243725, max: 609350, rate: 0.35 },
      { min: 609350, max: Infinity, rate: 0.37 }
    ];

    // 2024 Standard Deduction (Single Filer)
    const FEDERAL_STANDARD_DEDUCTION = 14600;

    // FICA Tax Rates (Employee Share, 2024)
    // Source: SSA, IRS Topic 751
    const FICA_SS_RATE = 0.062;        // Social Security: 6.2%
    const FICA_SS_WAGE_CAP = 168600;   // SS wage base limit 2024
    const FICA_MEDICARE_RATE = 0.0145;  // Medicare: 1.45%

    // State Income Tax Rates (2024, effective rate for single filers at median wage)
    // For progressive states: approximate effective rate at ~$45k annual income
    // For flat-tax states: the flat rate
    // Sources: Tax Foundation 2024 State Income Tax Rates and Brackets
    // https://taxfoundation.org/data/all/state/state-income-tax-rates-2024/
    const STATE_TAX_DATA = {
      // --- No income tax states ---
      'AK': { type: 'none', rate: 0 },
      'FL': { type: 'none', rate: 0 },
      'NV': { type: 'none', rate: 0 },
      'NH': { type: 'none', rate: 0 },         // No wage income tax (interest/dividends only)
      'SD': { type: 'none', rate: 0 },
      'TN': { type: 'none', rate: 0 },
      'TX': { type: 'none', rate: 0 },
      'WA': { type: 'none', rate: 0 },
      'WY': { type: 'none', rate: 0 },

      // --- Flat tax states ---
      'AZ': { type: 'flat', rate: 0.025 },     // 2.5%
      'CO': { type: 'flat', rate: 0.044 },     // 4.40%
      'GA': { type: 'flat', rate: 0.0549 },    // 5.49%
      'ID': { type: 'flat', rate: 0.058 },     // 5.8%
      'IL': { type: 'flat', rate: 0.0495 },    // 4.95%
      'IN': { type: 'flat', rate: 0.0305 },    // 3.05% (state only; locals add ~1-2%)
      'KY': { type: 'flat', rate: 0.04 },      // 4.0%
      'MA': { type: 'flat', rate: 0.05 },      // 5.0%
      'MI': { type: 'flat', rate: 0.0425 },    // 4.25%
      'MS': { type: 'flat', rate: 0.047 },     // 4.7%
      'NC': { type: 'flat', rate: 0.0450 },    // 4.50%
      'ND': { type: 'flat', rate: 0.0195 },    // 1.95%
      'PA': { type: 'flat', rate: 0.0307 },    // 3.07%
      'UT': { type: 'flat', rate: 0.0455 },    // 4.55%

      // --- Progressive tax states (brackets for single filers) ---
      'AL': {
        type: 'progressive',
        deduction: 2500,
        brackets: [
          { min: 0, max: 500, rate: 0.02 },
          { min: 500, max: 3000, rate: 0.04 },
          { min: 3000, max: Infinity, rate: 0.05 }
        ]
      },
      'AR': {
        type: 'progressive',
        deduction: 2270,
        brackets: [
          { min: 0, max: 4400, rate: 0.02 },
          { min: 4400, max: 8800, rate: 0.04 },
          { min: 8800, max: Infinity, rate: 0.044 }
        ]
      },
      'CA': {
        type: 'progressive',
        deduction: 5363,
        brackets: [
          { min: 0, max: 10412, rate: 0.01 },
          { min: 10412, max: 24684, rate: 0.02 },
          { min: 24684, max: 38959, rate: 0.04 },
          { min: 38959, max: 54081, rate: 0.06 },
          { min: 54081, max: 68350, rate: 0.08 },
          { min: 68350, max: 349137, rate: 0.093 },
          { min: 349137, max: 418961, rate: 0.103 },
          { min: 418961, max: 698271, rate: 0.113 },
          { min: 698271, max: Infinity, rate: 0.123 }
        ]
      },
      'CT': {
        type: 'progressive',
        deduction: 0,
        brackets: [
          { min: 0, max: 10000, rate: 0.02 },
          { min: 10000, max: 50000, rate: 0.045 },
          { min: 50000, max: 100000, rate: 0.055 },
          { min: 100000, max: 200000, rate: 0.06 },
          { min: 200000, max: 250000, rate: 0.065 },
          { min: 250000, max: 500000, rate: 0.069 },
          { min: 500000, max: Infinity, rate: 0.0699 }
        ]
      },
      'DE': {
        type: 'progressive',
        deduction: 3250,
        brackets: [
          { min: 0, max: 2000, rate: 0 },
          { min: 2000, max: 5000, rate: 0.022 },
          { min: 5000, max: 10000, rate: 0.039 },
          { min: 10000, max: 20000, rate: 0.048 },
          { min: 20000, max: 25000, rate: 0.052 },
          { min: 25000, max: 60000, rate: 0.0555 },
          { min: 60000, max: Infinity, rate: 0.066 }
        ]
      },
      'HI': {
        type: 'progressive',
        deduction: 2200,
        brackets: [
          { min: 0, max: 2400, rate: 0.014 },
          { min: 2400, max: 4800, rate: 0.032 },
          { min: 4800, max: 9600, rate: 0.055 },
          { min: 9600, max: 14400, rate: 0.064 },
          { min: 14400, max: 19200, rate: 0.068 },
          { min: 19200, max: 24000, rate: 0.072 },
          { min: 24000, max: 36000, rate: 0.076 },
          { min: 36000, max: 48000, rate: 0.079 },
          { min: 48000, max: 150000, rate: 0.0825 },
          { min: 150000, max: 175000, rate: 0.09 },
          { min: 175000, max: 200000, rate: 0.10 },
          { min: 200000, max: Infinity, rate: 0.11 }
        ]
      },
      'IA': {
        type: 'progressive',
        deduction: 2210,
        brackets: [
          { min: 0, max: 6210, rate: 0.044 },
          { min: 6210, max: 31050, rate: 0.0482 },
          { min: 31050, max: Infinity, rate: 0.057 }
        ]
      },
      'KS': {
        type: 'progressive',
        deduction: 3500,
        brackets: [
          { min: 0, max: 15000, rate: 0.031 },
          { min: 15000, max: 30000, rate: 0.0525 },
          { min: 30000, max: Infinity, rate: 0.057 }
        ]
      },
      'LA': {
        type: 'progressive',
        deduction: 0,
        brackets: [
          { min: 0, max: 12500, rate: 0.0185 },
          { min: 12500, max: 50000, rate: 0.035 },
          { min: 50000, max: Infinity, rate: 0.0425 }
        ]
      },
      'ME': {
        type: 'progressive',
        deduction: 14600,
        brackets: [
          { min: 0, max: 24500, rate: 0.058 },
          { min: 24500, max: 58050, rate: 0.0675 },
          { min: 58050, max: Infinity, rate: 0.0715 }
        ]
      },
      'MD': {
        type: 'progressive',
        deduction: 2400,
        brackets: [
          { min: 0, max: 1000, rate: 0.02 },
          { min: 1000, max: 2000, rate: 0.03 },
          { min: 2000, max: 3000, rate: 0.04 },
          { min: 3000, max: 100000, rate: 0.0475 },
          { min: 100000, max: 125000, rate: 0.05 },
          { min: 125000, max: 150000, rate: 0.0525 },
          { min: 150000, max: 250000, rate: 0.055 },
          { min: 250000, max: Infinity, rate: 0.0575 }
        ]
      },
      'MN': {
        type: 'progressive',
        deduction: 14575,
        brackets: [
          { min: 0, max: 30070, rate: 0.0535 },
          { min: 30070, max: 98760, rate: 0.068 },
          { min: 98760, max: 183340, rate: 0.0785 },
          { min: 183340, max: Infinity, rate: 0.0985 }
        ]
      },
      'MO': {
        type: 'progressive',
        deduction: 14600,
        brackets: [
          { min: 0, max: 1207, rate: 0.02 },
          { min: 1207, max: 2414, rate: 0.025 },
          { min: 2414, max: 3621, rate: 0.03 },
          { min: 3621, max: 4828, rate: 0.035 },
          { min: 4828, max: 6035, rate: 0.04 },
          { min: 6035, max: 7242, rate: 0.045 },
          { min: 7242, max: Infinity, rate: 0.048 }
        ]
      },
      'MT': {
        type: 'progressive',
        deduction: 14600,
        brackets: [
          { min: 0, max: 20500, rate: 0.047 },
          { min: 20500, max: Infinity, rate: 0.059 }
        ]
      },
      'NE': {
        type: 'progressive',
        deduction: 7900,
        brackets: [
          { min: 0, max: 3700, rate: 0.0246 },
          { min: 3700, max: 22170, rate: 0.0351 },
          { min: 22170, max: 35730, rate: 0.0501 },
          { min: 35730, max: Infinity, rate: 0.0584 }
        ]
      },
      'NJ': {
        type: 'progressive',
        deduction: 0,
        brackets: [
          { min: 0, max: 20000, rate: 0.014 },
          { min: 20000, max: 35000, rate: 0.0175 },
          { min: 35000, max: 40000, rate: 0.035 },
          { min: 40000, max: 75000, rate: 0.05525 },
          { min: 75000, max: 500000, rate: 0.0637 },
          { min: 500000, max: 1000000, rate: 0.0897 },
          { min: 1000000, max: Infinity, rate: 0.1075 }
        ]
      },
      'NM': {
        type: 'progressive',
        deduction: 14600,
        brackets: [
          { min: 0, max: 5500, rate: 0.017 },
          { min: 5500, max: 11000, rate: 0.032 },
          { min: 11000, max: 16000, rate: 0.047 },
          { min: 16000, max: 210000, rate: 0.049 },
          { min: 210000, max: Infinity, rate: 0.059 }
        ]
      },
      'NY': {
        type: 'progressive',
        deduction: 8000,
        brackets: [
          { min: 0, max: 8500, rate: 0.04 },
          { min: 8500, max: 11700, rate: 0.045 },
          { min: 11700, max: 13900, rate: 0.0525 },
          { min: 13900, max: 80650, rate: 0.055 },
          { min: 80650, max: 215400, rate: 0.06 },
          { min: 215400, max: 1077550, rate: 0.0685 },
          { min: 1077550, max: Infinity, rate: 0.109 }
        ]
      },
      'OH': {
        type: 'progressive',
        deduction: 0,
        brackets: [
          { min: 0, max: 26050, rate: 0 },
          { min: 26050, max: 100000, rate: 0.0275 },
          { min: 100000, max: Infinity, rate: 0.035 }
        ]
      },
      'OK': {
        type: 'progressive',
        deduction: 6350,
        brackets: [
          { min: 0, max: 1000, rate: 0.0025 },
          { min: 1000, max: 2500, rate: 0.0075 },
          { min: 2500, max: 3750, rate: 0.0175 },
          { min: 3750, max: 4900, rate: 0.0275 },
          { min: 4900, max: 7200, rate: 0.0375 },
          { min: 7200, max: Infinity, rate: 0.0475 }
        ]
      },
      'OR': {
        type: 'progressive',
        deduction: 2745,
        brackets: [
          { min: 0, max: 4050, rate: 0.0475 },
          { min: 4050, max: 10200, rate: 0.0675 },
          { min: 10200, max: 125000, rate: 0.0875 },
          { min: 125000, max: Infinity, rate: 0.099 }
        ]
      },
      'RI': {
        type: 'progressive',
        deduction: 9600,
        brackets: [
          { min: 0, max: 73450, rate: 0.0375 },
          { min: 73450, max: 166950, rate: 0.0475 },
          { min: 166950, max: Infinity, rate: 0.0599 }
        ]
      },
      'SC': {
        type: 'progressive',
        deduction: 14600,
        brackets: [
          { min: 0, max: 3460, rate: 0 },
          { min: 3460, max: 17330, rate: 0.03 },
          { min: 17330, max: Infinity, rate: 0.062 }
        ]
      },
      'VT': {
        type: 'progressive',
        deduction: 14600,
        brackets: [
          { min: 0, max: 45400, rate: 0.0335 },
          { min: 45400, max: 110050, rate: 0.066 },
          { min: 110050, max: 229550, rate: 0.076 },
          { min: 229550, max: Infinity, rate: 0.0875 }
        ]
      },
      'VA': {
        type: 'progressive',
        deduction: 4500,
        brackets: [
          { min: 0, max: 3000, rate: 0.02 },
          { min: 3000, max: 5000, rate: 0.03 },
          { min: 5000, max: 17000, rate: 0.05 },
          { min: 17000, max: Infinity, rate: 0.0575 }
        ]
      },
      'WV': {
        type: 'progressive',
        deduction: 0,
        brackets: [
          { min: 0, max: 10000, rate: 0.0236 },
          { min: 10000, max: 25000, rate: 0.0315 },
          { min: 25000, max: 40000, rate: 0.0354 },
          { min: 40000, max: 60000, rate: 0.0472 },
          { min: 60000, max: Infinity, rate: 0.0512 }
        ]
      },
      'WI': {
        type: 'progressive',
        deduction: 12760,
        brackets: [
          { min: 0, max: 14320, rate: 0.035 },
          { min: 14320, max: 28640, rate: 0.044 },
          { min: 28640, max: 315310, rate: 0.053 },
          { min: 315310, max: Infinity, rate: 0.0765 }
        ]
      },
      'DC': {
        type: 'progressive',
        deduction: 14600,
        brackets: [
          { min: 0, max: 10000, rate: 0.04 },
          { min: 10000, max: 40000, rate: 0.06 },
          { min: 40000, max: 60000, rate: 0.065 },
          { min: 60000, max: 250000, rate: 0.085 },
          { min: 250000, max: 500000, rate: 0.0925 },
          { min: 500000, max: 1000000, rate: 0.0975 },
          { min: 1000000, max: Infinity, rate: 0.1075 }
        ]
      }
    };

    // Map MSA to primary state for tax purposes
    // For multi-state MSAs, uses the primary state (where the named city is)
    const MSA_TO_STATE = {
      'New York-Newark-Jersey City, NY-NJ-PA': 'NY',
      'Los Angeles-Long Beach-Anaheim, CA': 'CA',
      'Chicago-Naperville-Elgin, IL-IN-WI': 'IL',
      'Dallas-Fort Worth-Arlington, TX': 'TX',
      'Houston-The Woodlands-Sugar Land, TX': 'TX',
      'Washington-Arlington-Alexandria, DC-VA-MD-WV': 'DC',
      'Miami-Fort Lauderdale-Pompano Beach, FL': 'FL',
      'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD': 'PA',
      'Atlanta-Sandy Springs-Alpharetta, GA': 'GA',
      'Boston-Cambridge-Newton, MA-NH': 'MA',
      'Phoenix-Mesa-Chandler, AZ': 'AZ',
      'San Francisco-Oakland-Berkeley, CA': 'CA',
      'Riverside-San Bernardino-Ontario, CA': 'CA',
      'Detroit-Warren-Dearborn, MI': 'MI',
      'Seattle-Tacoma-Bellevue, WA': 'WA',
      'Minneapolis-St. Paul-Bloomington, MN-WI': 'MN',
      'San Diego-Chula Vista-Carlsbad, CA': 'CA',
      'Tampa-St. Petersburg-Clearwater, FL': 'FL',
      'Denver-Aurora-Lakewood, CO': 'CO',
      'St. Louis, MO-IL': 'MO',
      'Baltimore-Columbia-Towson, MD': 'MD',
      'Orlando-Kissimmee-Sanford, FL': 'FL',
      'Charlotte-Concord-Gastonia, NC-SC': 'NC',
      'San Antonio-New Braunfels, TX': 'TX',
      'Portland-Vancouver-Hillsboro, OR-WA': 'OR',
      'Sacramento-Roseville-Folsom, CA': 'CA',
      'Pittsburgh, PA': 'PA',
      'Las Vegas-Henderson-Paradise, NV': 'NV',
      'Austin-Round Rock-Georgetown, TX': 'TX',
      'Cincinnati, OH-KY-IN': 'OH',
      'Kansas City, MO-KS': 'MO',
      'Columbus, OH': 'OH',
      'Indianapolis-Carmel-Anderson, IN': 'IN',
      'Cleveland-Elyria, OH': 'OH',
      'San Jose-Sunnyvale-Santa Clara, CA': 'CA',
      'Nashville-Davidson-Murfreesboro-Franklin, TN': 'TN',
      'Virginia Beach-Norfolk-Newport News, VA-NC': 'VA',
      'Providence-Warwick, RI-MA': 'RI',
      'Milwaukee-Waukesha, WI': 'WI',
      'Jacksonville, FL': 'FL',
      'Memphis, TN-MS-AR': 'TN',
      'Oklahoma City, OK': 'OK',
      'Louisville/Jefferson County, KY-IN': 'KY',
      'Hartford-East Hartford-Middletown, CT': 'CT',
      'Richmond, VA': 'VA',
      'New Orleans-Metairie, LA': 'LA',
      'Buffalo-Cheektowaga, NY': 'NY',
      'Raleigh-Cary, NC': 'NC',
      'Birmingham-Hoover, AL': 'AL',
      'Salt Lake City, UT': 'UT',
      'Honolulu, HI': 'HI',
      'Tucson, AZ': 'AZ',
      'Fresno, CA': 'CA',
      'Albuquerque, NM': 'NM',
      'Omaha-Council Bluffs, NE-IA': 'NE',
      'Bakersfield, CA': 'CA',
      'default': null  // No state tax for unknown MSA (conservative)
    };

    // Calculate progressive tax from brackets
    const calculateProgressiveTax = (taxableIncome, brackets) => {
      let tax = 0;
      for (const bracket of brackets) {
        if (taxableIncome <= bracket.min) break;
        const taxableInBracket = Math.min(taxableIncome, bracket.max) - bracket.min;
        tax += taxableInBracket * bracket.rate;
      }
      return tax;
    };

    // Calculate federal income tax for a given annual gross income (single filer)
    const calculateFederalTax = (annualGross) => {
      const taxableIncome = Math.max(0, annualGross - FEDERAL_STANDARD_DEDUCTION);
      return calculateProgressiveTax(taxableIncome, FEDERAL_TAX_BRACKETS);
    };

    // Calculate state income tax for a given annual gross income
    const calculateStateTax = (annualGross, stateCode) => {
      if (!stateCode) return 0;
      const stateData = STATE_TAX_DATA[stateCode];
      if (!stateData) return 0;

      if (stateData.type === 'none') return 0;

      if (stateData.type === 'flat') {
        // Flat tax states generally tax all income (simplified)
        return annualGross * stateData.rate;
      }

      // Progressive: apply state standard deduction if available
      const deduction = stateData.deduction || 0;
      const taxableIncome = Math.max(0, annualGross - deduction);
      return calculateProgressiveTax(taxableIncome, stateData.brackets);
    };

    // Calculate FICA taxes (employee share)
    const calculateFICA = (annualGross) => {
      const ssTax = Math.min(annualGross, FICA_SS_WAGE_CAP) * FICA_SS_RATE;
      const medicareTax = annualGross * FICA_MEDICARE_RATE;
      return ssTax + medicareTax;
    };

    // Calculate total effective tax rate and net hourly wage
    const calculateTaxData = (hourlyWage, msa, stateOverride = null) => {
      const annualGross = hourlyWage * 2080; // 40 hrs/wk × 52 weeks
      const stateCode = stateOverride || MSA_TO_STATE[msa] || MSA_TO_STATE.default;

      const federalTax = calculateFederalTax(annualGross);
      const stateTax = calculateStateTax(annualGross, stateCode);
      const ficaTax = calculateFICA(annualGross);
      const totalTax = federalTax + stateTax + ficaTax;

      const effectiveRate = annualGross > 0 ? totalTax / annualGross : 0;
      const netAnnual = annualGross - totalTax;
      const netHourlyWage = netAnnual / 2080;

      return {
        annualGross,
        federalTax,
        stateTax,
        ficaTax,
        totalTax,
        effectiveRate,
        netAnnual,
        netHourlyWage,
        stateCode: stateCode || 'N/A'
      };
    };

    // ZIP code prefix to MSA mapping (first 3 digits)
    const ZIP_TO_MSA = {
      // New York area
      '100': 'New York-Newark-Jersey City, NY-NJ-PA',
      '101': 'New York-Newark-Jersey City, NY-NJ-PA',
      '102': 'New York-Newark-Jersey City, NY-NJ-PA',
      '103': 'New York-Newark-Jersey City, NY-NJ-PA',
      '104': 'New York-Newark-Jersey City, NY-NJ-PA',
      '105': 'New York-Newark-Jersey City, NY-NJ-PA',
      '106': 'New York-Newark-Jersey City, NY-NJ-PA',
      '107': 'New York-Newark-Jersey City, NY-NJ-PA',
      '108': 'New York-Newark-Jersey City, NY-NJ-PA',
      '109': 'New York-Newark-Jersey City, NY-NJ-PA',
      '110': 'New York-Newark-Jersey City, NY-NJ-PA',
      '111': 'New York-Newark-Jersey City, NY-NJ-PA',
      '112': 'New York-Newark-Jersey City, NY-NJ-PA',
      '113': 'New York-Newark-Jersey City, NY-NJ-PA',
      '114': 'New York-Newark-Jersey City, NY-NJ-PA',
      '070': 'New York-Newark-Jersey City, NY-NJ-PA',
      '071': 'New York-Newark-Jersey City, NY-NJ-PA',
      '072': 'New York-Newark-Jersey City, NY-NJ-PA',
      '073': 'New York-Newark-Jersey City, NY-NJ-PA',
      '074': 'New York-Newark-Jersey City, NY-NJ-PA',
      '075': 'New York-Newark-Jersey City, NY-NJ-PA',
      '076': 'New York-Newark-Jersey City, NY-NJ-PA',
      '077': 'New York-Newark-Jersey City, NY-NJ-PA',
      '078': 'New York-Newark-Jersey City, NY-NJ-PA',
      '079': 'New York-Newark-Jersey City, NY-NJ-PA',

      // Los Angeles area
      '900': 'Los Angeles-Long Beach-Anaheim, CA',
      '901': 'Los Angeles-Long Beach-Anaheim, CA',
      '902': 'Beverly Hills, CA',
      '903': 'Los Angeles-Long Beach-Anaheim, CA',
      '904': 'Los Angeles-Long Beach-Anaheim, CA',
      '905': 'Los Angeles-Long Beach-Anaheim, CA',
      '906': 'Los Angeles-Long Beach-Anaheim, CA',
      '907': 'Los Angeles-Long Beach-Anaheim, CA',
      '908': 'Los Angeles-Long Beach-Anaheim, CA',
      '910': 'Los Angeles-Long Beach-Anaheim, CA',
      '911': 'Los Angeles-Long Beach-Anaheim, CA',
      '912': 'Los Angeles-Long Beach-Anaheim, CA',
      '913': 'Los Angeles-Long Beach-Anaheim, CA',
      '914': 'Los Angeles-Long Beach-Anaheim, CA',
      '915': 'Los Angeles-Long Beach-Anaheim, CA',
      '916': 'Los Angeles-Long Beach-Anaheim, CA',
      '917': 'Los Angeles-Long Beach-Anaheim, CA',
      '918': 'Los Angeles-Long Beach-Anaheim, CA',
      '926': 'Los Angeles-Long Beach-Anaheim, CA',
      '927': 'Los Angeles-Long Beach-Anaheim, CA',
      '928': 'Los Angeles-Long Beach-Anaheim, CA',

      // Chicago area
      '606': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '600': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '601': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '602': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '603': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '604': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '605': 'Chicago-Naperville-Elgin, IL-IN-WI',

      // Dallas area
      '750': 'Dallas-Fort Worth-Arlington, TX',
      '751': 'Dallas-Fort Worth-Arlington, TX',
      '752': 'Dallas-Fort Worth-Arlington, TX',
      '753': 'Dallas-Fort Worth-Arlington, TX',
      '754': 'Dallas-Fort Worth-Arlington, TX',
      '760': 'Dallas-Fort Worth-Arlington, TX',
      '761': 'Dallas-Fort Worth-Arlington, TX',
      '762': 'Dallas-Fort Worth-Arlington, TX',

      // Houston area
      '770': 'Houston-The Woodlands-Sugar Land, TX',
      '771': 'Houston-The Woodlands-Sugar Land, TX',
      '772': 'Houston-The Woodlands-Sugar Land, TX',
      '773': 'Houston-The Woodlands-Sugar Land, TX',
      '774': 'Houston-The Woodlands-Sugar Land, TX',
      '775': 'Houston-The Woodlands-Sugar Land, TX',

      // DC area
      '200': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '201': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '202': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '203': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '204': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '205': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '220': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '221': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '222': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',

      // Miami area
      '330': 'Miami-Fort Lauderdale-Pompano Beach, FL',
      '331': 'Miami-Fort Lauderdale-Pompano Beach, FL',
      '332': 'Miami-Fort Lauderdale-Pompano Beach, FL',
      '333': 'Miami-Fort Lauderdale-Pompano Beach, FL',
      '334': 'Miami-Fort Lauderdale-Pompano Beach, FL',

      // Philadelphia area
      '190': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '191': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '192': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '193': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '194': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '080': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '081': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',

      // Atlanta area
      '300': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '301': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '302': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '303': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '304': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '305': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '306': 'Atlanta-Sandy Springs-Alpharetta, GA',

      // Boston area
      '021': 'Boston-Cambridge-Newton, MA-NH',
      '020': 'Boston-Cambridge-Newton, MA-NH',
      '022': 'Boston-Cambridge-Newton, MA-NH',
      '023': 'Boston-Cambridge-Newton, MA-NH',
      '024': 'Boston-Cambridge-Newton, MA-NH',
      '017': 'Boston-Cambridge-Newton, MA-NH',
      '018': 'Boston-Cambridge-Newton, MA-NH',
      '019': 'Boston-Cambridge-Newton, MA-NH',

      // Phoenix area
      '850': 'Phoenix-Mesa-Chandler, AZ',
      '851': 'Phoenix-Mesa-Chandler, AZ',
      '852': 'Phoenix-Mesa-Chandler, AZ',
      '853': 'Phoenix-Mesa-Chandler, AZ',

      // San Francisco area
      '941': 'San Francisco-Oakland-Berkeley, CA',
      '940': 'San Francisco-Oakland-Berkeley, CA',
      '942': 'San Francisco-Oakland-Berkeley, CA',
      '943': 'San Francisco-Oakland-Berkeley, CA',
      '944': 'San Francisco-Oakland-Berkeley, CA',
      '945': 'San Francisco-Oakland-Berkeley, CA',
      '946': 'San Francisco-Oakland-Berkeley, CA',
      '947': 'San Francisco-Oakland-Berkeley, CA',

      // Detroit area
      '480': 'Detroit-Warren-Dearborn, MI',
      '481': 'Detroit-Warren-Dearborn, MI',
      '482': 'Detroit-Warren-Dearborn, MI',
      '483': 'Detroit-Warren-Dearborn, MI',

      // Seattle area
      '980': 'Seattle-Tacoma-Bellevue, WA',
      '981': 'Seattle-Tacoma-Bellevue, WA',
      '982': 'Seattle-Tacoma-Bellevue, WA',
      '983': 'Seattle-Tacoma-Bellevue, WA',
      '984': 'Seattle-Tacoma-Bellevue, WA',

      // San Antonio area
      '782': 'San Antonio-New Braunfels, TX',
      '780': 'San Antonio-New Braunfels, TX',
      '781': 'San Antonio-New Braunfels, TX',

      // Denver area
      '800': 'Denver-Aurora-Lakewood, CO',
      '801': 'Denver-Aurora-Lakewood, CO',
      '802': 'Denver-Aurora-Lakewood, CO',
      '803': 'Denver-Aurora-Lakewood, CO',
      '804': 'Denver-Aurora-Lakewood, CO',

      // San Diego area
      '919': 'San Diego-Chula Vista-Carlsbad, CA',
      '920': 'San Diego-Chula Vista-Carlsbad, CA',
      '921': 'San Diego-Chula Vista-Carlsbad, CA',

      // Minneapolis area
      '553': 'Minneapolis-St. Paul-Bloomington, MN-WI',
      '554': 'Minneapolis-St. Paul-Bloomington, MN-WI',
      '555': 'Minneapolis-St. Paul-Bloomington, MN-WI',

      // Tampa area
      '336': 'Tampa-St. Petersburg-Clearwater, FL',
      '335': 'Tampa-St. Petersburg-Clearwater, FL',
      '337': 'Tampa-St. Petersburg-Clearwater, FL',

      // Austin area
      '786': 'Austin-Round Rock-Georgetown, TX',
      '787': 'Austin-Round Rock-Georgetown, TX',

      // Portland area
      '970': 'Portland-Vancouver-Hillsboro, OR-WA',
      '971': 'Portland-Vancouver-Hillsboro, OR-WA',
      '972': 'Portland-Vancouver-Hillsboro, OR-WA',

      // San Jose area
      '950': 'San Jose-Sunnyvale-Santa Clara, CA',
      '951': 'San Jose-Sunnyvale-Santa Clara, CA',

      // Salt Lake City
      '841': 'Salt Lake City, UT',
      '840': 'Salt Lake City, UT',

      // Las Vegas
      '891': 'Las Vegas-Henderson-Paradise, NV',
      '890': 'Las Vegas-Henderson-Paradise, NV',

      // Honolulu
      '967': 'Honolulu, HI',
      '968': 'Honolulu, HI',

      // Orlando
      '328': 'Orlando-Kissimmee-Sanford, FL',
      '327': 'Orlando-Kissimmee-Sanford, FL',
      '347': 'Orlando-Kissimmee-Sanford, FL',

      // Raleigh-Durham
      '276': 'Raleigh-Cary, NC',
      '277': 'Raleigh-Cary, NC',

      // Nashville
      '370': 'Nashville-Davidson-Murfreesboro-Franklin, TN',
      '371': 'Nashville-Davidson-Murfreesboro-Franklin, TN',
      '372': 'Nashville-Davidson-Murfreesboro-Franklin, TN',

      // Charlotte
      '280': 'Charlotte-Concord-Gastonia, NC-SC',
      '281': 'Charlotte-Concord-Gastonia, NC-SC',
      '282': 'Charlotte-Concord-Gastonia, NC-SC',

      // Indianapolis
      '460': 'Indianapolis-Carmel-Anderson, IN',
      '461': 'Indianapolis-Carmel-Anderson, IN',
      '462': 'Indianapolis-Carmel-Anderson, IN',

      // Columbus OH
      '430': 'Columbus, OH',
      '431': 'Columbus, OH',
      '432': 'Columbus, OH',
      '433': 'Columbus, OH',

      // Cleveland
      '440': 'Cleveland-Elyria, OH',
      '441': 'Cleveland-Elyria, OH',
      '442': 'Cleveland-Elyria, OH',

      // Cincinnati
      '450': 'Cincinnati, OH-KY-IN',
      '451': 'Cincinnati, OH-KY-IN',
      '452': 'Cincinnati, OH-KY-IN',

      // Pittsburgh
      '150': 'Pittsburgh, PA',
      '151': 'Pittsburgh, PA',
      '152': 'Pittsburgh, PA',

      // Kansas City
      '640': 'Kansas City, MO-KS',
      '641': 'Kansas City, MO-KS',
      '660': 'Kansas City, MO-KS',
      '661': 'Kansas City, MO-KS',

      // St. Louis
      '630': 'St. Louis, MO-IL',
      '631': 'St. Louis, MO-IL',
      '633': 'St. Louis, MO-IL',

      // Baltimore
      '210': 'Baltimore-Columbia-Towson, MD',
      '211': 'Baltimore-Columbia-Towson, MD',
      '212': 'Baltimore-Columbia-Towson, MD',

      // Milwaukee
      '530': 'Milwaukee-Waukesha, WI',
      '531': 'Milwaukee-Waukesha, WI',
      '532': 'Milwaukee-Waukesha, WI',

      // Sacramento
      '956': 'Sacramento-Roseville-Folsom, CA',
      '957': 'Sacramento-Roseville-Folsom, CA',
      '958': 'Sacramento-Roseville-Folsom, CA',

      // Riverside
      '925': 'Riverside-San Bernardino-Ontario, CA',
      '923': 'Riverside-San Bernardino-Ontario, CA',
      '924': 'Riverside-San Bernardino-Ontario, CA',

      // Jacksonville
      '322': 'Jacksonville, FL',
      '320': 'Jacksonville, FL',

      // Oklahoma City
      '730': 'Oklahoma City, OK',
      '731': 'Oklahoma City, OK',
      '731': 'Oklahoma City, OK',

      // Memphis
      '380': 'Memphis, TN-MS-AR',
      '381': 'Memphis, TN-MS-AR',
      '382': 'Memphis, TN-MS-AR',

      // Louisville
      '400': 'Louisville/Jefferson County, KY-IN',
      '401': 'Louisville/Jefferson County, KY-IN',
      '402': 'Louisville/Jefferson County, KY-IN',

      // Richmond
      '230': 'Richmond, VA',
      '231': 'Richmond, VA',
      '232': 'Richmond, VA',

      // New Orleans
      '700': 'New Orleans-Metairie, LA',
      '701': 'New Orleans-Metairie, LA',

      // Hartford
      '060': 'Hartford-East Hartford-Middletown, CT',
      '061': 'Hartford-East Hartford-Middletown, CT',

      // Providence
      '028': 'Providence-Warwick, RI-MA',
      '029': 'Providence-Warwick, RI-MA',

      // Birmingham
      '350': 'Birmingham-Hoover, AL',
      '351': 'Birmingham-Hoover, AL',
      '352': 'Birmingham-Hoover, AL',

      // Buffalo
      '140': 'Buffalo-Cheektowaga, NY',
      '141': 'Buffalo-Cheektowaga, NY',
      '142': 'Buffalo-Cheektowaga, NY',

      // Tucson
      '856': 'Tucson, AZ',
      '857': 'Tucson, AZ',

      // Fresno
      '936': 'Fresno, CA',
      '937': 'Fresno, CA',

      // Albuquerque
      '871': 'Albuquerque, NM',
      '870': 'Albuquerque, NM',

      // Omaha
      '680': 'Omaha-Council Bluffs, NE-IA',
      '681': 'Omaha-Council Bluffs, NE-IA',

      // Bakersfield
      '932': 'Bakersfield, CA',
      '933': 'Bakersfield, CA',

      // Virginia Beach
      '233': 'Virginia Beach-Norfolk-Newport News, VA-NC',
      '234': 'Virginia Beach-Norfolk-Newport News, VA-NC',
      '235': 'Virginia Beach-Norfolk-Newport News, VA-NC',
      '236': 'Virginia Beach-Norfolk-Newport News, VA-NC',
    };

    const findNearestMSAWage = (zipCode) => {
      const prefix = Number.parseInt(zipCode.substring(0, 3), 10);
      if (Number.isNaN(prefix)) return null;

      let closest = null;
      for (const [prefixKey, msa] of Object.entries(ZIP_TO_MSA)) {
        const wage = MSA_WAGE_DATA[msa];
        if (!wage) continue;
        const candidatePrefix = Number.parseInt(prefixKey, 10);
        if (Number.isNaN(candidatePrefix)) continue;
        const distance = Math.abs(prefix - candidatePrefix);
        if (!closest || distance < closest.distance) {
          closest = {
            wage,
            msa,
            prefix: prefixKey,
            distance
          };
        }
      }

      return closest;
    };

    // Fetch location data from ZIP code API
    const fetchZipData = async (zipCode) => {
      try {
        const response = await fetch(`https://api.zippopotam.us/us/${zipCode}`);
        if (!response.ok) throw new Error('Invalid ZIP code');
        const data = await response.json();
        return {
          city: data.places[0]['place name'],
          state: data.places[0]['state abbreviation'],
          stateFull: data.places[0]['state'],
          latitude: parseFloat(data.places[0].latitude),
          longitude: parseFloat(data.places[0].longitude)
        };
      } catch (error) {
        return null;
      }
    };

    // Get MSA from ZIP code
    const getMSAFromZip = (zipCode) => {
      const prefix = zipCode.substring(0, 3);
      return ZIP_TO_MSA[prefix] || 'default';
    };

    // Calculate local cost data based on ZIP
    const calculateLocalData = (zipCode, locationInfo) => {
      const msa = getMSAFromZip(zipCode);
      const stateCode = locationInfo?.state;
      const msaWage = MSA_WAGE_DATA[msa] || null;
      const nearestMSA = msaWage ? null : findNearestMSAWage(zipCode);
      const stateWage = stateCode ? STATE_WAGE_DATA[stateCode] : null;
      const resolvedWage = msaWage || nearestMSA?.wage || stateWage || MSA_WAGE_DATA.default;
      const wageSource = msaWage
        ? 'MSA-level data'
        : nearestMSA
          ? `Nearest MSA (${nearestMSA.msa}) via ZIP prefix ${nearestMSA.prefix}`
          : stateWage
            ? `State-level data (${stateCode})`
            : 'National averages';
      const rent = MSA_RENT_DATA[msa] || MSA_RENT_DATA.default;
      const costs = REGIONAL_COSTS[msa] || REGIONAL_COSTS.default;

      const areaName = locationInfo
        ? `${locationInfo.city}, ${locationInfo.state}`
        : (msa !== 'default' ? msa.split(',')[0] : 'National Average');

      // Calculate tax data for this area
      const taxData = calculateTaxData(resolvedWage, nearestMSA?.msa || msa, stateWage ? stateCode : null);

      return {
        medianWage: resolvedWage,
        netWage: taxData.netHourlyWage,
        taxData: taxData,
        rent: rent,
        food: Math.round(NATIONAL_BASELINES.food * costs.food),
        healthcare: Math.round(NATIONAL_BASELINES.healthcare * costs.healthcare),
        transport: Math.round(NATIONAL_BASELINES.transport * costs.transport),
        utilities: Math.round(NATIONAL_BASELINES.utilities * costs.utilities),
        area: areaName,
        msa: msa !== 'default' ? msa : null,
        dataQuality: wageSource
      };
    };

    const MOCK_BUILDINGS = {
      '10001': [
        { id: 'b1', address: '123 Main St, Apt 1-24', units: 24, members: 8, landlord: 'Greystone Properties', issues: ['Heat', 'Repairs'] },
        { id: 'b2', address: '456 Oak Ave, Units A-L', units: 12, members: 3, landlord: 'Metro Housing LLC', issues: ['Fees'] },
        { id: 'b3', address: '789 Park Blvd', units: 48, members: 15, landlord: 'Urban Living Corp', issues: ['Security', 'Pests'] },
      ],
      '60601': [
        { id: 'b4', address: '100 Lake Shore Dr', units: 200, members: 42, landlord: 'Lakeside Management', issues: ['Rent increases'] },
        { id: 'b5', address: '250 State St', units: 36, members: 11, landlord: 'Downtown Rentals Inc', issues: ['Maintenance'] },
      ],
      '90210': [
        { id: 'b6', address: '9000 Wilshire Blvd', units: 80, members: 22, landlord: 'Luxury Living LA', issues: ['Parking', 'Amenities'] },
      ],
      'default': [
        { id: 'b7', address: '500 Example St', units: 20, members: 5, landlord: 'Sample Properties', issues: ['General'] },
      ]
    };

    const MOCK_WORKER_COLLECTIVES = [
      { id: 'w1', industry: 'Retail', company: 'MegaMart', members: 127, issues: ['Scheduling', 'Understaffing'], active: true, messages: [] },
      { id: 'w2', industry: 'Food Service', company: 'QuickBite Chain', members: 89, issues: ['Wage theft', 'No breaks'], active: true, messages: [] },
      { id: 'w3', industry: 'Warehouse', company: 'FastShip Logistics', members: 234, issues: ['Safety', 'Quotas'], active: true, messages: [] },
      { id: 'w4', industry: 'Healthcare', company: 'CareFirst Hospital', members: 156, issues: ['Understaffing', 'Mandatory OT'], active: true, messages: [] },
      { id: 'w5', industry: 'Tech', company: 'Anonymous Startup', members: 45, issues: ['Layoffs', 'RTO mandate'], active: false, messages: [] },
      { id: 'w6', industry: 'Education', company: 'City School District', members: 312, issues: ['Class sizes', 'Resources'], active: true, messages: [] },
    ];

    const MOCK_CONSUMER_GROUPS = [
      { id: 'c1', name: 'Internet Access Collective', members: 342, target: 'ISP bulk negotiation', savings: '$15/mo avg', description: 'Negotiating group rates with local ISPs' },
      { id: 'c2', name: 'Grocery Bulk Buy', members: 89, target: 'Wholesale access', savings: '$80/mo avg', description: 'Weekly bulk orders from wholesalers' },
      { id: 'c3', name: 'Utility Bill Co-op', members: 156, target: 'Solar installation', savings: '$45/mo avg', description: 'Community solar purchasing program' },
      { id: 'c4', name: 'Prescription Pool', members: 203, target: 'Medication costs', savings: '$120/mo avg', description: 'Group purchasing for common medications' },
    ];

    const MOCK_PETITIONS = [
      { id: 'p1', title: 'Stop Rent Increase at 123 Main St', area: '10001', signatures: 18, goal: 24, status: 'active', created: '2 days ago', description: 'Landlord proposing 15% increase despite no improvements.' },
      { id: 'p2', title: 'Demand Fair Scheduling at MegaMart', area: '60601', signatures: 89, goal: 100, status: 'active', created: '1 week ago', description: 'End on-call scheduling and provide 2-week advance notice.' },
      { id: 'p3', title: 'Fix Dangerous Intersection on Oak Ave', area: '10001', signatures: 156, goal: 150, status: 'won', created: '3 weeks ago', description: 'Traffic light installed after petition delivered to city council.' },
      { id: 'p4', title: 'Oppose Utility Rate Hike', area: '30301', signatures: 423, goal: 500, status: 'active', created: '4 days ago', description: 'Power company requesting 22% rate increase.' },
      { id: 'p5', title: 'Keep Community Health Clinic Open', area: '48127', signatures: 267, goal: 300, status: 'active', created: '5 days ago', description: 'Only clinic serving uninsured residents in the area.' },
    ];

    const MOCK_REPORTS = [
      { id: 'r1', type: 'landlord', name: 'Greystone Properties', address: '123 Main St', issues: ['No repairs', 'Harassment'], reports: 12, lastReport: '2h ago', details: [] },
      { id: 'r2', type: 'employer', name: 'QuickBite Chain', address: null, issues: ['Wage theft', 'No breaks'], reports: 34, lastReport: '5h ago', details: [] },
      { id: 'r3', type: 'landlord', name: 'Metro Housing LLC', address: '456 Oak Ave', issues: ['Safety hazard', 'Illegal fees'], reports: 7, lastReport: '1d ago', details: [] },
      { id: 'r4', type: 'employer', name: 'FastShip Logistics', address: null, issues: ['Unsafe conditions', 'Retaliation'], reports: 56, lastReport: '3h ago', details: [] },
      { id: 'r5', type: 'landlord', name: 'Urban Living Corp', address: '789 Park Blvd', issues: ['Pest infestation', 'No heat'], reports: 23, lastReport: '8h ago', details: [] },
    ];

    const MOCK_PRICE_RESISTANCE = [
      { id: 'pr1', item: 'Gallon of Gas', current: 3.45, resistance: 4.50, votes: 1247, atResistance: 72 },
      { id: 'pr2', item: 'Dozen Eggs', current: 4.20, resistance: 5.00, votes: 892, atResistance: 85 },
      { id: 'pr3', item: 'Gallon of Milk', current: 3.80, resistance: 5.00, votes: 756, atResistance: 68 },
      { id: 'pr4', item: 'Loaf of Bread', current: 3.50, resistance: 4.50, votes: 634, atResistance: 55 },
      { id: 'pr5', item: 'Internet (Basic)', current: 65, resistance: 80, votes: 1089, atResistance: 45 },
      { id: 'pr6', item: 'Electricity (avg/mo)', current: 150, resistance: 200, votes: 923, atResistance: 38 },
      { id: 'pr7', item: 'Ground Beef (1 lb)', current: 5.50, resistance: 7.00, votes: 445, atResistance: 62 },
      { id: 'pr8', item: 'Streaming Service', current: 15.99, resistance: 20.00, votes: 1567, atResistance: 78 },
    ];

    // ============================================
    // US STATES SVG PATH DATA
    // ============================================
    const US_STATES_SVG = {
      AL: { name: 'Alabama', path: 'M628.5,466.4l-2.2-17.5l-3.3-21.1l-1.5-16.3l25-3.1l23.2-2.6l13.5-1.3l3.4,11.9l3.4,18.6l2.5,17.1l2.2,21l0.7,12l-3.7,5.3l-0.8,4.3l3.6,6.5l0.5,3.7l-5.1,9.2l-0.5,4l2.8,2.3l-0.5,5.9l-12.7,1.7l-22.9,2.7l-10.1,1l-0.2-5.3l1.9-7.7l-1.7-7.2l-1.6-3.5l2.4-6l-0.9-12.2l-4.5-10.7l-0.7-8.7l-3-3.7l0.2-0.9l2.5-1.4L628.5,466.4z' },
      AK: { name: 'Alaska', path: 'M158.7,573.5l-0.3-0.2l-0.4,0.5l-0.2,0l-0.3-0.2l-0.5,0.2l-0.2-0.3l0.5-0.6l0.4-0.3l0.5,0.2l0.3,0.3l0.2,0.1L158.7,573.5zM130.9,571.7l0.5,0.2l0.5-0.1l0.1-0.3l-0.8-0.1L130.9,571.7zM68.3,546.7l-44.6,23.8l3.2,2.8l7.3-0.9l3.8,2.8l5.1,1.9l6.3-0.6l5.7,3.1l5.4-5.6l5.7-1.3l8.3,0.6l-6,5l-10,6.3l-2.2,3.1l-6.9,1.6l-0.6,4.7l-3.8,1.9l-1.9,3.8l4.1,3.1l-7.5,8.2l-3.8,8.2l1.9,3.5l6.6-0.9l1.6,3.5l6-0.6l4.7-4.1l5.7-1.9l3.5,0.6l1.9,1.6l5.7-3.1l3.5,1.3l3.8-2.5l3.5-0.3l0.9-2.5l-1.3-3.8l3.2-1.9l5.4,2.5l0.3,4.4l3.2-0.9l4.7-4.4l0-3.8l7.2-5.4l1.9,1.9l0.6,4.7l6.3,0.6l3.5,4.4l4.7,1.6l5-3.5l-2.2-3.1l2.2-1.6l7.9,3.5l1.6,3.2l6,0.9l5,1.6l4.7-1.3l4.1,1.9l2.5-0.9l3.2-0.3l1.3-3.2l-3.2-4.1l-4.4-1.9l-7.2,1.3l-8.5-1.6l-0.9-2.2l2.8-1.9l-5.3-3.5l-8.2,1.6l-6.3-1.6l-3.8-4.4l-4.4-1.9l-4.4,1.3l-3.2-3.2l3.5-5l-2.2-3.2l-6.9,0.3l0.3-2.5l3.2-3.2l0.6,1.6l5.4,0.6l1.3-2.5l-6.6-6.6l-6.6-0.3l-0.9,1.6l-2.8,0.9l-4.7,1.9l-5.7-1.3l-2.5,0.3l-1.3-4.4l-5.4,0.6l-1.9,1.9l-4.4-1.6l6-4.4l-0.3-1.9l-5.3,0.9l-3.2-0.6l-1.3-4.4l-2.5-1.6l-4.7,2.2l-4.7,6L68.3,546.7zM173,567.7l2.1,2.1l0.3,0.9l-1.7,1.2l-2.3-0.3l-1.2-1.5l0.2-1.4L173,567.7zM179.3,569.7l1.2,1.7l0.2,0.6l-2.6-0.1l-0.5-1.7l0.5-0.7L179.3,569.7zM185.4,573.6l-0.5,1.1l-2.3-1.4l0.2-0.6l1.2-0.3L185.4,573.6zM188.5,575.9l-0.5,0.5l-1.7-0.5l0.3-1.2l1.4-0.2L188.5,575.9zM55.5,536.6l2.3,4l3.4,0.9l2.3,5.8l4.6,4l0.3,1.2l-4,0.6l-0.3,1.2l-2.6,0.3l-2-2.3l-0.6-3.2l-4-3.8l-0.6-4.6l-3.2-3.5l0.6-1.4L55.5,536.6z' },
      AZ: { name: 'Arizona', path: 'M213.9,476.3l-1.1-1.6l-1.8-0.5l-0.5-2.3l-2.1-1.3l-18,10.2l-24.7,14l-15.4,8.3l-14.1,7.7l5.2,10.1l10.3,19.5l13.2,24.6l10.6,19.6l8.9,16l11.1,0.3l24.2-1.9l24-2.5l24.3-2.9l3-37.9l3.5-51l-18.6-2.1l-38-5.7l-4,27.2l-0.7,1.6l-2.5,0.3l-1.1-0.3l-1.5-3.6l-11.2-8.7l-2.5-3.4l0.3-2.7l2.5-4.5l0.7-5.9l-1.6-3.2l-3.4-1.1l-0.7-6.3l1.8-5.6l3.4-1.4l1.4-0.7l0.5-2.5l-0.2-2L213.9,476.3z' },
      AR: { name: 'Arkansas', path: 'M609.2,414.7l-5-0.2l-47.9,3l-27.5,1.5l-0.9,9.2l2.9,6.3l4.6-0.2l1.6,2.5l-2.7,10.5l2.3,6.3l-0.5,8.1l2.5,8.9l-1.1,4.7l2.1,7.2l1.4,5.9l47.3-2l23.9-1.9l2.5-2.7l-0.7-4.3l3.2-4.5l-1.6-4l2.5-6.1l-2.5-2.9l3.6-1.4l-0.4-4.3l-3.4-5.4l0.4-3.4l-3.4-0.2l-0.9-4.1l2.1-5.9l-0.5-6.1l4.3-8.6L609.2,414.7z' },
      CA: { name: 'California', path: 'M137.7,416.9l0.3-1.2l-0.5-2.5l2.8-4.4l0.2-4.5l2-3.2l-0.5-2l-2.3-2.3l0.5-1.8l1.8-2.3l-0.5-4.2l-2.3-3.7l-1.3-4.5l-0.7-3.5l2.3-4l-0.3-4.3l-3.2-4.7l-2.2-4.5l-3-3.2l-2.8-5.2l-3.2-3.3l-3-0.8l-0.8-1l-0.5-2.5l-2.2-2.2l-0.8-3.8l1-5.3l-1.2-1.8l-1.8-7.3l-0.2-4.2l-4.2-6l-0.3-2l2.8-5l-0.2-3.3l-2-1.7l0.8-1.8l-0.5-3.3l0.7-4l-3.3-3.7l0.5-4.2l2.2-6l-0.5-3l2.8-5.2l2.3-4.5l3.8-3.5l0.5-1.2l-0.8-2.3l1-5.3l1.7-6.3l-0.3-2.5l3.3-5.2l0.4-5.7l-1.9-0.6l-9.9-2.3l-17.6-4.9l-20.8-6l-13.7-4l0.5,2.4l-1.7,3.5l-0.3,2.3l3.3,4l0.2,3l0.7,1.8l-1.3,6.2l1.5,4l1.2,3.5l2.5,3.8l1.8,3.8l1.5,3.3l2.5,2.7l0.5,3l1.3,2.8l2.3,2l2.5,7.5l0.5,5.2l1.2,3.8l2.2,3.8l-0.2,5.2l-0.2,3l1.5,2.7l1.7,3.3l0.5,2.7l-0.5,3.7l1.2,2.5l3.8,3.2l0.5,2.5l-1.3,3.5l-0.5,2.5l0.8,2l4.2,4.3l0.7,2.5l-0.3,3.3l0.5,2.7l2.7,4l1.7,5l0.8,2.2l-0.3,6.2l1.7,5.7l1,5l0.7,6.2l0.2,5.8l0.3,3.2l2.5,3.3l1.3,3.5l1.5,3.7l1.5,1.2l1.8-1.2l1.2,1l-0.5,3l2.7,1.5l1.5,1l1.5-0.3l1.8,0.8l1.3,2l0.8,2.7l3.3,3l3.3,0.7l2.3,1.2l3,0l3,3.2l0.5,0.7l2.3-0.5L137.7,416.9zM84,386.7l1.7,2.1l0.2,1.2l-2.9,0.3l-0.6-2.4L84,386.7zM88.9,385.7l0.9,2.6l0.3,1.5l-1.5,0.6l-0.9-2.9l0.5-2L88.9,385.7zM85.7,387.2l0.5,0.9l-0.2,1.1l-1.7,0.3l0.2-1.7L85.7,387.2zM79.1,373.7l1.4,2.1l0.6,0.9l1.2,0.8l-0.3,1.2l-2,0.2l-1.4-1.4l-0.9-2.4L79.1,373.7z' },
      CO: { name: 'Colorado', path: 'M379.8,324l-47-5.9l-47.3-7.4l-30.3-5.4l-13.7-2.5l-6,42.7l-5.3,38.5l-2.9,20.1l16,2.3l46.7,6.7l45.7,5.3l47.7,4.3L379.8,324z' },
      CT: { name: 'Connecticut', path: 'M852.8,252.7l-1.9-7.4l-1.4-5.2l-0.5-4.3l-6.5,1.5l-26.3,6l1.6,6.8l1.9,10l0.5,6.5l4.5,3.4l6.5-3.9l5.1-5.1l5.6-1.9l6.6-3.2L852.8,252.7z' },
      DE: { name: 'Delaware', path: 'M818.1,308.5l-1.2-3.8l-1.8-6.7l-2.1-5.3l2.4-1.6l2.4-5l4.1-3.8l3.7-1l1.1,3.3l-2.9,3.6l-2.1,3.7l-0.3,2.3l2.3,5.5l2.9,6.9l2.6,7.7l-7.7,1.9L818.1,308.5z' },
      FL: { name: 'Florida', path: 'M760,556.2l2.9-0.6l2.4-2.4l2.6-2.1l2.4,0.6l2.4-2.1l-0.6-4.2l-2.7-2.1l-3-2.1l-2.1-3.5l-2.4-5.6l-2.7-3.5l-0.3-4.4l-3.5-0.6l-4.2-4.4l-3.5-5.6l-4.4-5.9l-1.5-4.7l-3.8-4.4l-1.2-4.2l-4.1-4.7l-0.6-3l3.5-0.6l-0.3-10.4l-2.9-3.5l-2.5-0.2l-0.7-2.3l-6.7-0.4l-4-1.6l-11.2,0.7l-25.9,2.4l-23.6,1.7l0.5,4.7l5.9,0.9l9.7,5.4l6.1,2.5l4.3,5.8l5.4,2.5l2.3,3.4l6.3,0.9l0.4,2.3l-3.4,1.1l1.8,3l6.6,2.8l4.3,4.3l2.4,5.5l5.5,3.9l0.7,5l2.2,7.1l3.2,4.8l2.7,5l1.1,5.5l2.7,2.5l-0.4,4.7l2.4,6.6l2.5,4.4l3.9,6l3.4,1.6l4.5,4.5l4.1,0.9l1.8,2.7l3.9-0.9l-0.7-2.7l5.7,1.6l5.5,4.5l4.3,3.9l3,5.5l3,4.1l0.5,3.4l2.7,5.7l-0.4,4.1l3.6,5l5,2.7l4.5-0.5l5.4-0.2l0.2-2l-3.4-2l-0.2-3.7l1.6-0.7l-0.2-3.9l-4.5-3.4l-3-4.3l-4.3-4.5l-2.3-4.5l-2-5.2l-4.5-5.5l-0.9-3.2l-2.7-4.3l-0.7-3.6L760,556.2z' },
      GA: { name: 'Georgia', path: 'M740.7,486.5l-3.5-0.1l-6.6-0.5l-4-1.6l-10.8,0.6l-24.7,2.2l-10.2,0.9l0.2,4.8l1.5,7.4l2.4,6.2l1.7,7.4l3.4,7.4l2.3,3.5l2.5,6l3.5,5.9l4.7,4.5l0.9,3.2l3.9,4.3l4.4,2l-0.2,3.6l4.1,7l3.9,2.7l1.6,3.6l2.3,3.9l-0.2,3.6l0.7,2.5l3.9,3.9l0.2,1.8l11.2-0.7l25.9-2.4l23.6-1.7l-0.5-4.7l-5.9-0.9l-9.7-5.4l-6.1-2.5l-4.3-5.8l-5.4-2.5l-2.3-3.4l-6.3-0.9l-0.4-2.3l3.4-1.1l-1.8-3l-6.6-2.8l-4.3-4.3l-2.4-5.5l-5.5-3.9l-0.7-5l-2.2-7.1l-3.2-4.8l-2.7-5l-1.1-5.5l-2.7-2.5l0.4-4.7l-2.4-6.6L740.7,486.5z' },
      HI: { name: 'Hawaii', path: 'M233.1,580.8l1.5,3.5l1.9,0.6l0.8-1l0.6-3.1l-2.7-1.7L233.1,580.8zM240.7,585.3l3.7,4.4l1.3-0.4l1.1-1.5l-0.4-2.3l-3.3-1.3L240.7,585.3zM252.2,590.4l-0.4,1.3l2.3,2.5l1.5,0l0.8,1.7l3.1,0.2l0-1.9l-2.1-2.3l-2.5-2.1L252.2,590.4zM263.3,597.4l1.5,3.5l2.7,0.6l4.8,2.1l3.5-0.4l-0.2-1.5l-4.4-2.5l-5-2.3L263.3,597.4zM280.5,603.6l-1.5,1.3l1,1.9l5.2,0.8l4-1.3l4,1l2.9-0.6l-1.3-1.9l-4.6,0.6l-3.5-1.3L280.5,603.6zM294.7,613.2l0.6,1.9l1.5,0.2l1.9-2.7l-0.2-1.3l-2.5,0.2L294.7,613.2zM300.5,612l1.9,3.5l2.3,0.2l0.4-0.8l-1.3-3.1l-2.5-0.6L300.5,612z' },
      ID: { name: 'Idaho', path: 'M221.7,237.2l-5.3-1l-3.9,4l-2.9,4.4l-1.2,0.8l-4.9-2.7l-2.2-0.2l-3.4,1.9l-3.9-1.4l-1.5-4.2l-3.7-2.3l-0.2-2.2l2-3.7l-0.3-1.8l-2.7-2.3l-0.9-2l3.5-8.8l-2.9-1.1l0.3-4.4l3.1-3.5l1.7-0.5l0.5-2.5l-1.5-3.2l-3.3-2.5l1-7l-1.2-3.8l2-1.5l-0.7-3.8l1.2-2.5l4.4-1.7l0.3-5l-2.7-3.8l-3.1-1.5l-1.1-0.8l1.7-8.6l-0.8-5.5l0.8-4.3l-0.3-3l-5.5-7l0.3-5.7l3.8-4.9l-0.5-3.8l0.1-2.8l0.7-0.9l-6.4-54.7l-36.3,4.9l6.2,45l6.9,47.6l5.5,38.2l5.9,36.7l16.1-2.7l0-8.7l3.6-11.1l5.8-0.7l3.6-2.9l1.4-0.2l3.8,3.1l2.3-0.9l7.4,2.2l4.3-4.5L221.7,237.2z' },
      IL: { name: 'Illinois', path: 'M612.7,327l-4.7-0.5l-3.3-3.4l-2.1-3.7l0.3-3.8l1.3-3.9l-1.5-1.7l-3.5-1.7l-2.1-5.6l1.3-5.5l2.5-3.4l0.2-3.7l-1.9-2.7l-1.1-4l0.8-6.9l2.3-6.5l3-5.7l-0.5-1.9l-3.1-2.2l-0.5-4.4l-10.2-1.5l-16,0.5l-6.7-0.2l0.7,3l2.9,2.7l0.1,7.1l-3.2,5.2l-0.3,3.6l3.5,4.6l0.5,6.9l-1.2,13.8l3.6,5.7l6.5,5.2l0.4,4.7l-2.3,8.7l-4.3,5.2l-3.2,3.6l0.4,4.1l4.3,7.1l5.7,3.2l5.3,0.7l4,8l-2.7,7.1l0.4,2.3l2.5,2.3l9.8-0.5l1.4,3.2l-1.8,3.6l0.2,2.5l3.2,2.5l3.6-1.4l3.4-5.5l5.2-1.6l3.6-0.7l-1.3-4.9l2.1-0.9l0.7-9.6l-1.8-5.7l-0.5-8.5l1.6-5.5L612.7,327z' },
      IN: { name: 'Indiana', path: 'M666.7,326.6l-1.7-19.9l-2.2-25.5l-2.7-17.8l-20,2l-21.9,1.9l0.5,4.4l3.1,2.2l0.5,1.9l-3,5.7l-2.3,6.5l-0.8,6.9l1.1,4l1.9,2.7l-0.2,3.7l-2.5,3.4l-1.3,5.5l2.1,5.6l3.5,1.7l1.5,1.7l-1.3,3.9l-0.3,3.8l2.1,3.7l3.3,3.4l4.7,0.5l0.3,11l-1.6,5.5l0.5,8.5l1.8,5.7l-0.7,9.6l-2.1,0.9l1.3,4.9l5.8-0.7l8-3.7l1.8-2.5l5.3-2.1l4.3-4.7l1.4-5.4l4.1-2.5l2-7l2.5-3.2l0.1-3.1l-1.9-1.9l0.5-8.2l2.4-4L666.7,326.6z' },
      IA: { name: 'Iowa', path: 'M567,284.9l0.2-4.5l2.7-4.2l-0.3-3.3l-2.7-2.2l-1.3-4.2l-2.2-4l0.5-3.3l-3.7-5.5l-3.7-2l-0.7-4.2l-62.2,2.4l-30.7,0.8l0.3,4.7l2.5,4.3l5.6,3.4l3.5,1.3l1,4.9l-4.7,5.1l-0.8,4.6l-2.2,2.6l-0.3,4.5l-1.2,3l2.3,5.1l3.6,2.3l2.3,4.1l-1,2l3.4,4.1l1,3.2l4.8-0.3l7-2l6-0.2l4.3,1.8l4.1-1.6l3.2-3.9l4.7-1.6l1.4-3.7l6.4-1l1.9-1.4l7-0.2l2.5,2.7l2.1-0.7l3.6-4.5l4.5-1.6l1.6,1.1l3.9-2.1l0.4-5.5l3-1.8l-0.2-3.4L567,284.9z' },
      KS: { name: 'Kansas', path: 'M523.2,370.6l-8.6,0.4l-43.5,1.1l-43.6,0.2l-43.9-1.3l-3.4,38l4.9,0.4l42,2.1l42.9,1.2l50.7,0.3l-0.2-8.3l0.9-9.2l5-0.2l-4.6,0.2l0.3-9.5l0.3-13.9L523.2,370.6z' },
      KY: { name: 'Kentucky', path: 'M726.2,375.4l-2.6-0.3l-5.1,4.4l-5.9,1.1l-5.9-0.6l-10.9,3.2l-4.7,1.3l-5.2-0.3l-1.9-3.1l-6.6,3.6l-4.7,5.2l-9.3,1.1l-1.5,5l2.6,2.6l-5.6,5.6l-5.4-2.5l-2.4,1.3l-0.6,4.7l-7.6,4.5l-2.5-1.8l-2.5,1.8l-3.6-1.3l-5.1,1.3l-4-2.2l-9-0.2l-7.2-3.1l-4.7-0.4l-3.6,1.5l-6.5,5.6l0.1,0l-0.9,9.2l8.6-0.4l0.2,1.2l6.3,4.3l6.1-1.3l4.3,1.1l1.1,2.3l6.6-4.1l6.5-1.8l3.6,0.2l3.1,3.5l5.6,0.7l4.9-2.9l4.3,0.9l2.9,2l6-5.4l5.6,2l3.6-3.6l4.7-0.5l4.9-2.5l4.3,0.9l4.9,3.8l5.8-7l2.9-1.1l0-3.6l2.5-2.4l1.5,0.6l5.4-3.6l3.4,0.6l1.9-3.8l5.4,0.4l0.9-4l5-1.5l4.5-2.4l2.4,2.5l3.6-1.9l1.3-5.4l4.3-3.7l3.3-5.5l2.7-3.3l-4.7-0.1l0.9-5.4L726.2,375.4z' },
      LA: { name: 'Louisiana', path: 'M615.6,530.5l-0.3-6.6l-2.1-5.4l1.8-3.9l-2.2-4.9l-0.2-10.5l-2.3-5.4l3.2-1.4l1.1-7.1l3.6-6.1l-3-2.5l4.3-2.8l1.1-1.4l0.5-4.5l-48.7,1.3l-44.7,0.8l0.8,6.5l2.3,10.1l4.3,7.4l5.6,8.5l1.5,5.2l-4.5,6.7l0.5,6.4l-1.9,1l-0.5,3l3.7,4l-2.7,4.9l-3.4,2.5l0.7,2.8l4.5,0l6.4-3.5l15.2-0.9l7.6,2.5l7.4,0.4l3.2,2.1l5.4,0.5l4-2.3l3.6,2.1l-0.9,5.9l-2.3,2.3l1.1,1.8l-1.8,3l5.4,1.6l2.9,2.7l5.8-1.1l1.4,2.7l-1.6,3l1.4,1.1l6.4-0.2l1.1-2.3l-3.2-1.1l0.7-2.5l-4.1-1.3l-0.7-4.1l3.6-0.5l3.2,2.5l1.6-2.5l3.9,0.4l1.4,3.2l3.5,0l-0.4-3.2l3.7-0.9l7-0.3l2,2l3.7-0.7l1.8-2.3l3.9,2.5l3.5-2.1l2.1,0.2l1.4,3l2.3,1.8l4.8-2l2.1-4.6l-0.2-4.3l-4.1-1.1L615.6,530.5z' },
      ME: { name: 'Maine', path: 'M901.8,151.3l1.4-2.3l1.7-4.2l3.2-5.3l3.9,3.3l1.3,5.1l-0.6,3.8l-3.1,5.2l-2,0.8l-2.6-3.9L901.8,151.3zM880.6,115l2.9-3.9l2.4-1.9l2.1,2.4l0.2,3.1l-3.4,6.1l-4.1,5.2l-2.6-1.4l-0.6-5L880.6,115zM882.8,168.7l-1.1-6.1l-3.2-5.3l-0.3-4.7l-3.9-7.9l-3.3-9.8l0.7-7.8l-2.1-4.9l0.8-7.2l-1.8-9.9l-2.5-8.9l-1.2-5.2l-3.3,0.3l-1.3,2.9l-2,0.7l-0.7,1.9l-0.5,0l-0.6-1.6l1.7-3.7l-0.7-4.4l3.7-6.9l3.7-7.6l2.7-3.7l0.3-5.7l-2.4,0.5l-2-3.9l1.1-2.2l-0.5-2.2l-0.6-0.5l-1.7-0.2l-1.1,2.8l-1.3-0.5l-1.1-3.3l-2.9-5.2l-2.2,1.2l-0.5,2.5l-0.7,0.5l-1.5-1.7l0.6-2.6l0.5-0.9l0.8-1.9l-1.9-2l-2.9,0.3l-0.4,1.9l0.7,2.6l0.2,2.6l-0.7-0.2l-2.4-3.7l-0.2-2.4l0.2-1.3l-1.2-0.2l-0.8-1.8l-3.2-1.6l-1.3-0.7l-1.3,0.3l0.5,4.2l0.2,2.2l-0.8-0.2l-1.8-4.2l-1.9-2.2l-1.1,0.3l0.3,1.9l-1,0.8l-1.5,3.7l-0.3,1.7l-0.9-0.2l-0.5-1.1l1.4-5l0.2-2.2l-0.5-1l-0.8,0.3l-0.5,0.5l-1.4,3.3l-0.2,2.5l1.4,3.5l0.3,1.3l-0.9-0.3l-2.6-3.5l0.3-3.3l0.5-1.4l0.3-1.1l-2.1-0.4l-4.4,3.1l-3.6,2.9l-0.3,2.2l-2.2,3.7l-2,3l-1,3.9l0.7,5.9l-0.2,1.5l-2.5,1l-0.3,2.2l0.2,2l-2.2,2.9l-0.2,5.8l-5.7,1.3l-3.6,0.7l-1.7-1.3l-1.5,0l-1.5,2.4l-2.4,0.2l-0.5,6.3l3.1,3.1l-0.2,2.2l-1.3,3.2l-1,3.5l2.2,5.7l0.7,3.5l0,3.5l-0.7,3.5l2.9,3.7l3.9,5.8l3.2,4.1l3.4,1.4l1.3,2.9l3.5,1l10.7-4l5.6-1.4l3.9-0.7l1.7,1.2l7.7,25.7l4.5,14.2l1.8,0.3l1.1-1.1l1.9,1.5l0.5,3.3l-0.5,1.1l0.3,0.7l1.4-0.5l1.5-2l1.3,1.3l1.1,0.1L882.8,168.7z' },
      MD: { name: 'Maryland', path: 'M826.7,316l-2.9-7.2l-2.7-6.5l-2.3-5.5l0.3-2.3l2.1-3.7l2.9-3.6l-5.7-1.7l-7.7-1.9l-9.7-2.4l-24.9-5.3l-27.8-6.4l-2.5,9.9l-0.9-0.4l-0.4,4.9l-8.3,0.3l-5.9,4.3l-2,0.5l-1.5-0.3l-3,5.6l-1.9,1l-2.9-2.2l-1.4,0.3l-4.2,5.2l7.9,3.2l7.6,3.6l7.8-0.7l6.5,1.6l7.1-0.2l3.9-3.1l2.7-4.8l4.5-1.2l5.9,0.3l2.4,0.5l-0.1-4.1l1.9-4.1l2.7,6.1l-3.6,3.5l-1.3,2.9l1.7,4.6l1.9,3.6l-0.8,5l4.1-0.7l0.2-3.3l1.7-0.7l1.5,2.4l-2.9,3.3l-0.2,2.6l1.3,2l2.3-0.7l2.1-4.3l-0.8-3.6l0.2-3.6l3.5-0.5l3.2,0.3l4.6,3.3l3.6,2.6l0.8-0.3l-0.7-2.6l-5.4-2.6l-2.9-5.6l1.9-0.8l0.2-3.9l1.9,2.4l1.6,5.2l3.1,2.6l2.4,2.9l2.9-0.8l3.7,4.8l3.1,0.7l1.5-0.2l1.7,1.8l3,1.4l0.7-2.8l-1.3-1l-2.3-1.7l0.7-1.5l-3.9-1.7l-2.4-2.6l-3.5-2.1l-0.5-3.1l5.1-0.5l-0.2-2.6l-1.3-1.3l-0.3-3.1l0.6-2.3l1.7,0.7l1.1,2.9l0.8,2l2.1,0.7l1.1-0.7l3.1,0.5l2.9,2.4l1.3,2.9l3.6,3.6l1.3-0.3l-0.5-4.1l1.9-2.4l1.5-1.5l-1.5-1.8l-1.3-1.4l1.5-2.2L826.7,316z' },
      MA: { name: 'Massachusetts', path: 'M885,234.7l0.3-2.5l-1.7-0.3l-3.6-3.3l-1.3,1.3l-3.1-0.2l-0.8-2.9l-3.9,0.7l-1.4,1.9l-0.9-0.5l0.6-2.5l-2.5-1.2l-2.9,0.1l-4-2.9l-4.7-0.5l-5.5,0.4l-0.5,0.5l-0.2,2.2l-1.4,0.8l-5.7,0.9l-3.9-0.2l-6.7,3.9l-2.7,0.7l-4,3.8l0.2,2l7.9,2.3l4.7,0.7l7.9-0.2l1.4,3.2l4.2-0.5l0.7-2.4l2.9-0.2l0.5-1.5l2.5,0.2l5.3,3.4l3.9,0.2l7.4-3.4l2.5,3.9l2.6-0.6l1.4-2.5l2.4,1.5l1.3,2.9l1.3-0.2l0.8-2.9l-1.4-1.8l0.5-1.5L885,234.7zM878.8,244.8l-3.7,0.2l-0.8-0.5l-1,1l0.8,1.2l2.9,0.6l1.9-0.6L878.8,244.8zM867,248.2l-1.5,0l-1.9,1.5l1,1.3l2.2-0.6l0.8-1.3L867,248.2z' },
      MI: { name: 'Michigan', path: 'M573.9,149.5l3.8-5.7l4.1-3.9l4.6-1.9l4.9-1.4l1.2,0.7l-4.7,4.5l-4.4,5.4l-2.5,2.5l-4.6,1.2L573.9,149.5zM614.7,223.2l-0.3-9.1l-1.9-3.8l-3.4-2.8l-1.8-4.7l0.7-5.3l1.8-4.2l-0.3-4.1l-1.4-1.8l-0.9,1.4l-1.5,4.2l-2.9,3.9l-0.5,5.1l0.8,3l-0.8,2.6l-3.7,3.7l-0.5-0.6l0.3-3.3l1.1-2.9l-0.8-2.5l-1.5,1.5l-1.5,2.6l-2.2-0.3l-1.5-0.3l0.5-3l1.6-2l0.3-4.2l0.6-1.5l-0.6-1.5l-1.4,1l-2.3,3.4l-2.1,5.9l-0.5,3.5l-0.7,0.8l-0.8-1.5l-0.3-4l-2.1,3.1l-1.5,3.8l-0.2,6.7l-3.9,0.8l-3.3-0.8l-2,1.5l-1.1-0.3l-4.1-3.4l-3-0.5l-8.2-2.9l-5.5-1.1l-1.8,0.7l-2.3,2.2l-1.7-0.2l-0.3-1.2l1.3-1.6l0.2-1.6l-1.2-0.8l-3.1,2.3l-4.9,0.8l-2.9,1.7l-4.7,3.9l-2.2,0.7l-7.3,0.5l-2.7-1l-1.9,2.3l0.1,2.6l0.7,1.5l-0.1,1.4l4.9,1l1.9,2.3l5.9,4.9l2.8,0.3l2.7-2.1l2.2,0.3l1.1,1.7l-0.2,1.7l0.5,1l3.7,0.3l1.6,1.9l0.3,2.9l-0.7,5.1l-1.1,1.5l-0.7,0.8l1,3.2l4.9,0.3l1.6-0.8l1.3-2.7l1.3,0.2l2.9,0.7l5.7,0.5l3.9,1.7l1.6,2.7l1.5,0.7l2.2,0.2l1,1l0.3,1.2l-0.8,3l1.1,4.2l0.7,4.5l-0.8,3.2l-0.5,3.5l-1.7,4.9l-0.5,4.5l0.5,3.4l6.7,0.2l16-0.5l10.2,1.5l0.7-1.2l2.4-1.8L614.7,223.2zM559.3,123l1.4-1.7l0.2-1.7l-0.7-3.2l1.2-2.4l1-0.3l1.7,0.8l0.2,2.7l-1.1,3.3l-1.4,2.2l-1.3,0.3L559.3,123zM552.7,120.5l-1.4,1.8l-1.1-0.3l-0.2-3.2l1.5-3.1l1.6,0.8l-0.2,2.4L552.7,120.5zM571.2,129.3l-1,2.3l-1.6-0.7l-0.8-1.7l0.8-2l2-0.2L571.2,129.3z' },
      MN: { name: 'Minnesota', path: 'M553.7,191l-0.2-7.4l-2.5-5.2l-1-10.6l-1.5-4.4l-1.5-10.4l-1.2-3.7l0.7-3l-1.5-4.9l0.3-7.4l0.7-10.3l-2.2-5.7l-2.2-1l-3.2-3.2l-6.6-2.1l-0.5-3.4l-2.4-0.9l-2.9,0.2l-1.4-3.5l-3.8,0l-4.9,1.7l-0.7,4.2l-0.8,4.6l-2.5,1.6l-0.2,4.6l-34.9,0.1l-34.5-1l-1.5,10.2l-1.9,14.4l-1.2,9.6l4.5,0.3l1.4,6.5l4.5,3.4l0.5,14.3l2.5,7l-0.2,6.9l4,1.5l4.5,1.8l0.2,3l5.8-0.8l8.2,0.2l0.3-1.7l6.9-1.2l2.2,2.5l3.1,0.8l3.2-2l4.2,0.2l0.2,2.2l3.9,0.3l3.7-4.2l3.2-1.2l5-1.2l2.7,3l-0.5,5.7l1.7,2l5.7-0.8l0.2-3l3.2,0.2l0.5-5.7l4.2,0.2l0.7,1.7l5.1,0.3l0.7-2.2l5.7-0.3l0.5,3.7l3.2,1l4.7-1.3l0.7,4.2l3.7,2l3.7,5.5L553.7,191z' },
      MS: { name: 'Mississippi', path: 'M628.5,466.4l-2.5,1.4l-0.2,0.9l3,3.7l0.7,8.7l4.5,10.7l0.9,12.2l-2.4,6l1.6,3.5l1.7,7.2l-1.9,7.7l0.2,5.3l-47.7,3.9l-0.8-4.9l2.3-7.4l-2.5-3.7l1.1-9.4l4.5-4.1l2-7.4l-0.9-3l-1.4-0.7l2.5-3.6l-0.5-8.8l-2.9-5l0.4-7l-4.3-7.2l-0.7-8.9l3.6-6.1l-3-2.5l4.3-2.8l1.1-1.4l0.5-4.5l47.3-2l-1.4-5.9l-2.1-7.2l1.1-4.7l-2.5-8.9l0.5-8.1l-2.3-6.3l2.7-10.5l-1.6-2.5l-4.6,0.2l-2.9-6.3l2.5,2.9l-2.5,6.1l1.6,4l-3.2,4.5l0.7,4.3l-2.5,2.7l3.4,0.2l0.9,4.1l-2.1,5.9l0.5,6.1l-4.3,8.6l-3.6,1.4l2.5,2.9l-2.5,6.1l1.6,4l-3.2,4.5l0.7,4.3l-2.5,2.7l-23.9,1.9l-47.3,2l0.7,6.3l3.4,1.1l1.6,3.2l-0.7,5.9l-2.5,4.5l-0.3,2.7l2.5,3.4l11.2,8.7l1.5,3.6l1.1,0.3l2.5-0.3l0.7-1.6l4-27.2l38,5.7l18.6,2.1L628.5,466.4z' },
      MO: { name: 'Missouri', path: 'M609.2,414.7l3.6-1.5l4.7,0.4l7.2,3.1l9,0.2l4,2.2l5.1-1.3l3.6,1.3l2.5-1.8l2.5,1.8l7.6-4.5l0.6-4.7l2.4-1.3l5.4,2.5l5.6-5.6l-2.6-2.6l1.5-5l-7.2-7.2l-0.9-4.7l-1.1-10.3l-2-3.4l-3.6-4.3l-3.8-0.9l0.2-5.9l2.9-5l-0.4-3.8l-1.5-1.8l-3.4,1.5l-2.3-1.3l-0.6-3.6l-2.3-4.3l-2.5-3l-58.7,2l-27.8,0.5l1.2,3.4l3.8,3l2,2.9l-0.5,4l2.3,2.5l-0.2,2.3l-4.1,1.8l-0.7,3.6l-2.7,4.5l0.5,3.6l-2.9,4.1l-2.9,1.1l-0.5,3.6l3.6,5l1.4,5.6l2.5,3.8l-0.5,2.3l2.7,3.4l3.8,2l0.9,3.4l0.5,4.1l43.9,1.3l43.6-0.2l43.5-1.1L609.2,414.7z' },
      MT: { name: 'Montana', path: 'M342.5,169.7l-5.2-0.5l-37.7-4l-37.9-5l-35.3-5.3l-23.2-4l-15.2-3.2l6.4,54.7l-0.7,0.9l-0.1,2.8l0.5,3.8l-3.8,4.9l-0.3,5.7l5.5,7l0.3,3l-0.8,4.3l0.8,5.5l-1.7,8.6l1.1,0.8l3.1,1.5l2.7,3.8l-0.3,5l-4.4,1.7l-1.2,2.5l0.7,3.8l-2,1.5l1.2,3.8l-1,7l3.3,2.5l1.5,3.2l-0.5,2.5l-1.7,0.5l-3.1,3.5l-0.3,4.4l2.9,1.1l-3.5,8.8l0.9,2l2.7,2.3l0.3,1.8l-2,3.7l0.2,2.2l3.7,2.3l1.5,4.2l3.9,1.4l3.4-1.9l2.2,0.2l4.9,2.7l1.2-0.8l2.9-4.4l3.9-4l5.3,1l-0.8-5.8l43.5-4.4l43.9-5.6l43-6.3l43.6-7.2l-5.7-41.7l-6.9-49.2L342.5,169.7z' },
      NE: { name: 'Nebraska', path: 'M463,299.3l-4.8,0.3l-43.3-2.9l-47.9-4.4l-20.2-2.2l-8.1,56.9l18.2,2l47,4.1l45,2.9l47.9,2l1.2-20.9l0.2-18.1l-0.5-6.5l-3-3.2l-1.4-4.3l-3.4-1.3l-1.8-1l-0.9-3.4l-6.1-1.3l-6.3,0.6l-5.7-0.3l-3.7-3l-1.7,1.7L463,299.3z' },
      NV: { name: 'Nevada', path: 'M186.7,409.9l-3.9-20.2l-5.9-30.5l-7.1-36.2l-5.9-29l-6.9-33.2l-4.5-20.5l-20.8,4.4l-30.3,5.6l10.5,52.6l11.6,56.2l7.2,34.3l8.9,39.1l0.7,0.2l2.3-3.7l0.5-4l3.8-3l4-1.2l0-1.8l-1.3-1.3l1.3-3.3l4.7-4.5l1.3,0.5l3.3-0.8l5.7,3.2l4.3-0.2l2.8-1.3l3.5,1l1.5,0.5l3.7-2l4.3,0.7L186.7,409.9z' },
      NH: { name: 'New Hampshire', path: 'M867.2,192.1l-3.5-1l-1.3-2.9l-3.4-1.4l-3.2-4.1l-3.9-5.8l-2.9-3.7l0.7-3.5l0-3.5l-0.7-3.5l-2.2-5.7l1-3.5l1.3-3.2l0.2-2.2l-3.1-3.1l0.5-6.3l2.4-0.2l1.5-2.4l1.5,0l1.7,1.3l3.6-0.7l5.7-1.3l0.8,2.6l-2.4,5.8l0.5,2.7l0.3,5.6l2.9,2.2l1.5,0.7l0.5,3.9l-3.4,2.4l-1.9,4.4l0,6.2l-0.3,8.4l0.3,5.6l0.7,4.1l-0.2,2.5l1.4,2.2l-0.2,2.3L867.2,192.1z' },
      NJ: { name: 'New Jersey', path: 'M829.7,279l-1.3-3.5l0.5-3.5l2.5-2.2l0.2-3.7l-0.8-2.2l-0.5-5.5l-2.7-3.7l4.6-2.2l1.5-3l1.3-1.8l1.7-3.2l0-2.8l-1-2.3l2.4-2.1l3.7,1.3l3.4-0.5l4.7-3.2l0.8,1.8l-2.2,2.7l-0.5,2.5l1.3,1.1l-0.3,3.2l-3,3.4l0,3l1.5,1.7l-0.3,3.5l-1.7,0.5l0.2,3.7l2.3,2l0.3,4l-1.2,6.3l-1,4.4l0.3,2.2l3.7,3.8l0.5,2.2l-0.5,5.4l0.5,3.2l-1.1-0.6l-1.7,1.6l-2.3,3.1l-2.9,0.2l-1-3.2l-2.2-2.4l-1.6-6.3l-4.6-4.3l-0.8-2.6l1.3-2.3l0.2-2.1L829.7,279z' },
      NM: { name: 'New Mexico', path: 'M292.9,500.8l10.6-90.3l-35.5-4.3l-47-7.5l-6,42.6l-1.1,1.6l2.1,1.3l0.5,2.3l1.8,0.5l1.1,1.6l-0.1,2.3l-5.2,10.1l-10.3,19.5l23.1,3l0.8,7l1.1,12.9l0.5,4.7l49.7,4.3l0.4-4.9L292.9,500.8z' },
      NY: { name: 'New York', path: 'M829.7,279l0.3-3.2l-1.3-1.1l0.5-2.5l2.2-2.7l-0.8-1.8l-4.7,3.2l-3.4,0.5l-3.7-1.3l-2.4,2.1l1,2.3l0,2.8l-1.7,3.2l-1.3,1.8l-1.5,3l-4.6,2.2l2.7,3.7l0.5,5.5l0.8,2.2l-0.2,3.7l-2.5,2.2l-0.5,3.5l1.3,3.5l-1.7,1.6l-6.7,0l-7.2,2.4l-8.5,2.7l-8.3,2l-17.2,3.3l-14.3,2l-8.3,1l0.5-5.7l2.6-1.8l3.7-2l2.5-2.7l4.5-3.5l3-3.5l1.5-2.5l2.8-2.2l3.5-5.2l0.8-3.2l0.7-4.9l2-5.2l2.8-2.7l3.5-4.7l4.2-3.5l0.8-2.7l-0.8-4.8l0.2-6.5l-0.5-9.7l-3.2-6.5l-1.7-3.3l0.8-0.8l4.9-2.7l5.5-2.7l5.3-1.7l6.7-1.2l3.5-2.2l3.8-3.5l4.5-4l4-4.5l1.5-3.5l0.5-4.5l-1-3.7l-2.7-2.3l-0.8-2.2l1.2-3.8l-0.3-1.2l-1.8-0.5l-0.8,0.2l-0.3,2.3l-2.2,1.2l-1.8,3.5l-4,2.5l-2.5,1.8l-2.3-0.7l-3.2-2.5l-3.5-0.5l-3.7-3.2l-10.9-1.2l-3.3-0.7l-0.7-3.5l0.5-2.5l-0.8-2.2l-3-0.8l-4.5,0.8l-6.3,0.5l-7.5,0.7l0,10.7l-0.7,1.5l-2.8,0.5l-1.2,2l0.7,2.8l-1.3,3.7l-1.7,1.8l-1.2-0.5l-0.8-3l-11.4,3.5l0.8,5.3l3.7,5l1.2,3.2l-0.7,5.7l1.5,3.5l-1.2,3l0.5,5.3l0.8,5.5l-1,5.8l-1.5,5.3l-2.3,5l-2,4.7l-2.5,2.5l-1.5,2.3l0.5,2l3.5,1.2l1.5,1.5l2,1l6.3-3.9l4,2.4l9.5-1.9l12.9-3l11.9-2.5l0.7,7.5l1.5,1.3l1.8-0.8l3-0.5l1.9,3.5l3.2,2.2l2.9,1.8l2.4-1.3l4.9,2l2.5,0l1.9-1.8l2.4-0.5l7.2,2.5l4.4-0.3l3.9,1.5l5.8-4l3.5-0.5l3.5-1.9l7.3-1.4l6.8,1.5l3.9-0.7L829.7,279zM837.9,261l3-0.2l1.5,1.9l1.3-0.6l1.3-4.7l4.4-2.8l4.3,1.9l-1.9,2.5l-4,1.7l-5.3,4.5l-3.3,1.2l-0.6-2.5L837.9,261z' },
      NC: { name: 'North Carolina', path: 'M831.6,390.1l-4.9,4l-3.6,5.5l-2.3,5.4l-0.5,5.1l1.9,0.8l2.5-1.5l1.2,0.8l-1.7,6.6l-3.4,4.4l-2.4,5l-3.9,3.7l-3.1,1.8l-0.3,2.3l3,2.4l-0.5,4.6l-1.9,3.1l0.4,1l2.5-0.8l1-2.8l3.8-3.4l1.6-4.2l2.1-1.4l2.1-4.2l3.6-3.8l0.6-2.8l1.9-2.5l-1.7-1.5l3.5-7.4l3.7-3.5l1.9-4l3.5-4.2l-1.2-0.7l0.1-2.9l-5.2,0.3l-6.1,1.9L831.6,390.1zM846.2,424.9l2.5,4.8l3.9,5.5l2.1,0.8l0.5-1.8l-1.7-3.3l-3.5-5.6l0.2-2.1l-1.6-0.2L846.2,424.9zM854.2,433.4l-0.6,2.3l1.9,1.9l1.5-1.3l0-1.5L854.2,433.4zM835.7,427.5l-1.6,3.7l1.7,2.7l1.9-1.3l0.2-3.2L835.7,427.5z' },
      ND: { name: 'North Dakota', path: 'M468.5,167.9l-4.5-0.3l-34.5-1l-34.9,0.1l-0.2-4.6l-2.5-1.6l-0.8-4.6l-0.7-4.2l-4.9-1.7l-3.8,0l-1.4,3.5l-2.9-0.2l-2.4,0.9l-0.5,3.4l-6.6,2.1l-3.2,3.2l-2.2,1l-2.2,5.7l0.7,10.3l-0.3,7.4l1.5,4.9l-0.7,3l1.2,3.7l1.5,10.4l1.5,4.4l1,10.6l2.5,5.2l0.2,7.4l62.3,0.2l30.5-1l-0.7-4.2l-4.7,1.3l-3.2-1l-0.5-3.7l-5.7,0.3l-0.7,2.2l-5.1-0.3l-0.7-1.7l-4.2-0.2l-0.5,5.7l-3.2-0.2l-0.2,3l-5.7,0.8l-1.7-2l0.5-5.7l-2.7-3l-5,1.2l-3.2,1.2l-3.7,4.2l-3.9-0.3l-0.2-2.2l-4.2-0.2l-3.2,2l-3.1-0.8l-2.2-2.5l-6.9,1.2l-0.3,1.7l-8.2-0.2l-5.8,0.8l-0.2-3l-4.5-1.8l-4-1.5l0.2-6.9l-2.5-7l-0.5-14.3l-4.5-3.4l-1.4-6.5L377,177l1.2-9.6l1.9-14.4l1.5-10.2l83,6.9L468.5,167.9z' },
      OH: { name: 'Ohio', path: 'M728.6,321.7l-4.9-3.6l-5.9-2.4l-4.7,0.3l-1.8,3.9l-4.9,3.9l-5.6-0.7l-7,4.6l-6.8,5.7l-1.4,4.3l-4.3,1.8l-3.4-0.7l-3.1-1.9l-7.1,4.3l-1-1l-0.3-1.2l-2.2-0.2l-1.5-0.7l-1.6-2.7l-3.9-1.7l-5.7-0.5l-2.9-0.7l-1.3-0.2l-1.3,2.7l-1.6,0.8l-4.9-0.3l-1-3.2l2.4-4l-0.5-8.2l2.4-1.8l0.7-1.2l1.7,19.9l1.7,11.6l20,2.5l7.1-0.5l5.5-3.9l4.7-0.7l1.6,1.8l4.3,1.4l4.5,4.3l6.8,4.8l3.9,1.8l5-4.8l5.4,3.6l3.1,0.5l0.7-1.6l-3.6-4.5l2.7-5.2l5.6-4.3l0.2-2.5l2.3-5l-0.9-4.8l2.6-4.2l4.3-2.5l3.8-5.7L728.6,321.7z' },
      OK: { name: 'Oklahoma', path: 'M424.4,423l-43.2-2.2l-50.2-3.1l-8.3,67.5l21.3,1.8l-0.1,9.9l41.6,1.6l10.8-0.2l0-10.8l37.2,0.4l35.5-0.7l0.4-23.6l-2-0.5l-1.1-2.9l2.3-3.4l-1.4-2.3l-3.8-0.7l0.7-5.4l3.6-2.3l1.1-3l-2.3-0.2l-4.5-4.7l-2.7,1.4l-3.4-3.1l-2.5,3.3l-4.3-2.5l-3.6,2.2l-5.2-1.8l-2.3-2.9l-5.6-1.4l-2.5-2.3l-3.1,0.2l-2.5-2L424.4,423z' },
      OR: { name: 'Oregon', path: 'M137.2,248.4l-3.8,0.6l-2.9-0.5l-1.8-2.6l-5.9-1.9l-1.9,0.4l-4.9-2.6l-6.4-1.9l-2.8-2.4l-0.3-5.6l-4.5-3.2l-5.3-5.5l-1.7-0.2l-4.1-3.4l-3.7-1.8l-4.5-5.7l-3-1.3l-3.2,0.6l-1.9-2.2l-4.3-3.6l-4.3,0.3l-2.2-1.3l-2.1,1.6l-1-4.6l-4.3-1.5l-3.5-4.7l0-4.9l-2.9-4.7l1-7.3l-2-3.7l-3.2-3l3.5-10.9l3.2-11.4l3.3-12.6l5-16l35.9,9.4l37.2,8.6l19.6,4l-3.6,14.9l-2.9,20.8l-3.9,28.9l-3.9,28.6L137.2,248.4z' },
      PA: { name: 'Pennsylvania', path: 'M824.6,281l-0.7-7.5l-11.9,2.5l-12.9,3l-9.5,1.9l-4-2.4l-6.3,3.9l-2-1l-1.5-1.5l-3.5-1.2l-0.5-2l1.5-2.3l2.5-2.5l2-4.7l2.3-5l1.5-5.3l1-5.8l-0.8-5.5l-0.5-5.3l1.2-3l-1.5-3.5l0.7-5.7l-1.2-3.2l-3.7-5l-0.8-5.3l11.4-3.5l0.8,3l1.2,0.5l1.7-1.8l1.3-3.7l-0.7-2.8l1.2-2l2.8-0.5l0.7-1.5l0-10.7l7.5-0.7l6.3-0.5l4.5-0.8l3,0.8l0.8,2.2l-0.5,2.5l0.7,3.5l3.3,0.7l10.9,1.2l3.7,3.2l3.5,0.5l3.2,2.5l2.3,0.7l2.5-1.8l4-2.5l1.8-3.5l2.2-1.2l0.3-2.3l0.8-0.2l1.8,0.5l0.3,1.2l-1.2,3.8l0.8,2.2l2.7,2.3l1,3.7l-0.5,4.5l-1.5,3.5l-4,4.5l-4.5,4l-3.8,3.5l-3.5,2.2l-6.7,1.2l-5.3,1.7l-5.5,2.7l-4.9,2.7l-0.8,0.8l1.7,3.3l3.2,6.5l0.5,9.7l-0.2,6.5l0.8,4.8l-0.8,2.7l-4.2,3.5l-3.5,4.7l-2.8,2.7l-2,5.2l-0.7,4.9l-0.8,3.2l-3.5,5.2l-2.8,2.2L824.6,281z' },
      RI: { name: 'Rhode Island', path: 'M866.6,245.8l-1.5-6.3l-0.5-4.7l-2.3-6.5l4.4-1.4l2.1,3.9l2.9,4.6l3.4,4.7l-2.4,1.4l-1.2-0.6l-1.3,2.8l-2.2,0.8L866.6,245.8z' },
      SC: { name: 'South Carolina', path: 'M776.2,441.5l-2.4-2.5l-4.5,2.4l-5,1.5l-0.9,4l-5.4-0.4l-1.9,3.8l-3.4-0.6l-5.4,3.6l-1.5-0.6l-2.5,2.4l0,3.6l-2.9,1.1l-5.8,7l-4.9-3.8l-4.3-0.9l-4.9,2.5l-4.7,0.5l-3.6,3.6l-5.6-2l-6,5.4l-2.9-2l-4.3-0.9l-4.9,2.9l-5.6-0.7l-3.1-3.5l-3.6-0.2l-6.5,1.8l-6.6,4.1l-1.1-2.3l-4.3-1.1l-6.1,1.3l-6.3-4.3l-0.2-1.2l10.2-0.9l24.7-2.2l10.8-0.6l4,1.6l6.6,0.5l3.5,0.1l3.9-5.6l5.6-7l5.2-3.6l2.9-4.8l1.1-5.6l3.6-3.4l6.8-5.2l3.2-1.1l2.1-3.2l1.1,1.2l-2.1,5.2l3.6,2.9l7.4-4.3l4-0.5l0.9,1.3l-3.6,4.4l0.5,4.1l3.8,2.2l4.3-3.1l1.8-5l3.8-1.9l2-3.5l4-3.8l4,2.4l5.1-0.2l-0.4,5.4l1.7,6.5l2.7,4.8l3.7,3.5L776.2,441.5z' },
      SD: { name: 'South Dakota', path: 'M466.8,260.2l-62.3-0.2l-0.5,3.3l-3.7,5.5l0.7,4.2l3.7,2l-0.2,4.5l-2.7,4.2l0.3,3.3l2.7,2.2l1.3,4.2l2.2,4l-0.5,3.3l-2.5-4.3l-0.3-4.7l-30.5,1l-62.2,2.4l-1.2-4l-1.2-1.8l1.2-6.3l-2.7-3.7l-0.3-4.2l2.3-0.3l2.8-4.3l6-0.3l1.8-4l-0.5-3.5l1.5-3.2l6.2-0.7l-0.3-15l83.5,2.4l1.4,2.2l4.7,2.3l1.7-1.7l3.7,3l5.7,0.3l6.3-0.6l6.1,1.3l0.9,3.4l1.8,1l3.4,1.3l1.4,4.3l3,3.2L466.8,260.2z' },
      TN: { name: 'Tennessee', path: 'M724.7,407.1l-7.2,3.6l-6.6-0.3l-23.8,2.1l-11.3,0.6l-36.9,3l-13.7,0.7l-2.2-0.2l0.3-9.5l-0.3-13.9l-0.2-1.2l6.5-5.6l3.6-1.5l4.7,0.4l7.2,3.1l9,0.2l4,2.2l5.1-1.3l3.6,1.3l2.5-1.8l2.5,1.8l7.6-4.5l0.6-4.7l2.4-1.3l5.4,2.5l5.6-5.6l-2.6-2.6l1.5-5l9.3-1.1l4.7-5.2l6.6-3.6l1.9,3.1l5.2,0.3l4.7-1.3l10.9-3.2l5.9,0.6l5.9-1.1l5.1-4.4l2.6,0.3l4.5,0.7l-0.9,5.4l4.7,0.1l-2.7,3.3l-3.3,5.5l-4.3,3.7l-1.3,5.4l-3.6,1.9l-2.4-2.5l-4.5,2.4l-5,1.5l-0.9,4l-5.4-0.4l-1.9,3.8l-3.4-0.6l-5.4,3.6l-1.5-0.6l-2.5,2.4l0,3.6l-2.9,1.1l-5.8,7L724.7,407.1z' },
      TX: { name: 'Texas', path: 'M476.7,552.7l-11.4-1l-1.9-7.2l-4.6-6.8l-1.2-3.5l-1.1-1.4l0.7-4l-5.1-8.5l-1.8-1.1l-1.6,1.1l-0.4-3l-3.3-1.2l-3.2,1.9l-3.1-0.6l-2.2,1.4l-4.5,6.8l-4.7,3.1l-1.9,3.1l-3,1.1l-2.5,2.7l-5.5,0.1l-5.1-2.4l-4-0.4l-2.8,1.1l-2.8-0.6l-3.2-2.8l-6.1-2.6l-0.8-2l-3.2,1.5l-7.9-3.6l-2.8,0.9l-2.6-1l-2.5,0.9l-5.9-3.4l-4.9,1.5l-3,5.3l-0.6,3.4l-7.3,1.7l-5.9-1l-6.6,2.1l-2.1,3.7l-6.5,6.2l-3.5,0.4l-0.6-2.6l1.9-6.6l1.9-0.2l3.2-7l3.5-5.1l1.1-1.7l2.1-5.6l-0.6-1.6l-6-4.2l-3-3.3l-1.4-2.4l1-2.6l-3.6-6.5l-0.9-5.6l-1.7-3.6l-0.1-3.5l-5.9-7l0.4-3.9l-2-4.9l1.2-7.2l0.4-6.7l-0.5-4.7l-1.1-12.9l-0.8-7l-23.1-3l-0.4,4.9l-49.7-4.3l-2.8,22.5l21.3,1.8l-0.1,9.9l41.6,1.6l10.8-0.2l0,10.8l37.2,0.4l35.5-0.7l0.4,23.6l2,0.5l1.1,2.9l-2.3,3.4l1.4,2.3l3.8,0.7l-0.7,5.4l-3.6,2.3l-1.1,3l2.3,0.2l4.5,4.7l2.7-1.4l3.4,3.1l2.5-3.3l4.3,2.5l3.6-2.2l5.2,1.8l2.3,2.9l5.6,1.4l2.5,2.3l3.1-0.2l2.5,2l-0.2,7l1.1,6.1l1.6,6.4l3,4.8l0.5,3.2l4.3,5l0.5,2.8l3.4,4.8l1.1,5l3.2,1.6l-0.7,3.9l3.5,0.5l1.8,3l1.9,4.6l4,1.8l2.5,2.5l2.9,0.2l2.3,1.3l3.4-2.9l5,0.5l5.1,3.6l2.5,3.4l1.3,3.3l0.5,3.5l3.5,3.4l-0.6,1.9l2.4,1.6l0.2,3l-1.4,4.8l1.6,2.5l-2.1,2l1.3,0.3l2.4-2l3.3-0.8l5.2,1.3l4.8,1.4l3.9,0.2l1.3,1.5l3.6,0.9l3.6-4.1l-0.5-2.7l2.3-0.5l1.3-2.3l1.3-0.3l2.3-5.7l2-4.1l-0.3-3.8l2.7-6.6l3-3.1l1.1-3.7l1.4-4.3l2.5-2l-0.4-2.7l2-4.1l0.7-3.2l0.2-9.4l-3.4-2.1l-6.1-3.4l-2.2-0.6l-3-1.8l-4.4-6.9l-4.8-3.9l-1.3-3.9l0.7-0.6l-0.8-3.5l-3.9-1.9l0.3-1.1l-3.4-3.8l0.2-0.5l-3.3-5.2l-3.9-1.8l0.4-3.4l-4.2-3.9L476.7,552.7z' },
      UT: { name: 'Utah', path: 'M255.2,398.6l-3.5-51l-18.6-2.1l-48.4-7.3l-0.7,4.9l-4.3-0.7l-3.7,2l-1.5-0.5l-3.5-1l-2.8,1.3l-4.3,0.2l-5.7-3.2l-3.3,0.8l-1.3-0.5l-4.7,4.5l-1.3,3.3l1.3,1.3l0,1.8l-4,1.2l-3.8,3l-0.5,4l-2.3,3.7l17.5,76.3l38.3-8.8l38.3-9.5L255.2,398.6z' },
      VT: { name: 'Vermont', path: 'M847.9,189l-3.9,0.7l-4.9-2l-2.4,1.3l-2.9-1.8l-3.2-2.2l-1.9-3.5l-3,0.5l-1.8,0.8l-1.5-1.3l-0.7-7.5l-0.3-5.6l0.2-2.3l-1.4-2.2l0.2-2.5l-0.7-4.1l-0.3-5.6l0.3-8.4l0-6.2l1.9-4.4l3.4-2.4l-0.5-3.9l-1.5-0.7l-2.9-2.2l-0.3-5.6l-0.5-2.7l2.4-5.8l-0.8-2.6l0.2-5.8l2.2-2.9l-0.2-2l0.3-2.2l20.5-5.3l-0.4,4l1.5,6.4l4.7,3.9l-0.8,5.7l0.5,4.5l-0.2,3.7l-0.3,8l2.7,5.3l-1.1,4.2l0.3,6.5l-0.7,11.8l-0.7,6.9l0,5l-0.3,6.2l0.5,3l-1.7,0.3L847.9,189z' },
      VA: { name: 'Virginia', path: 'M834.4,368.8l-3.5,4.2l-1.9,4l-3.7,3.5l-3.5,7.4l1.7,1.5l-1.9,2.5l-0.6,2.8l-3.6,3.8l-2.1,4.2l-2.1,1.4l-1.6,4.2l-3.8,3.4l-1,2.8l-2.5,0.8l-0.4-1l1.9-3.1l0.5-4.6l-3-2.4l0.3-2.3l3.1-1.8l3.9-3.7l2.4-5l3.4-4.4l1.7-6.6l-1.2-0.8l-2.5,1.5l-1.9-0.8l0.5-5.1l2.3-5.4l3.6-5.5l4.9-4l1.2,0.7l5.2-0.3l-0.1,2.9L834.4,368.8zM825.9,320l-4.5-0.7l-2.6-0.3l-5.1,4.4l-5.9,1.1l-5.9-0.6l-10.9,3.2l-4.7,1.3l-5.2-0.3l-1.9-3.1l-6.6,3.6l-4.7,5.2l-9.3,1.1l-1.5,5l2.6,2.6l-5.6,5.6l-5.4-2.5l-2.4,1.3l-0.6,4.7l-7.6,4.5l-2.5-1.8l-2.5,1.8l-3.6-1.3l-5.1,1.3l-4-2.2l-9-0.2l-7.2-3.1l-4.7-0.4l-3.6,1.5l-6.5,5.6l-3.4-0.5l0.2-2.5l1.8-3.6l-1.4-3.2l-9.8,0.5l-2.5-2.3l-0.4-2.3l2.7-7.1l-4-8l-5.3-0.7l-5.7-3.2l-4.3-7.1l-0.4-4.1l3.2-3.6l4.3-5.2l2.3-8.7l-0.4-4.7l-6.5-5.2l-3.6-5.7l1.2-13.8l-0.5-6.9l-3.5-4.6l0.3-3.6l3.2-5.2l-0.1-7.1l-2.9-2.7l-0.7-3l0.5-1.6l27.8,0.5l58.7-2l2.5,3l2.3,4.3l0.6,3.6l2.3,1.3l3.4-1.5l1.5,1.8l0.4,3.8l-2.9,5l-0.2,5.9l3.8,0.9l3.6,4.3l2,3.4l1.1,10.3l0.9,4.7l7.2,7.2l-3.3,13.1l24.9,5.3l9.7,2.4l7.7,1.9l5.7,1.7l-1.1,3.3l0.9,0.4l2.5-9.9l4.2-5.2l1.4-0.3l2.9,2.2l1.9-1l3-5.6l1.5,0.3l2-0.5l5.9-4.3l8.3-0.3l0.4-4.9l4.9,14l-3.7,1l-4.1,3.8l-2.4,5l-2.4,1.6l2.1,5.3l1.8,6.7l1.2,3.8L825.9,320z' },
      WA: { name: 'Washington', path: 'M185.9,124.6l-2.9-7.9l-4.8-2.6l-0.6-2.4l3.2-0.4l0.6-4l-4.7-1.1l-1.9-3.8l0.5-4.7l-2.7-0.3l-0.5-4.3l2.3-0.5l-0.8-2.4l1.3-7.1l-1.6-4.5l1.3-8.7l-0.6-6.9l-2.1-3.2l0.2-4.8l-4.8-1.6l-2.7,0.3l-2.6,0.1l-0.3-3.1l-4,0.4l-3.3,1.1l-7.7,0.1l-4.5,1.2l-7.3,0.9l-5.1,0.6l-5.5-0.3l-6.3,1.4l-8.1,0.5l-11,2.9l-7.3,1.1l-8.5,2.4l-3.9,0.9l-5.5,2.2l-6.4-0.3l-6.8,0.8l-3.5,2.6l3.9,3.4l1.4,3.2l1.8,7.9l0.8,5.2l2.4,5l1.3,5.5l1.3,4.2l2.9,3.9l0.5,4.8l1.5,6.6l-0.2,5.5l1.4,3.7l0.7,4.3l3.4,0.8l1.5-4.2l-0.6-5.5l1-7.3l2.9,4.7l0,4.9l3.5,4.7l4.3,1.5l1,4.6l2.1-1.6l2.2,1.3l4.3-0.3l4.3,3.6l1.9,2.2l3.2-0.6l3,1.3l4.5,5.7l3.7,1.8l4.1,3.4l1.7,0.2l5.3,5.5l4.5,3.2l0.3,5.6l2.8,2.4l6.4,1.9l4.9,2.6l1.9-0.4l5.9,1.9l1.8,2.6l2.9,0.5l3.8-0.6l3.9-28.6l3.9-28.9l2.9-20.8l3.6-14.9L185.9,124.6z' },
      WV: { name: 'West Virginia', path: 'M756.6,330.3l-3.1-0.5l-5.4-3.6l-5,4.8l-3.9-1.8l-6.8-4.8l-4.5-4.3l-4.3-1.4l-1.6-1.8l-4.7,0.7l-5.5,3.9l-7.1,0.5l-20-2.5l-1.7-11.6l-0.3-11l1.3-4.9l-1.6-5.5l0.5-8.5l1.8-5.7l-0.7-9.6l-2.1-0.9l1.3-4.9l-3.6,0.7l-5.2,1.6l-3.4,5.5l-3.6,1.4l-3.2-2.5l-0.2-2.5l4.3,0.7l3.4,0.7l4.3-1.8l1.4-4.3l6.8-5.7l7-4.6l5.6,0.7l4.9-3.9l1.8-3.9l4.7-0.3l5.9,2.4l4.9,3.6l1.9,5.9l-3.8,5.7l-4.3,2.5l-2.6,4.2l0.9,4.8l-2.3,5l-0.2,2.5l-5.6,4.3l-2.7,5.2l3.6,4.5l-0.7,1.6l7.9,3.2l7.6,3.6l7.8-0.7l6.5,1.6l7.1-0.2l3.9-3.1l2.7-4.8l4.5-1.2l5.9,0.3l2.4,0.5l-0.1-4.1l1.9-4.1l2.7,6.1l-3.6,3.5l-1.3,2.9l1.7,4.6l1.9,3.6l-0.8,5l-1.7-0.7l-1.1,2.9l-3.1,0.5l-3.2-0.3l-3.5,0.5l-0.2,3.6l0.8,3.6l-2.1,4.3l-2.3,0.7l-1.3-2l0.2-2.6l2.9-3.3l-1.5-2.4l-1.7,0.7l-0.2,3.3l-4.1,0.7l0.8-5l-1.9-3.6l-1.7-4.6l1.3-2.9l3.6-3.5l-2.7-6.1l-1.9,4.1l-2.4-0.5l-5.9-0.3l-4.5,1.2l-2.7,4.8l-3.9,3.1l-7.1,0.2l-6.5-1.6l-7.8,0.7l-7.6-3.6l-7.9-3.2l3.3,13.1l24.9,5.3l9.7,2.4l7.7,1.9l5.7,1.7L756.6,330.3z' },
      WI: { name: 'Wisconsin', path: 'M582.1,243.3l-0.2-2.9l-1.6-1.9l-3.7-0.3l-0.5-1l0.2-1.7l-1.1-1.7l-2.2-0.3l-2.7,2.1l-2.8-0.3l-5.9-4.9l-1.9-2.3l-4.9-1l0.1-1.4l-0.7-1.5l-0.1-2.6l1.9-2.3l2.7,1l7.3-0.5l2.2-0.7l4.7-3.9l2.9-1.7l4.9-0.8l3.1-2.3l1.2,0.8l-0.2,1.6l-1.3,1.6l0.3,1.2l1.7,0.2l2.3-2.2l1.8-0.7l5.5,1.1l8.2,2.9l3,0.5l4.1,3.4l1.1,0.3l2-1.5l3.3,0.8l3.9-0.8l0.2-6.7l1.5-3.8l2.1-3.1l0.3,4l0.8,1.5l0.7-0.8l0.5-3.5l2.1-5.9l2.3-3.4l1.4-1l0.6,1.5l-0.6,1.5l-0.3,4.2l-1.6,2l-0.5,3l1.5,0.3l2.2,0.3l1.5-2.6l1.5-1.5l0.8,2.5l-1.1,2.9l-0.3,3.3l0.5,0.6l3.7-3.7l0.8-2.6l-0.8-3l0.5-5.1l2.9-3.9l1.5-4.2l0.9-1.4l1.4,1.8l0.3,4.1l-1.8,4.2l-0.7,5.3l1.8,4.7l3.4,2.8l1.9,3.8l0.3,9.1l-2.6,1.5l-2.4,1.8l-0.7,1.2l0.5,4.4l3.1,2.2l0.5,1.9l-3,5.7l-2.3,6.5l-0.8,6.9l1.1,4l1.9,2.7l-0.2,3.7l-2.5,3.4l-1.3,5.5l2.1,5.6l3.5,1.7l1.5,1.7l-1.3,3.9l0.3,3.8l-2.1,3.7l3.3,3.4l-3.2,0.2l-3,1.8l-0.4,5.5l-3.9,2.1l-1.6-1.1l-4.5,1.6l-3.6,4.5l-2.1,0.7l-2.5-2.7l-7,0.2l-1.9,1.4l-6.4,1l-1.4,3.7l-4.7,1.6l-3.2,3.9l-4.1,1.6l-4.3-1.8l-6,0.2l-7,2l-4.8,0.3l-1-3.2l-3.4-4.1l1-2l-2.3-4.1l-3.6-2.3l-2.3-5.1l1.2-3l0.3-4.5l2.2-2.6l0.8-4.6l4.7-5.1l-1-4.9l-3.5-1.3l-5.6-3.4l-2.5-4.3L582.1,243.3z' },
      WY: { name: 'Wyoming', path: 'M338.4,289.4l-47-4.4l-47.9-5.5l-20.2-2.8l8.1-56.9l-21-3.2l6.1-43.4l43,6.3l43.9,5.6l43.5,4.4l-2.7,20.5l-0.3,2l6.9,49.2L338.4,289.4z' },
      DC: { name: 'District of Columbia', path: 'M801.8,313.2l-2.5-1.5l-0.5-2.4l1.1-2.3l2.6,0.9l1.5,2.5L801.8,313.2z' },
      PR: { name: 'Puerto Rico', path: 'M828,553.1l-0.7,2.1l-3.5-0.4l-3.4-1.1l-2.6,0.4l-1.9-0.9l-2.2,1.3l-2.6-0.2l-1.5,1.3l-1.5-0.2l-1.1-3.2l4.5-1.7l3.7,0.6l2.8,0.9l2.4-0.9l3.4,0.7l3,0.2L828,553.1z' }
    };

    // ============================================
    // MAIN COMPONENT
    // ============================================

    const SolidarityPlatform = () => {
      // Navigation
      const [activeTab, setActiveTab] = useState('information');
      const [activeSubTab, setActiveSubTab] = useState('sentiment');
      const [notification, setNotification] = useState(null);

      // Information State
      const [zipCode, setZipCode] = useState('');
      const [localData, setLocalData] = useState(null);
      const [loading, setLoading] = useState(false);
      const [zipError, setZipError] = useState(null);
      const [priceVotes, setPriceVotes] = useState({});
      const [priceResistanceItems, setPriceResistanceItems] = useState([]);

      // Formation State
      const [workSentiment, setWorkSentiment] = useState(null);
      const [sentimentHistory, setSentimentHistory] = useState([]);
      const [todaySentiment, setTodaySentiment] = useState({ willing: 0, unwilling: 0, total: 0 });

      // Tenant State
      const [buildings, setBuildings] = useState([]);
      const [selectedBuilding, setSelectedBuilding] = useState(null);
      const [joinedBuildings, setJoinedBuildings] = useState([]);
      const [tenantMessages, setTenantMessages] = useState([]);
      const [newTenantMessage, setNewTenantMessage] = useState('');

      // Worker State
      const [workerCollectives, setWorkerCollectives] = useState([]);
      const [joinedCollectives, setJoinedCollectives] = useState([]);
      const [selectedCollective, setSelectedCollective] = useState(null);
      const [collectiveMessages, setCollectiveMessages] = useState([]);
      const [newCollectiveMessage, setNewCollectiveMessage] = useState('');

      // Consumer State
      const [consumerGroups, setConsumerGroups] = useState([]);
      const [joinedConsumerGroups, setJoinedConsumerGroups] = useState([]);

      // Petition State
      const [petitions, setPetitions] = useState([]);
      const [signedPetitions, setSignedPetitions] = useState([]);
      const [showPetitionForm, setShowPetitionForm] = useState(false);
      const [newPetition, setNewPetition] = useState({ title: '', area: '', description: '', changeorg_url: '' });

      // Report State
      const [reports, setReports] = useState([]);
      const [reportType, setReportType] = useState('landlord');
      const [reportFilter, setReportFilter] = useState('all');
      const [newReport, setNewReport] = useState({ name: '', address: '', issues: [], description: '', anonymous: true });

      // Economic Impact Calculator State
      const [impactStartYear, setImpactStartYear] = useState('');
      const [impactStartSalary, setImpactStartSalary] = useState('');
      const [impactCurrentSalary, setImpactCurrentSalary] = useState('');
      const [impactCurrentRent, setImpactCurrentRent] = useState('');
      const [impactResults, setImpactResults] = useState(null);
      const [impactLoading, setImpactLoading] = useState(false);
      const [impactError, setImpactError] = useState(null);
      const [unionRaisePercent, setUnionRaisePercent] = useState(0);
      const [showInflationResume, setShowInflationResume] = useState(false);

      // The Shelter Tax State
      const [shelterRent, setShelterRent] = useState('');
      const [shelterSalary, setShelterSalary] = useState('');
      const [shelterResults, setShelterResults] = useState(null);

      // Corporate Conquest Map State
      const [mapData, setMapData] = useState(null);

      // Profit Stopwatch State
      const [hourlyWage, setHourlyWage] = useState('');
      const [hoursWorkedPerDay, setHoursWorkedPerDay] = useState('');
      const [industry, setIndustry] = useState('Technology');
      const [stopwatchResults, setStopwatchResults] = useState(null);

      // Calendar of Servitude State
      const [monthlyRent, setMonthlyRent] = useState('');
      const [monthlyIncome, setMonthlyIncome] = useState('');
      const [calendarResults, setCalendarResults] = useState(null);

      // One Bad Day State
      const [currentSavings, setCurrentSavings] = useState('');
      const [selectedEmergency, setSelectedEmergency] = useState(null);
      const [emergencyResults, setEmergencyResults] = useState(null);

      // New Collective Form
      const [showNewCollectiveForm, setShowNewCollectiveForm] = useState(false);
      const [newCollective, setNewCollective] = useState({ company: '', industry: '', issues: [], telegram_url: '' });

      // ============================================
      // TEXT CUSTOMIZATION PANEL
      // ============================================

      // Default text configuration - all customizable text elements
      const defaultTextConfig = {
        // Header
        header_title: 'SOLIDARITY',
        header_title_suffix: 'NET',
        header_tagline: 'Formation • Information • Accountability',
        header_no_tracking: 'NO TRACKING • NO PROFILES',
        header_workers_first: 'WORKERS FIRST',

        // Navigation tabs
        nav_information: 'information',
        nav_formation: 'formation',
        nav_accountability: 'accountability',

        // Formation sub-tabs
        subtab_sentiment: '📊 Work Sentiment',
        subtab_tenant: '🏢 Tenant Unions',
        subtab_worker: '⚡ Worker Collectives',
        subtab_consumer: '🛒 Consumer Groups',
        subtab_petitions: '📋 Petitions',

        // Standard of Living Calculator
        sol_section_title: 'Standard of Living Calculator',
        sol_zip_label: 'ZIP CODE:',
        sol_zip_placeholder: 'Enter ZIP',
        sol_calculate_btn: 'Calculate',
        sol_loading_btn: 'Loading...',
        sol_helper_text: 'Enter any US ZIP code — data sourced from BLS, HUD, USDA, AAA, and EIA',
        sol_weeks_label: 'weeks of work to afford one month of living',
        sol_deficit_label: 'DEFICIT: You need',
        sol_deficit_suffix: 'more hours than a full-time job provides',
        sol_surplus_prefix: 'Technically sustainable with',
        sol_surplus_suffix: 'hours of margin',
        sol_gross_wage: 'Gross hourly wage',
        sol_federal_tax: 'Federal income tax',
        sol_state_tax: 'State tax',
        sol_fica: 'FICA (SS + Medicare)',
        sol_after_tax: 'After-tax hourly wage',
        sol_effective_rate: 'Effective tax rate:',
        sol_hours_label: 'Hours needed per month (at after-tax wage):',
        sol_rent: 'Rent',
        sol_food: 'Food',
        sol_healthcare: 'Healthcare',
        sol_transport: 'Transport',
        sol_utilities: 'Utilities',
        sol_total_required: 'TOTAL REQUIRED',
        sol_available: 'Available (40hr/wk × 4)',
        sol_monthly_result: 'MONTHLY DEFICIT / SURPLUS',
        sol_data_quality: 'Data quality:',

        // The Exploitation Calculator
        impact_section_title: 'The Exploitation Calculator',
        impact_description: 'See how the productivity-wage gap has affected your earnings over your career.',
        impact_start_year_label: 'YEAR STARTED WORKING:',
        impact_start_salary_label: 'STARTING SALARY ($):',
        impact_current_salary_label: 'CURRENT SALARY ($):',
        impact_current_rent_label: 'MONTHLY RENT ($):',
        impact_start_year_placeholder: '2000',
        impact_start_salary_placeholder: '35000',
        impact_current_salary_placeholder: '65000',
        impact_current_rent_placeholder: '1500',
        impact_calculate_btn: 'Calculate Impact',
        impact_cumulative_label: 'Unpaid Labor Value',
        impact_unrealized_label: 'Productivity-Wage Deficit',
        impact_rent_label: 'Excess Rent Burden',
        impact_years_label: 'Time Owed to You',

        // Consumer Price Resistance
        price_section_title: 'Consumer Price Resistance',
        price_vote_prompt: 'Is this the right price?',
        price_too_high: 'Too High',
        price_seems_right: 'Seems Right',
        price_too_low: 'Too Low',

        // Work Sentiment
        sentiment_section_title: 'Work Sentiment — Your Area',
        sentiment_question: 'Do you feel like working today?',
        sentiment_yes: 'YES',
        sentiment_no: 'NO',
        sentiment_recorded: 'Response recorded anonymously (fingerprint-based, no account)',
        sentiment_unwilling: "Don't want to work today",
        sentiment_responses: 'Responses in your area',
        sentiment_trend: '4-Week Trend (% unwilling to work)',
        sentiment_trend_msg: 'Worker unwillingness rising 14 points over 4 weeks',

        // Tenant Union Builder
        tenant_section_title: 'Tenant Union Builder',
        tenant_description: 'Find and connect with other tenants in your building. No personal data required.',
        tenant_search_placeholder: 'Enter ZIP to find buildings',
        tenant_search_btn: 'Search Buildings',
        tenant_landlord: 'Landlord:',
        tenant_joined: 'Joined',
        tenant_members: 'Members',
        tenant_organization: 'Organization %',
        tenant_join_btn: 'Join Building',
        tenant_message_btn: 'Message Building',

        // Worker Collectives
        worker_section_title: 'Worker Collectives',
        worker_form_title: 'Start a Worker Collective',
        worker_company_label: 'COMPANY NAME',
        worker_industry_label: 'INDUSTRY TYPE',
        worker_issues_label: 'ISSUE TYPE (select all that apply)',
        worker_create_btn: 'Create Collective',
        worker_join_btn: 'Join Collective',
        worker_message_btn: 'Message',

        // Issue types
        issue_wage_theft: 'Wage theft',
        issue_unsafe: 'Unsafe conditions',
        issue_retaliation: 'Retaliation',
        issue_discrimination: 'Discrimination',
        issue_harassment: 'Harassment',
        issue_scheduling: 'Scheduling abuse',
        issue_unpaid_ot: 'Unpaid overtime',
        issue_other: 'Other',
        issue_no_repairs: 'No repairs',
        issue_illegal_fees: 'Illegal fees',
        issue_safety_hazard: 'Safety hazard',
        issue_pest: 'Pest infestation',
        issue_no_heat: 'No heat/AC',

        // Consumer Groups
        consumer_section_title: 'Consumer Collectives',
        consumer_join_btn: 'Join Group',

        // Petitions
        petition_section_title: 'Local Petitions',
        petition_form_title: 'Link Change.org Petition',
        petition_url_label: 'PETITION URL',
        petition_title_label: 'PETITION TITLE',
        petition_area_label: 'AREA / LOCATION',
        petition_desc_label: 'DESCRIPTION (OPTIONAL)',
        petition_url_placeholder: 'https://www.change.org/p/your-petition',
        petition_title_placeholder: 'What are you petitioning for?',
        petition_area_placeholder: 'Where does this apply?',
        petition_desc_placeholder: 'Explain the issue...',
        petition_create_btn: 'Create Petition',
        petition_refresh_btn: 'Refresh Count',

        // Accountability
        report_section_title: 'Submit Report',
        report_type_landlord: '🏠 Landlord',
        report_type_employer: '💼 Employer',
        report_name_landlord: 'Landlord Name or Management Company',
        report_name_employer: 'Company Name',
        report_address_label: 'Property Address (optional)',
        report_issues_label: 'Issue Type (select all that apply)',
        report_desc_label: 'Description (optional)',
        report_anonymous: 'Post anonymously',
        report_name_landlord_placeholder: 'e.g., Greystone Properties',
        report_name_employer_placeholder: 'e.g., MegaCorp Inc',
        report_address_placeholder: 'e.g., 123 Main St',
        report_desc_placeholder: 'What happened? Be specific but protect your identity.',
        report_submit_btn: 'Submit Report',
        report_footer: 'Reports are public. No moderation by corporations or landlords.',

        // Recent Reports
        reports_section_title: 'Recent Reports',
        reports_filter_all: 'All Reports',
        reports_filter_landlord: 'Landlords',
        reports_filter_employer: 'Employers',
        reports_count_label: 'REPORTS',
        reports_last: 'Last:',

        // Footer
        footer_brand: 'SOLIDARITY_NET',
        footer_tagline: 'Open source. No tracking. No profiles. No ads.',
        footer_source: 'Source Code',
        footer_data: 'Data Sources',
        footer_privacy: 'Privacy',
      };

      // Default font configuration
      const defaultFontConfig = {
        primary: "'IBM Plex Mono', 'Courier New', monospace",
        heading: "'IBM Plex Mono', 'Courier New', monospace",
        body: "'IBM Plex Mono', 'Courier New', monospace",
      };

      // Default color overrides (uses colors object as base)
      const defaultColorConfig = {
        primary: '#ff3333',
        text: '#e8e8e8',
        textMuted: '#888',
        textDim: '#666',
        success: '#33ff33',
        warning: '#ffaa00',
        bg: '#0a0a0a',
        bgLight: '#111',
        border: '#222',
      };

      // Available font options
      const fontOptions = [
        "'IBM Plex Mono', 'Courier New', monospace",
        "'Arial', 'Helvetica', sans-serif",
        "'Georgia', 'Times New Roman', serif",
        "'Times New Roman', 'Times', serif",
        "'Verdana', 'Geneva', sans-serif",
        "'Trebuchet MS', 'Lucida Sans', sans-serif",
        "'Courier New', 'Courier', monospace",
        "'Roboto', 'Arial', sans-serif",
        "'Open Sans', 'Arial', sans-serif",
      ];

      // State for customization
      const [showCustomizationPanel, setShowCustomizationPanel] = useState(false);
      const [textConfig, setTextConfig] = useState(() => {
        const saved = localStorage.getItem('solidaritynet_textConfig');
        return saved ? JSON.parse(saved) : defaultTextConfig;
      });
      const [fontConfig, setFontConfig] = useState(() => {
        const saved = localStorage.getItem('solidaritynet_fontConfig');
        return saved ? JSON.parse(saved) : defaultFontConfig;
      });
      const [colorConfig, setColorConfig] = useState(() => {
        const saved = localStorage.getItem('solidaritynet_colorConfig');
        return saved ? JSON.parse(saved) : defaultColorConfig;
      });
      const [panelTab, setPanelTab] = useState('text');
      const [textFilter, setTextFilter] = useState('');

      // Save to localStorage when configs change
      useEffect(() => {
        localStorage.setItem('solidaritynet_textConfig', JSON.stringify(textConfig));
      }, [textConfig]);

      useEffect(() => {
        localStorage.setItem('solidaritynet_fontConfig', JSON.stringify(fontConfig));
      }, [fontConfig]);

      useEffect(() => {
        localStorage.setItem('solidaritynet_colorConfig', JSON.stringify(colorConfig));
      }, [colorConfig]);

      // Helper to update text config
      const updateText = (key, value) => {
        setTextConfig(prev => ({ ...prev, [key]: value }));
      };

      // Helper to update font config
      const updateFont = (key, value) => {
        setFontConfig(prev => ({ ...prev, [key]: value }));
      };

      // Helper to update color config
      const updateColor = (key, value) => {
        setColorConfig(prev => ({ ...prev, [key]: value }));
      };

      // Reset to defaults
      const resetTextConfig = () => {
        setTextConfig(defaultTextConfig);
        localStorage.removeItem('solidaritynet_textConfig');
      };

      const resetFontConfig = () => {
        setFontConfig(defaultFontConfig);
        localStorage.removeItem('solidaritynet_fontConfig');
      };

      const resetColorConfig = () => {
        setColorConfig(defaultColorConfig);
        localStorage.removeItem('solidaritynet_colorConfig');
      };

      const resetAllConfig = () => {
        resetTextConfig();
        resetFontConfig();
        resetColorConfig();
      };

      // Export config as JSON
      const exportConfig = () => {
        const config = {
          textConfig,
          fontConfig,
          colorConfig,
          exportedAt: new Date().toISOString()
        };
        const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'solidaritynet_customization.json';
        a.click();
        URL.revokeObjectURL(url);
      };

      // Import config from JSON
      const importConfig = (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            try {
              const config = JSON.parse(e.target.result);
              if (config.textConfig) setTextConfig({ ...defaultTextConfig, ...config.textConfig });
              if (config.fontConfig) setFontConfig({ ...defaultFontConfig, ...config.fontConfig });
              if (config.colorConfig) setColorConfig({ ...defaultColorConfig, ...config.colorConfig });
              showNotification('Configuration imported successfully', 'success');
            } catch (err) {
              showNotification('Invalid configuration file', 'error');
            }
          };
          reader.readAsText(file);
        }
      };

      // Group text config by category for display
      const textCategories = {
        'Header': ['header_title', 'header_title_suffix', 'header_tagline', 'header_no_tracking', 'header_workers_first'],
        'Navigation': ['nav_information', 'nav_formation', 'nav_accountability', 'subtab_sentiment', 'subtab_tenant', 'subtab_worker', 'subtab_consumer', 'subtab_petitions'],
        'Standard of Living': ['sol_section_title', 'sol_zip_label', 'sol_zip_placeholder', 'sol_calculate_btn', 'sol_loading_btn', 'sol_helper_text', 'sol_weeks_label', 'sol_deficit_label', 'sol_deficit_suffix', 'sol_surplus_prefix', 'sol_surplus_suffix', 'sol_gross_wage', 'sol_federal_tax', 'sol_state_tax', 'sol_fica', 'sol_after_tax', 'sol_effective_rate', 'sol_hours_label', 'sol_rent', 'sol_food', 'sol_healthcare', 'sol_transport', 'sol_utilities', 'sol_total_required', 'sol_available', 'sol_monthly_result', 'sol_data_quality'],
        'Economic Impact': ['impact_section_title', 'impact_description', 'impact_start_year_label', 'impact_start_salary_label', 'impact_current_salary_label', 'impact_current_rent_label', 'impact_start_year_placeholder', 'impact_start_salary_placeholder', 'impact_current_salary_placeholder', 'impact_current_rent_placeholder', 'impact_calculate_btn', 'impact_cumulative_label', 'impact_unrealized_label', 'impact_rent_label', 'impact_years_label'],
        'Price Resistance': ['price_section_title', 'price_vote_prompt', 'price_too_high', 'price_seems_right', 'price_too_low'],
        'Work Sentiment': ['sentiment_section_title', 'sentiment_question', 'sentiment_yes', 'sentiment_no', 'sentiment_recorded', 'sentiment_unwilling', 'sentiment_responses', 'sentiment_trend', 'sentiment_trend_msg'],
        'Tenant Unions': ['tenant_section_title', 'tenant_description', 'tenant_search_placeholder', 'tenant_search_btn', 'tenant_landlord', 'tenant_joined', 'tenant_members', 'tenant_organization', 'tenant_join_btn', 'tenant_message_btn'],
        'Worker Collectives': ['worker_section_title', 'worker_form_title', 'worker_company_label', 'worker_industry_label', 'worker_issues_label', 'worker_create_btn', 'worker_join_btn', 'worker_message_btn'],
        'Issue Labels': ['issue_wage_theft', 'issue_unsafe', 'issue_retaliation', 'issue_discrimination', 'issue_harassment', 'issue_scheduling', 'issue_unpaid_ot', 'issue_other', 'issue_no_repairs', 'issue_illegal_fees', 'issue_safety_hazard', 'issue_pest', 'issue_no_heat'],
        'Consumer Groups': ['consumer_section_title', 'consumer_join_btn'],
        'Petitions': ['petition_section_title', 'petition_form_title', 'petition_url_label', 'petition_title_label', 'petition_area_label', 'petition_desc_label', 'petition_url_placeholder', 'petition_title_placeholder', 'petition_area_placeholder', 'petition_desc_placeholder', 'petition_create_btn', 'petition_refresh_btn'],
        'Submit Report': ['report_section_title', 'report_type_landlord', 'report_type_employer', 'report_name_landlord', 'report_name_employer', 'report_address_label', 'report_issues_label', 'report_desc_label', 'report_anonymous', 'report_name_landlord_placeholder', 'report_name_employer_placeholder', 'report_address_placeholder', 'report_desc_placeholder', 'report_submit_btn', 'report_footer'],
        'Recent Reports': ['reports_section_title', 'reports_filter_all', 'reports_filter_landlord', 'reports_filter_employer', 'reports_count_label', 'reports_last'],
        'Footer': ['footer_brand', 'footer_tagline', 'footer_source', 'footer_data', 'footer_privacy'],
      };

      // ============================================
      // DATA FETCHING
      // ============================================

      // Fetch initial data on mount
      useEffect(() => {
        // Fetch price resistance items
        fetch(`${API_BASE}/price-resistance`)
          .then(r => r.json())
          .then(data => setPriceResistanceItems(data))
          .catch(() => {});

        // Fetch sentiment data
        fetch(`${API_BASE}/sentiment`)
          .then(r => r.json())
          .then(data => {
            setSentimentHistory(data.history);
            setTodaySentiment(data.today);
          })
          .catch(() => {});

        // Fetch worker collectives
        fetch(`${API_BASE}/worker-collectives`)
          .then(r => r.json())
          .then(data => setWorkerCollectives(data))
          .catch(() => {});

        // Fetch consumer groups
        fetch(`${API_BASE}/consumer-groups`)
          .then(r => r.json())
          .then(data => setConsumerGroups(data))
          .catch(() => {});

        // Fetch petitions
        fetch(`${API_BASE}/petitions`)
          .then(r => r.json())
          .then(data => setPetitions(data))
          .catch(() => {});

        // Fetch reports
        fetch(`${API_BASE}/reports`)
          .then(r => r.json())
          .then(data => setReports(data))
          .catch(() => {});

        // Fetch corporate map data
        fetch(`${API_BASE}/map-data`)
          .then(r => r.json())
          .then(data => setMapData(data))
          .catch(() => {});
      }, []);

      // Fetch buildings when ZIP changes
      const fetchBuildings = useCallback((zip) => {
        const code = zip || 'default';
        fetch(`${API_BASE}/buildings/${code}`)
          .then(r => r.json())
          .then(data => setBuildings(data))
          .catch(() => {});
      }, []);

      // Fetch messages when a building is selected
      useEffect(() => {
        if (selectedBuilding) {
          fetch(`${API_BASE}/buildings/${selectedBuilding}/messages`)
            .then(r => r.json())
            .then(data => setTenantMessages(data))
            .catch(() => {});
        }
      }, [selectedBuilding]);

      // Fetch messages when a collective is selected
      useEffect(() => {
        if (selectedCollective) {
          fetch(`${API_BASE}/worker-collectives/${selectedCollective}/messages`)
            .then(r => r.json())
            .then(data => setCollectiveMessages(data))
            .catch(() => {});
        }
      }, [selectedCollective]);

      // Fetch reports when filter changes
      useEffect(() => {
        const query = reportFilter !== 'all' ? `?type=${reportFilter}` : '';
        fetch(`${API_BASE}/reports${query}`)
          .then(r => r.json())
          .then(data => setReports(data))
          .catch(() => {});
      }, [reportFilter]);

      // ============================================
      // HELPERS
      // ============================================

      const showNotification = useCallback((message, type = 'success') => {
        setNotification({ message, type });
        setTimeout(() => setNotification(null), 3000);
      }, []);

      const calculateHours = (cost, wage) => Math.ceil(cost / wage);

      const handleZipSubmit = async (e) => {
        e.preventDefault();
        if (!zipCode || zipCode.length !== 5 || !/^\d{5}$/.test(zipCode)) {
          setZipError('Please enter a valid 5-digit ZIP code');
          showNotification('Invalid ZIP code format', 'error');
          return;
        }

        setLoading(true);
        setZipError(null);

        try {
          // Fetch location info from ZIP code API
          const locationInfo = await fetchZipData(zipCode);

          if (!locationInfo) {
            setZipError('ZIP code not found. Please check and try again.');
            showNotification('ZIP code not found', 'error');
            setLoading(false);
            return;
          }

          // Calculate local cost data
          const data = calculateLocalData(zipCode, locationInfo);
          setLocalData(data);
          showNotification(`Loaded data for ${data.area}`);
        } catch (error) {
          setZipError('Error fetching data. Please try again.');
          showNotification('Error loading data', 'error');
        } finally {
          setLoading(false);
        }
      };

      const handleSentimentVote = (vote) => {
        fetch(`${API_BASE}/sentiment/vote`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ vote }),
        })
          .then(r => r.json())
          .then(() => {
            setWorkSentiment(vote);
            setTodaySentiment(prev => ({
              ...prev,
              [vote === 'yes' ? 'willing' : 'unwilling']: prev[vote === 'yes' ? 'willing' : 'unwilling'] + 1,
              total: prev.total + 1
            }));
            showNotification('Response recorded anonymously');
          })
          .catch(() => showNotification('Failed to record vote', 'error'));
      };

      const handlePriceVote = (itemName, threshold, itemId) => {
        fetch(`${API_BASE}/price-resistance/${itemId}/vote`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ threshold: parseFloat(threshold) }),
        })
          .then(r => r.json())
          .then(() => {
            setPriceVotes({ ...priceVotes, [itemName]: threshold });
            showNotification(`Recorded: Stop buying ${itemName} at $${threshold}`);
          })
          .catch(() => showNotification('Failed to record vote', 'error'));
      };

      const handleJoinBuilding = (building) => {
        if (!joinedBuildings.includes(building.id)) {
          fetch(`${API_BASE}/buildings/${building.id}/join`, { method: 'POST' })
            .then(r => r.json())
            .then(() => {
              setJoinedBuildings([...joinedBuildings, building.id]);
              showNotification(`Joined tenant group at ${building.address}`);
            })
            .catch(() => showNotification('Failed to join', 'error'));
        }
      };

      const handleJoinCollective = (collective) => {
        if (!joinedCollectives.includes(collective.id)) {
          fetch(`${API_BASE}/worker-collectives/${collective.id}/join`, { method: 'POST' })
            .then(r => r.json())
            .then(() => {
              setJoinedCollectives([...joinedCollectives, collective.id]);
              showNotification(`Joined ${collective.company} worker collective`);
            })
            .catch(() => showNotification('Failed to join', 'error'));
        }
      };

      const handleJoinConsumerGroup = (group) => {
        if (!joinedConsumerGroups.includes(group.id)) {
          fetch(`${API_BASE}/consumer-groups/${group.id}/join`, { method: 'POST' })
            .then(r => r.json())
            .then(() => {
              setJoinedConsumerGroups([...joinedConsumerGroups, group.id]);
              showNotification(`Joined ${group.name}`);
            })
            .catch(() => showNotification('Failed to join', 'error'));
        }
      };

      const handleRefreshPetition = (petition) => {
        fetch(`${API_BASE}/petitions/${petition.id}/refresh`, { method: 'POST' })
          .then(r => r.json())
          .then(data => {
            setPetitions(petitions.map(p =>
              p.id === petition.id ? { ...p, signatures: data.signatures, goal: data.goal, status: data.status } : p
            ));
            if (data.success) {
              showNotification('Signature count updated from Change.org');
            } else {
              showNotification('Could not reach Change.org — showing cached data', 'warning');
            }
          })
          .catch(() => showNotification('Failed to refresh petition', 'error'));
      };

      const handleCreatePetition = () => {
        if (newPetition.title && newPetition.area && newPetition.changeorg_url) {
          fetch(`${API_BASE}/petitions`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(newPetition),
          })
            .then(r => {
              if (!r.ok) return r.json().then(err => { throw new Error(err.error); });
              return r.json();
            })
            .then(petition => {
              setPetitions([petition, ...petitions]);
              setNewPetition({ title: '', area: '', description: '', changeorg_url: '' });
              setShowPetitionForm(false);
              showNotification('Petition created successfully');
            })
            .catch(err => showNotification(err.message || 'Failed to create petition', 'error'));
        }
      };

      const handleSubmitReport = () => {
        if (newReport.name && newReport.issues.length > 0) {
          fetch(`${API_BASE}/reports`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              type: reportType,
              name: newReport.name,
              address: newReport.address,
              issues: newReport.issues,
              description: newReport.description,
            }),
          })
            .then(r => r.json())
            .then(result => {
              if (result.merged) {
                setReports(reports.map(r =>
                  r.id === result.id ? { ...r, reports: result.reports, lastReport: 'Just now' } : r
                ));
                showNotification('Report added to existing record');
              } else {
                setReports([result, ...reports]);
                showNotification('Report submitted successfully');
              }
              setNewReport({ name: '', address: '', issues: [], description: '', anonymous: true });
            })
            .catch(() => showNotification('Failed to submit report', 'error'));
        }
      };

      const handleCreateCollective = () => {
        if (newCollective.company && newCollective.industry) {
          fetch(`${API_BASE}/worker-collectives`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(newCollective),
          })
            .then(r => r.json())
            .then(collective => {
              if (collective.error) {
                showNotification(collective.error, 'error');
                return;
              }
              setWorkerCollectives([collective, ...workerCollectives]);
              setJoinedCollectives([...joinedCollectives, collective.id]);
              setNewCollective({ company: '', industry: '', issues: [], telegram_url: '' });
              setShowNewCollectiveForm(false);
              showNotification('Collective created - invite your coworkers!');
            })
            .catch(() => showNotification('Failed to create collective', 'error'));
        }
      };

      const handleImpactCalculate = async (e) => {
        e.preventDefault();
        const startYear = parseInt(impactStartYear, 10);
        const startSalary = parseFloat(impactStartSalary);
        const currentSalary = parseFloat(impactCurrentSalary);
        const currentRent = parseFloat(impactCurrentRent) || 0;
        const currentYear = new Date().getFullYear();

        if (!startYear || startYear < 1975 || startYear > currentYear) {
          setImpactError(`Enter a valid start year (1975-${currentYear})`);
          return;
        }
        if (!startSalary || startSalary <= 0) {
          setImpactError('Enter your starting salary');
          return;
        }
        if (!currentSalary || currentSalary <= 0) {
          setImpactError('Enter your current salary');
          return;
        }
        setImpactLoading(true);
        setImpactError(null);
        try {
          const resp = await fetch(`${API_BASE}/impact-calculator`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              start_year: startYear,
              start_salary: startSalary,
              current_salary: currentSalary,
              current_rent: currentRent
            })
          });
          if (!resp.ok) {
            const err = await resp.json();
            throw new Error(err.error || 'Calculation failed');
          }
          const data = await resp.json();
          setImpactResults(data);
          showNotification('Impact calculated successfully', 'success');
        } catch (err) {
          setImpactError(err.message || 'Failed to calculate');
          showNotification('Calculation error', 'error');
        } finally {
          setImpactLoading(false);
        }
      };

      // The Shelter Tax calculation
      const calculateShelterTax = (e) => {
        e.preventDefault();
        const rent = parseFloat(shelterRent);
        const salary = parseFloat(shelterSalary);

        if (!rent || rent <= 0 || !salary || salary <= 0) {
          setShelterResults(null);
          return;
        }

        // Calculate hours spent on rent per month
        // Hours_Rent_Now = (Current_Rent * 12) / (Current_Salary / 2080)
        // This gives annual rent hours, divide by 12 for monthly
        const hourlyWage = salary / 2080; // 2080 = 52 weeks * 40 hours
        const hoursRentNow = rent / hourlyWage;

        // In 1985, Rent-to-Income ratio was 25% (Gross)
        // Hours_Rent_1985 = 160 * 0.25 = 40 Hours per month
        const hoursRent1985 = 40;
        const fullTimeMonth = 160; // hours

        const extraHours = hoursRentNow - hoursRent1985;
        const percentOfMonth = (hoursRentNow / fullTimeMonth) * 100;

        setShelterResults({
          hoursRentNow: Math.round(hoursRentNow * 10) / 10,
          hoursRent1985,
          extraHours: Math.round(extraHours * 10) / 10,
          fullTimeMonth,
          percentOfMonth: Math.round(percentOfMonth),
          hourlyWage: Math.round(hourlyWage * 100) / 100
        });
      };

      // Profit Stopwatch calculation
      const industryProfitMargins = {
        'Technology': 0.25,
        'Retail': 0.08,
        'Healthcare': 0.12,
        'Manufacturing': 0.15,
        'Food Service': 0.06,
        'Finance': 0.22,
        'Construction': 0.10,
        'Hospitality': 0.09
      };

      const handleStopwatchCalculate = (e) => {
        e.preventDefault();
        const wage = parseFloat(hourlyWage);
        const hours = parseFloat(hoursWorkedPerDay);

        if (!wage || wage <= 0 || !hours || hours <= 0) {
          setStopwatchResults(null);
          return;
        }

        const profitMargin = industryProfitMargins[industry];
        const profitPerHour = wage * profitMargin;
        const breakEvenHours = hours * (1 - profitMargin);
        const stolenHours = hours - breakEvenHours;

        // Convert hours to time (e.g., 6.5 hours -> 6:30 AM if starting at 9 AM)
        const startHour = 9; // 9 AM start
        const breakEvenTime = startHour + breakEvenHours;
        const breakEvenHour = Math.floor(breakEvenTime);
        const breakEvenMin = Math.round((breakEvenTime - breakEvenHour) * 60);
        const breakEvenTimeStr = `${breakEvenHour > 12 ? breakEvenHour - 12 : breakEvenHour}:${breakEvenMin.toString().padStart(2, '0')} ${breakEvenHour >= 12 ? 'PM' : 'AM'}`;

        setStopwatchResults({
          profitPerHour: profitPerHour.toFixed(2),
          breakEvenHours: breakEvenHours.toFixed(2),
          stolenHours: stolenHours.toFixed(2),
          breakEvenTime: breakEvenTimeStr,
          profitMargin: (profitMargin * 100).toFixed(0),
          stolenAngle: (stolenHours / hours) * 360,
          breakEvenAngle: (breakEvenHours / hours) * 360
        });
      };

      // Calendar of Servitude calculation
      const handleCalendarCalculate = (e) => {
        e.preventDefault();
        const rent = parseFloat(monthlyRent);
        const income = parseFloat(monthlyIncome);

        if (!rent || rent <= 0 || !income || income <= 0) {
          setCalendarResults(null);
          return;
        }

        const rentDays = Math.ceil(30 * (rent / income));
        const freedomDay = rentDays + 1;

        setCalendarResults({
          rentDays,
          freedomDay,
          freeDays: 30 - rentDays,
          rentPercent: ((rent / income) * 100).toFixed(1)
        });
      };

      // One Bad Day emergency toggle
      const handleEmergencyToggle = (emergencyType) => {
        const emergencyCosts = {
          'Flat Tire': 300,
          'ER Visit': 1200,
          'Broken Phone': 400
        };

        const savings = parseFloat(currentSavings);
        if (!savings || savings < 0) {
          setEmergencyResults(null);
          return;
        }

        // Toggle off if same emergency clicked again
        if (selectedEmergency === emergencyType) {
          setSelectedEmergency(null);
          setEmergencyResults({ savings, deficit: 0, isNegative: false });
          return;
        }

        setSelectedEmergency(emergencyType);
        const cost = emergencyCosts[emergencyType];
        const deficit = savings - cost;

        setEmergencyResults({
          savings,
          cost,
          deficit,
          isNegative: deficit < 0,
          emergencyType
        });
      };

      const toggleReportIssue = (issue) => {
        setNewReport(prev => ({
          ...prev,
          issues: prev.issues.includes(issue)
            ? prev.issues.filter(i => i !== issue)
            : [...prev.issues, issue]
        }));
      };

      const toggleCollectiveIssue = (issue) => {
        setNewCollective(prev => ({
          ...prev,
          issues: prev.issues.includes(issue)
            ? prev.issues.filter(i => i !== issue)
            : [...prev.issues, issue]
        }));
      };

      // Calculations (using after-tax net wage)
      const effectiveWage = localData ? localData.netWage : 0;
      const totalMonthlyHours = localData ?
        calculateHours(localData.rent, effectiveWage) +
        calculateHours(localData.food, effectiveWage) +
        calculateHours(localData.healthcare, effectiveWage) +
        calculateHours(localData.transport, effectiveWage) +
        calculateHours(localData.utilities, effectiveWage) : 0;

      const availableHours = 160;
      const deficit = availableHours - totalMonthlyHours;
      const weeksToAffordMonth = localData ? (totalMonthlyHours / 40).toFixed(1) : 0;

      // ============================================
      // STYLES
      // ============================================

      const colors = {
        bg: colorConfig.bg || '#0a0a0a',
        bgLight: colorConfig.bgLight || '#111',
        bgLighter: '#1a1a1a',
        border: colorConfig.border || '#222',
        borderLight: '#333',
        text: colorConfig.text || '#e8e8e8',
        textMuted: colorConfig.textMuted || '#888',
        textDim: colorConfig.textDim || '#666',
        textDimmer: '#555',
        textDimmest: '#444',
        primary: colorConfig.primary || '#ff3333',
        primaryDark: '#cc2929',
        success: colorConfig.success || '#33ff33',
        successDark: '#29cc29',
        warning: colorConfig.warning || '#ffaa00',
        purple: '#aa00ff',
      };

      const styles = {
        container: {
          minHeight: '100vh',
          backgroundColor: colors.bg,
          color: colors.text,
          fontFamily: fontConfig.primary || "'IBM Plex Mono', 'Courier New', monospace",
          fontSize: '14px',
          lineHeight: '1.6'
        },
        header: {
          borderBottom: `2px solid ${colors.primary}`,
          padding: '20px 40px',
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'center',
          flexWrap: 'wrap',
          gap: '15px'
        },
        nav: {
          display: 'flex',
          borderBottom: `1px solid ${colors.border}`,
          backgroundColor: colors.bgLight
        },
        navButton: (active) => ({
          flex: 1,
          padding: '16px 20px',
          backgroundColor: active ? colors.bgLighter : 'transparent',
          color: active ? colors.primary : colors.textDim,
          border: 'none',
          borderBottom: active ? `2px solid ${colors.primary}` : '2px solid transparent',
          cursor: 'pointer',
          fontFamily: 'inherit',
          fontSize: '12px',
          textTransform: 'uppercase',
          letterSpacing: '2px',
          fontWeight: active ? 700 : 400,
          transition: 'all 0.2s'
        }),
        subNav: {
          display: 'flex',
          gap: '10px',
          marginBottom: '30px',
          flexWrap: 'wrap'
        },
        subNavButton: (active) => ({
          padding: '10px 15px',
          backgroundColor: active ? colors.primary : 'transparent',
          color: active ? '#000' : colors.textMuted,
          border: `1px solid ${active ? colors.primary : colors.borderLight}`,
          cursor: 'pointer',
          fontFamily: 'inherit',
          fontSize: '11px',
          textTransform: 'uppercase',
          letterSpacing: '1px',
          transition: 'all 0.15s'
        }),
        main: {
          padding: '40px',
          maxWidth: '1200px',
          margin: '0 auto'
        },
        sectionHeader: {
          fontSize: '11px',
          color: colors.textDimmer,
          textTransform: 'uppercase',
          letterSpacing: '3px',
          marginBottom: '20px',
          borderBottom: `1px solid ${colors.border}`,
          paddingBottom: '10px'
        },
        card: {
          backgroundColor: colors.bgLight,
          border: `1px solid ${colors.border}`,
          padding: '25px',
          marginBottom: '15px'
        },
        input: {
          backgroundColor: colors.bgLighter,
          border: `1px solid ${colors.borderLight}`,
          color: '#fff',
          padding: '12px',
          fontFamily: 'inherit',
          fontSize: '14px',
          width: '100%',
          boxSizing: 'border-box'
        },
        button: (variant = 'primary') => ({
          padding: '12px 20px',
          backgroundColor: variant === 'primary' ? colors.primary : 'transparent',
          color: variant === 'primary' ? '#000' : colors.primary,
          border: variant === 'primary' ? 'none' : `1px solid ${colors.primary}`,
          cursor: 'pointer',
          fontFamily: 'inherit',
          fontWeight: 700,
          textTransform: 'uppercase',
          letterSpacing: '1px',
          fontSize: '11px',
          transition: 'all 0.15s'
        }),
        badge: (color) => ({
          display: 'inline-block',
          padding: '3px 8px',
          backgroundColor: `${color}20`,
          color: color,
          fontSize: '10px',
          textTransform: 'uppercase',
          marginRight: '8px'
        }),
        grid: {
          display: 'grid',
          gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',
          gap: '15px'
        },
        modal: {
          position: 'fixed',
          inset: 0,
          backgroundColor: 'rgba(0,0,0,0.9)',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          zIndex: 1000,
          padding: '20px'
        },
        notification: (type) => ({
          position: 'fixed',
          top: '20px',
          right: '20px',
          padding: '15px 25px',
          backgroundColor: type === 'success' ? '#1a3d1a' : '#3d1a1a',
          border: `1px solid ${type === 'success' ? colors.success : colors.primary}`,
          color: type === 'success' ? colors.success : colors.primary,
          zIndex: 1001,
          fontFamily: 'inherit',
          fontSize: '12px',
          maxWidth: '300px'
        })
      };

      // ============================================
      // RENDER
      // ============================================

      return (
        <div style={styles.container}>
          {/* Notification */}
          {notification && (
            <div style={styles.notification(notification.type)} className="notification-enter">
              {notification.message}
            </div>
          )}

          {/* Header */}
          <header style={styles.header}>
            <div>
              <h1 style={{ margin: 0, fontSize: '24px', fontWeight: 700, letterSpacing: '-0.5px', color: '#ffffff', fontFamily: fontConfig.heading }}>
                {textConfig.header_title}<span style={{ color: colors.primary }}>_</span>{textConfig.header_title_suffix}
              </h1>
              <p style={{ margin: '4px 0 0 0', fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '2px' }}>
                {textConfig.header_tagline}
              </p>
            </div>
            <div style={{ fontSize: '11px', color: colors.textDimmer, textAlign: 'right' }}>
              <div>{textConfig.header_no_tracking}</div>
              <div style={{ color: colors.primary, marginTop: '4px' }}>{textConfig.header_workers_first}</div>
            </div>
          </header>

          {/* Navigation */}
          <nav style={styles.nav}>
            {[
              { key: 'information', label: textConfig.nav_information },
              { key: 'formation', label: textConfig.nav_formation },
              { key: 'accountability', label: textConfig.nav_accountability }
            ].map(tab => (
              <button
                key={tab.key}
                onClick={() => { setActiveTab(tab.key); if (tab.key === 'formation') setActiveSubTab('sentiment'); }}
                style={styles.navButton(activeTab === tab.key)}
              >
                {tab.label}
              </button>
            ))}
          </nav>

          {/* Main Content */}
          <main style={styles.main}>

            {/* ==================== INFORMATION TAB ==================== */}
            {activeTab === 'information' && (
              <div>
                {/* Standard of Living Calculator */}
                <section style={{ marginBottom: '60px' }}>
                  <h2 style={styles.sectionHeader}>{textConfig.sol_section_title}</h2>

                  <form onSubmit={handleZipSubmit} style={{ marginBottom: '30px' }}>
                    <div style={{ display: 'flex', gap: '10px', alignItems: 'center', flexWrap: 'wrap' }}>
                      <label style={{ color: colors.textMuted }}>{textConfig.sol_zip_label}</label>
                      <input
                        type="text"
                        value={zipCode}
                        onChange={(e) => {
                          setZipCode(e.target.value.replace(/\D/g, '').slice(0, 5));
                          setZipError(null);
                        }}
                        placeholder={textConfig.sol_zip_placeholder}
                        maxLength={5}
                        style={{
                          ...styles.input,
                          width: '120px',
                          borderColor: zipError ? colors.primary : colors.borderLight
                        }}
                        disabled={loading}
                      />
                      <button
                        type="submit"
                        style={{
                          ...styles.button('primary'),
                          opacity: loading ? 0.7 : 1,
                          cursor: loading ? 'wait' : 'pointer'
                        }}
                        disabled={loading}
                      >
                        {loading ? textConfig.sol_loading_btn : textConfig.sol_calculate_btn}
                      </button>
                    </div>
                    {zipError && (
                      <p style={{ fontSize: '12px', color: colors.primary, marginTop: '8px' }}>
                        {zipError}
                      </p>
                    )}
                    <p style={{ fontSize: '11px', color: colors.textDimmest, marginTop: '8px' }}>
                      {textConfig.sol_helper_text}
                    </p>
                  </form>

                  {localData && (
                    <div style={styles.card}>
                      {/* Key Metric */}
                      <div style={{
                        textAlign: 'center',
                        padding: '30px',
                        marginBottom: '30px',
                        backgroundColor: deficit < 0 ? '#1a0505' : '#051a05',
                        border: `2px solid ${deficit < 0 ? colors.primary : colors.success}`
                      }}>
                        <div style={{ fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '10px' }}>
                          {localData.area}
                        </div>
                        <div style={{ fontSize: '72px', fontWeight: 700, color: deficit < 0 ? colors.primary : colors.success, lineHeight: 1 }}>
                          {weeksToAffordMonth}
                        </div>
                        <div style={{ fontSize: '14px', color: colors.textMuted, marginTop: '10px' }}>
                          {textConfig.sol_weeks_label}
                        </div>
                        {deficit < 0 && (
                          <div style={{ marginTop: '15px', padding: '12px', backgroundColor: '#ff333320', color: '#ff6666', fontSize: '12px' }}>
                            ⚠ {textConfig.sol_deficit_label} <strong>{Math.abs(deficit)} </strong>{textConfig.sol_deficit_suffix}
                          </div>
                        )}
                        {deficit >= 0 && (
                          <div style={{ marginTop: '15px', padding: '12px', backgroundColor: '#33ff3320', color: '#66ff66', fontSize: '12px' }}>
                            ✓ {textConfig.sol_surplus_prefix} {deficit} {textConfig.sol_surplus_suffix}
                          </div>
                        )}
                      </div>

                      {/* Wage & Tax Breakdown */}
                      <div style={{ padding: '15px 0', borderBottom: `1px solid ${colors.border}`, marginBottom: '15px' }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>
                          <span style={{ color: colors.textMuted }}>{textConfig.sol_gross_wage}</span>
                          <span style={{ fontWeight: 700, fontSize: '18px' }}>${localData.medianWage.toFixed(2)}</span>
                        </div>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '4px' }}>
                          <span style={{ color: colors.textDimmer, fontSize: '12px', paddingLeft: '10px' }}>{textConfig.sol_federal_tax}</span>
                          <span style={{ color: colors.textDim, fontSize: '12px' }}>-${(localData.taxData.federalTax / 2080).toFixed(2)}/hr</span>
                        </div>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '4px' }}>
                          <span style={{ color: colors.textDimmer, fontSize: '12px', paddingLeft: '10px' }}>{textConfig.sol_state_tax} ({localData.taxData.stateCode})</span>
                          <span style={{ color: colors.textDim, fontSize: '12px' }}>-${(localData.taxData.stateTax / 2080).toFixed(2)}/hr</span>
                        </div>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>
                          <span style={{ color: colors.textDimmer, fontSize: '12px', paddingLeft: '10px' }}>{textConfig.sol_fica}</span>
                          <span style={{ color: colors.textDim, fontSize: '12px' }}>-${(localData.taxData.ficaTax / 2080).toFixed(2)}/hr</span>
                        </div>
                        <div style={{ display: 'flex', justifyContent: 'space-between', padding: '8px 0', borderTop: `1px dashed ${colors.border}` }}>
                          <span style={{ color: colors.warning, fontWeight: 700 }}>{textConfig.sol_after_tax}</span>
                          <span style={{ fontWeight: 700, fontSize: '18px', color: colors.warning }}>${localData.netWage.toFixed(2)}</span>
                        </div>
                        <div style={{ textAlign: 'right', fontSize: '11px', color: colors.textDimmest }}>
                          {textConfig.sol_effective_rate} {(localData.taxData.effectiveRate * 100).toFixed(1)}%
                        </div>
                      </div>

                      <div style={{ fontSize: '11px', color: colors.textDimmer, marginBottom: '10px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                        {textConfig.sol_hours_label}
                      </div>

                      {[
                        { label: textConfig.sol_rent, cost: localData.rent, icon: '🏠' },
                        { label: textConfig.sol_food, cost: localData.food, icon: '🍎' },
                        { label: textConfig.sol_healthcare, cost: localData.healthcare, icon: '🏥' },
                        { label: textConfig.sol_transport, cost: localData.transport, icon: '🚗' },
                        { label: textConfig.sol_utilities, cost: localData.utilities, icon: '💡' },
                      ].map(item => {
                        const hours = calculateHours(item.cost, effectiveWage);
                        const pct = (hours / totalMonthlyHours) * 100;
                        return (
                          <div key={item.label} style={{ marginBottom: '12px' }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '4px' }}>
                              <span style={{ color: colors.textMuted }}>{item.icon} {item.label}</span>
                              <div style={{ display: 'flex', gap: '20px', alignItems: 'center' }}>
                                <span style={{ color: colors.textDimmer, fontSize: '12px' }}>${item.cost}</span>
                                <span style={{ color: '#fff', fontWeight: 700, minWidth: '70px', textAlign: 'right' }}>
                                  {hours} hrs
                                </span>
                              </div>
                            </div>
                            <div style={{ height: '4px', backgroundColor: colors.border, borderRadius: '2px' }}>
                              <div style={{ height: '100%', width: `${pct}%`, backgroundColor: colors.primary, borderRadius: '2px' }} />
                            </div>
                          </div>
                        );
                      })}

                      <div style={{ display: 'flex', justifyContent: 'space-between', padding: '15px 0', borderTop: `2px solid ${colors.borderLight}`, marginTop: '15px' }}>
                        <span style={{ fontWeight: 700 }}>TOTAL REQUIRED</span>
                        <span style={{ fontWeight: 700, color: colors.primary, fontSize: '18px' }}>{totalMonthlyHours} hrs</span>
                      </div>

                      <div style={{ display: 'flex', justifyContent: 'space-between', padding: '10px 0', color: colors.textDim }}>
                        <span>Available (40hr/wk × 4)</span>
                        <span>{availableHours} hrs</span>
                      </div>

                      <div style={{ display: 'flex', justifyContent: 'space-between', padding: '10px 0', fontWeight: 700, fontSize: '16px', color: deficit < 0 ? colors.primary : colors.success }}>
                        <span>{deficit < 0 ? 'MONTHLY DEFICIT' : 'MONTHLY SURPLUS'}</span>
                        <span>{deficit} hrs</span>
                      </div>

                      <div style={{ marginTop: '20px', padding: '15px', backgroundColor: colors.bg, fontSize: '11px', color: colors.textDimmest }}>
                        <div style={{ marginBottom: '8px' }}>
                          <strong>Data quality:</strong>{' '}
                          <span style={{ color: localData.msa ? colors.success : colors.warning }}>
                            {localData.dataQuality}
                          </span>
                          {localData.msa && (
                            <span style={{ color: colors.textDimmer }}> — {localData.msa}</span>
                          )}
                        </div>
                        <strong>Sources:</strong> BLS OEWS Q3 2024 (wages), HUD FMR FY2024 (housing), USDA Thrifty Food Plan (food), Healthcare.gov (insurance), AAA (transport), EIA (utilities), IRS 2024 brackets (federal tax), Tax Foundation 2024 (state tax), SSA (FICA)
                      </div>
                    </div>
                  )}

                  {loading && (
                    <div style={{
                      ...styles.card,
                      textAlign: 'center',
                      padding: '60px'
                    }}>
                      <div style={{ fontSize: '24px', marginBottom: '15px' }}>⏳</div>
                      <div style={{ color: colors.textMuted }}>Loading data for ZIP {zipCode}...</div>
                    </div>
                  )}
                </section>

                {/* Economic Impact Calculator */}
                <section style={{ marginBottom: '60px' }}>
                  <h2 style={styles.sectionHeader}>{textConfig.impact_section_title}</h2>
                  <p style={{ color: colors.textDim, marginBottom: '20px', fontSize: '13px' }}>
                    {textConfig.impact_description}
                  </p>

                  {/* Disclaimer */}
                  <div style={{
                    padding: '15px 20px',
                    marginBottom: '20px',
                    backgroundColor: 'rgba(255, 165, 0, 0.08)',
                    border: `1px solid ${colors.warning}`,
                    fontSize: '12px',
                    color: colors.textDim,
                    lineHeight: '1.6'
                  }}>
                    <strong style={{ color: colors.text }}>Disclaimer:</strong> This calculator provides educational estimates based on aggregate economic data. Your individual "Fair Value" represents what you would have earned if wages had tracked productivity gains since the year you started working. These calculations use interpolated growth curves based on CPI inflation and seniority factors, normalized to your actual salary endpoints. Results are illustrative, not financial advice. Data sources: Economic Policy Institute, Bureau of Labor Statistics, Federal Reserve, Census Bureau.
                  </div>

                  <form onSubmit={handleImpactCalculate} style={{ marginBottom: '30px' }}>
                    <div style={{ display: 'flex', gap: '10px', alignItems: 'center', flexWrap: 'wrap', marginBottom: '15px' }}>
                      <label style={{ color: colors.textMuted, fontSize: '11px' }}>{textConfig.impact_start_year_label}</label>
                      <input
                        type="number"
                        value={impactStartYear}
                        onChange={(e) => { setImpactStartYear(e.target.value); setImpactError(null); }}
                        placeholder={textConfig.impact_start_year_placeholder}
                        min={1975}
                        max={new Date().getFullYear()}
                        style={{ ...styles.input, width: '100px' }}
                        disabled={impactLoading}
                      />
                      <label style={{ color: colors.textMuted, fontSize: '11px' }}>{textConfig.impact_start_salary_label}</label>
                      <input
                        type="number"
                        value={impactStartSalary}
                        onChange={(e) => { setImpactStartSalary(e.target.value); setImpactError(null); }}
                        placeholder={textConfig.impact_start_salary_placeholder}
                        min={1}
                        style={{ ...styles.input, width: '120px' }}
                        disabled={impactLoading}
                      />
                    </div>
                    <div style={{ display: 'flex', gap: '10px', alignItems: 'center', flexWrap: 'wrap' }}>
                      <label style={{ color: colors.textMuted, fontSize: '11px' }}>{textConfig.impact_current_salary_label}</label>
                      <input
                        type="number"
                        value={impactCurrentSalary}
                        onChange={(e) => { setImpactCurrentSalary(e.target.value); setImpactError(null); }}
                        placeholder={textConfig.impact_current_salary_placeholder}
                        min={1}
                        style={{ ...styles.input, width: '120px' }}
                        disabled={impactLoading}
                      />
                      <label style={{ color: colors.textMuted, fontSize: '11px' }}>{textConfig.impact_current_rent_label}</label>
                      <input
                        type="number"
                        value={impactCurrentRent}
                        onChange={(e) => { setImpactCurrentRent(e.target.value); setImpactError(null); }}
                        placeholder={textConfig.impact_current_rent_placeholder}
                        min={0}
                        style={{ ...styles.input, width: '120px' }}
                        disabled={impactLoading}
                      />
                      <button
                        type="submit"
                        style={{
                          ...styles.button('primary'),
                          opacity: impactLoading ? 0.7 : 1,
                          cursor: impactLoading ? 'wait' : 'pointer'
                        }}
                        disabled={impactLoading}
                      >
                        {impactLoading ? textConfig.sol_loading_btn : textConfig.impact_calculate_btn}
                      </button>
                    </div>
                    {impactError && (
                      <p style={{ fontSize: '12px', color: colors.primary, marginTop: '8px' }}>{impactError}</p>
                    )}
                    <p style={{ fontSize: '11px', color: colors.textDimmest, marginTop: '8px' }}>
                      Calculates year-over-year economic impact using rolling productivity and wage data from 1975-2024 — data from EPI, BLS, Federal Reserve, Census Bureau
                    </p>
                  </form>

                  {impactResults && (
                    <div>
                      {/* Hero total */}
                      <div style={{
                        textAlign: 'center',
                        padding: '40px 30px',
                        marginBottom: '20px',
                        backgroundColor: '#1a0a0a',
                        border: `2px solid ${colors.textMuted}`
                      }}>
                        <div style={{ fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '10px' }}>
                          {textConfig.impact_cumulative_label} ({impactResults.inputs.years_worked} years)
                        </div>
                        <div style={{ fontSize: '64px', fontWeight: 700, color: colors.text, lineHeight: 1 }}>
                          ${impactResults.summary.cumulative_economic_impact.toLocaleString()}
                        </div>
                        <div style={{ fontSize: '14px', color: colors.textMuted, marginTop: '12px' }}>
                          {textConfig.impact_years_label}: <strong style={{ color: colors.text, fontSize: '18px' }}>{impactResults.summary.years_of_work_equivalent}</strong> years of labor
                        </div>
                      </div>

                      {/* Productivity vs Wage Growth Comparison */}
                      <div style={{
                        ...styles.card,
                        display: 'flex',
                        alignItems: 'center',
                        gap: '30px',
                        padding: '25px',
                        marginBottom: '15px',
                        borderLeft: `3px solid ${colors.warning}`,
                        flexWrap: 'wrap'
                      }}>
                        <div style={{ flex: '1 1 auto' }}>
                          <div style={{ fontSize: '10px', color: colors.textDimmer, textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px' }}>
                            Productivity vs. Wage Growth
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textDim }}>
                            {impactResults.metrics.gap.detail}
                          </div>
                        </div>
                        <div style={{ display: 'flex', gap: '20px', alignItems: 'baseline', flexShrink: 0 }}>
                          <div style={{ textAlign: 'center' }}>
                            <div style={{ fontSize: '10px', color: colors.textDimmer, marginBottom: '4px' }}>PRODUCTIVITY</div>
                            <div style={{ fontSize: '24px', fontWeight: 700, color: colors.success }}>{impactResults.metrics.productivity.value}</div>
                            <div style={{ fontSize: '10px', color: colors.textDimmest }}>growth</div>
                          </div>
                          <div style={{ fontSize: '18px', color: colors.textDimmer }}>&rarr;</div>
                          <div style={{ textAlign: 'center' }}>
                            <div style={{ fontSize: '10px', color: colors.textDimmer, marginBottom: '4px' }}>WAGES</div>
                            <div style={{ fontSize: '24px', fontWeight: 700, color: colors.warning }}>{impactResults.metrics.wages.value}</div>
                            <div style={{ fontSize: '10px', color: colors.textDimmest }}>growth</div>
                          </div>
                          <div style={{ textAlign: 'center', padding: '8px 12px', backgroundColor: '#ffa50020', marginLeft: '5px' }}>
                            <div style={{ fontSize: '10px', color: colors.textDimmer, marginBottom: '4px' }}>GAP</div>
                            <div style={{ fontSize: '24px', fontWeight: 700, color: colors.warning }}>{impactResults.metrics.gap.value}</div>
                            <div style={{ fontSize: '10px', color: colors.textDimmest }}>divergence</div>
                          </div>
                        </div>
                      </div>

                      {/* 2 Impact Metric Cards */}
                      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))', gap: '15px', marginBottom: '20px' }}>
                        <div style={{
                          ...styles.card,
                          borderLeft: `3px solid ${colors.warning}`,
                          padding: '20px'
                        }}>
                          <div style={{ fontSize: '10px', color: colors.textDimmer, textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px' }}>
                            ▲ {textConfig.impact_unrealized_label}
                          </div>
                          <div style={{ fontSize: '28px', fontWeight: 700, color: colors.warning, marginBottom: '8px' }}>
                            ${impactResults.summary.unrealized_productivity_gains.toLocaleString()}
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textDim }}>
                            Value you would have earned if wages had tracked productivity growth over your career
                          </div>
                        </div>
                        <div style={{
                          ...styles.card,
                          borderLeft: `3px solid #ff6644`,
                          padding: '20px'
                        }}>
                          <div style={{ fontSize: '10px', color: colors.textDimmer, textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px' }}>
                            ▬ {textConfig.impact_rent_label}
                          </div>
                          <div style={{ fontSize: '28px', fontWeight: 700, color: '#ff6644', marginBottom: '8px' }}>
                            ${impactResults.summary.excess_rent_burden.toLocaleString()}
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textDim }}>
                            {impactResults.metrics.rent.detail}
                          </div>
                        </div>
                      </div>

                      {/* Housing Opportunity Cost */}
                      {impactResults.metrics.housing && (
                        <div style={{
                          ...styles.card,
                          borderLeft: `3px solid #ff4444`,
                          padding: '20px',
                          marginBottom: '15px'
                        }}>
                          <div style={{ fontSize: '10px', color: colors.textDimmer, textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px' }}>
                            🏠 {impactResults.metrics.housing.label}
                          </div>
                          <div style={{ fontSize: '28px', fontWeight: 700, color: '#ff4444', marginBottom: '8px' }}>
                            {impactResults.metrics.housing.value}
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textDim }}>
                            {impactResults.metrics.housing.detail}
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textDimmest, marginTop: '8px' }}>
                            Estimated median home price at your income: ${impactResults.metrics.housing.median_home_price.toLocaleString()}
                          </div>
                        </div>
                      )}

                      {/* Time Buy-Back Simulator */}
                      <div style={{
                        ...styles.card,
                        padding: '25px',
                        marginBottom: '15px',
                        backgroundColor: '#0a1a0a',
                        borderLeft: `3px solid ${colors.success}`
                      }}>
                        <div style={{ fontSize: '14px', fontWeight: 700, color: colors.text, marginBottom: '15px' }}>
                          ⚡ Union Negotiation Simulator
                        </div>
                        <div style={{ marginBottom: '20px' }}>
                          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>
                            <span style={{ fontSize: '12px', color: colors.textMuted }}>Raise Percentage:</span>
                            <span style={{ fontSize: '18px', fontWeight: 700, color: colors.success }}>{unionRaisePercent}%</span>
                          </div>
                          <input
                            type="range"
                            min="0"
                            max="30"
                            step="1"
                            value={unionRaisePercent}
                            onChange={(e) => setUnionRaisePercent(parseInt(e.target.value))}
                            style={{
                              width: '100%',
                              height: '8px',
                              borderRadius: '4px',
                              outline: 'none',
                              background: `linear-gradient(to right, ${colors.success} 0%, ${colors.success} ${(unionRaisePercent / 30) * 100}%, #333 ${(unionRaisePercent / 30) * 100}%, #333 100%)`,
                              WebkitAppearance: 'none',
                              appearance: 'none',
                              cursor: 'pointer'
                            }}
                          />
                        </div>
                        <div style={{ padding: '15px', backgroundColor: colors.bg, borderRadius: '4px' }}>
                          <div style={{ fontSize: '11px', color: colors.textDimmer, marginBottom: '8px' }}>
                            IF YOU NEGOTIATED A {unionRaisePercent}% RAISE THROUGH COLLECTIVE BARGAINING:
                          </div>
                          <div style={{ fontSize: '13px', color: colors.text, marginBottom: '6px' }}>
                            New Annual Salary: <strong style={{ color: colors.success }}>
                              ${(impactResults.inputs.current_salary * (1 + unionRaisePercent / 100)).toLocaleString(undefined, { maximumFractionDigits: 0 })}
                            </strong>
                          </div>
                          <div style={{ fontSize: '13px', color: colors.text, marginBottom: '6px' }}>
                            Monthly Raise: <strong style={{ color: colors.success }}>
                              ${((impactResults.inputs.current_salary * (unionRaisePercent / 100)) / 12).toLocaleString(undefined, { maximumFractionDigits: 0 })}
                            </strong>
                          </div>
                          <div style={{ fontSize: '13px', color: colors.text }}>
                            Hours of Life Per Month "Bought Back": <strong style={{ color: colors.success }}>
                              {(() => {
                                const currentMonthlyIncome = impactResults.inputs.current_salary / 12;
                                const newMonthlyIncome = currentMonthlyIncome * (1 + unionRaisePercent / 100);
                                const monthlyRaise = newMonthlyIncome - currentMonthlyIncome;
                                const hourlyWage = impactResults.inputs.current_salary / 2080; // Assume 2080 hours/year
                                const hoursBoughtBack = monthlyRaise / hourlyWage;
                                return hoursBoughtBack.toFixed(1);
                              })()}
                            </strong> hours
                          </div>
                          <div style={{ fontSize: '10px', color: colors.textDimmest, marginTop: '10px', fontStyle: 'italic' }}>
                            "Buying back time" means reclaiming hours you would otherwise need to work to maintain your current standard of living. A raise gives you the same purchasing power in fewer hours.
                          </div>
                        </div>
                      </div>

                      {/* Inflation-Adjusted Resume */}
                      <div style={{
                        ...styles.card,
                        padding: '20px',
                        marginBottom: '15px'
                      }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '15px' }}>
                          <div style={{ fontSize: '14px', fontWeight: 700, color: colors.text }}>
                            📊 Your Inflation-Adjusted Resume
                          </div>
                          <button
                            onClick={() => setShowInflationResume(!showInflationResume)}
                            style={{
                              ...styles.button('secondary'),
                              padding: '6px 12px',
                              fontSize: '11px'
                            }}
                          >
                            {showInflationResume ? 'Hide' : 'Show'}
                          </button>
                        </div>
                        {showInflationResume && (
                          <div style={{ overflowX: 'auto' }}>
                            <table style={{
                              width: '100%',
                              borderCollapse: 'collapse',
                              fontSize: '11px',
                              color: colors.textMuted
                            }}>
                              <thead>
                                <tr style={{ borderBottom: `1px solid ${colors.border}` }}>
                                  <th style={{ padding: '8px', textAlign: 'left', color: colors.textDimmer }}>Year</th>
                                  <th style={{ padding: '8px', textAlign: 'right', color: colors.textDimmer }}>Nominal $</th>
                                  <th style={{ padding: '8px', textAlign: 'right', color: colors.textDimmer }}>Inflation-Adjusted $ (2024)</th>
                                  <th style={{ padding: '8px', textAlign: 'right', color: colors.textDimmer }}>Real Value Change</th>
                                </tr>
                              </thead>
                              <tbody>
                                {impactResults.yearly_breakdown.map((yearData, idx) => {
                                  const currentYearCPI = 1.033; // 2024 baseline
                                  const yearCPI = 1 + (yearData.year - 2024) * 0.03; // Rough approximation
                                  const inflationAdjusted = yearData.income / yearCPI * currentYearCPI;
                                  const previousYear = idx > 0 ? impactResults.yearly_breakdown[idx - 1] : null;
                                  const changePercent = previousYear
                                    ? ((inflationAdjusted - (previousYear.income / (1 + (previousYear.year - 2024) * 0.03) * currentYearCPI)) / (previousYear.income / (1 + (previousYear.year - 2024) * 0.03) * currentYearCPI) * 100).toFixed(1)
                                    : '0.0';
                                  return (
                                    <tr key={yearData.year} style={{ borderBottom: `1px solid ${colors.border}` }}>
                                      <td style={{ padding: '8px' }}>{yearData.year}</td>
                                      <td style={{ padding: '8px', textAlign: 'right' }}>${yearData.income.toLocaleString()}</td>
                                      <td style={{ padding: '8px', textAlign: 'right', color: colors.text }}>${inflationAdjusted.toLocaleString(undefined, { maximumFractionDigits: 0 })}</td>
                                      <td style={{
                                        padding: '8px',
                                        textAlign: 'right',
                                        color: parseFloat(changePercent) > 0 ? colors.success : parseFloat(changePercent) < 0 ? colors.primary : colors.textDimmer
                                      }}>
                                        {parseFloat(changePercent) > 0 ? '+' : ''}{changePercent}%
                                      </td>
                                    </tr>
                                  );
                                })}
                              </tbody>
                            </table>
                            <div style={{ fontSize: '10px', color: colors.textDimmest, marginTop: '10px' }}>
                              All values adjusted to 2024 dollars using CPI inflation data. "Real Value Change" shows year-over-year change in purchasing power.
                            </div>
                          </div>
                        )}
                      </div>

                      {/* CTA to organize */}
                      <div style={{
                        ...styles.card,
                        textAlign: 'center',
                        borderColor: colors.text,
                        padding: '30px'
                      }}>
                        <div style={{ fontSize: '16px', fontWeight: 700, color: colors.text, marginBottom: '10px' }}>
                          These gaps are the result of policy choices, not economic inevitability.
                        </div>
                        <div style={{ fontSize: '12px', color: colors.textMuted, marginBottom: '20px' }}>
                          Join a worker collective, tenant union, or consumer group to advocate for change.
                        </div>
                        <button
                          onClick={() => { setActiveTab('formation'); setActiveSubTab('worker'); }}
                          style={{
                            ...styles.button('primary'),
                            padding: '14px 30px',
                            fontSize: '13px'
                          }}
                        >
                          Get Organized
                        </button>
                      </div>

                      {/* Sources */}
                      <div style={{ marginTop: '15px', padding: '15px', backgroundColor: colors.bg, fontSize: '11px', color: colors.textDimmest }}>
                        <strong>Sources:</strong> {impactResults.sources.join(' • ')}
                      </div>
                    </div>
                  )}

                  {impactLoading && (
                    <div style={{ ...styles.card, textAlign: 'center', padding: '60px' }}>
                      <div style={{ fontSize: '24px', marginBottom: '15px' }}>...</div>
                      <div style={{ color: colors.textMuted }}>Calculating economic impact across your career...</div>
                    </div>
                  )}
                </section>

                {/* Price Resistance */}
                <section>
                  <h2 style={styles.sectionHeader}>Consumer Price Resistance</h2>
                  <p style={{ color: colors.textDim, marginBottom: '20px' }}>
                    "At what price do you stop buying?" — Click to set your threshold
                  </p>

                  <div style={styles.grid}>
                    {priceResistanceItems.map(item => (
                      <div key={item.id} style={styles.card}>
                        <div style={{ fontSize: '13px', color: colors.textMuted, marginBottom: '12px', fontWeight: 500 }}>{item.item}</div>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '15px' }}>
                          <div>
                            <div style={{ fontSize: '10px', color: colors.textDimmer }}>CURRENT</div>
                            <div style={{ fontSize: '20px', fontWeight: 700 }}>
                              ${item.current < 10 ? item.current.toFixed(2) : item.current}
                            </div>
                          </div>
                          <div style={{ textAlign: 'right' }}>
                            <div style={{ fontSize: '10px', color: colors.textDimmer }}>COMMUNITY THRESHOLD</div>
                            <div style={{ fontSize: '20px', fontWeight: 700, color: colors.primary }}>
                              ${item.resistance < 10 ? item.resistance.toFixed(2) : item.resistance}
                            </div>
                          </div>
                        </div>

                        <div style={{ height: '6px', backgroundColor: colors.border, borderRadius: '3px', marginBottom: '8px' }}>
                          <div style={{ height: '100%', width: `${item.atResistance}%`, backgroundColor: colors.primary, borderRadius: '3px', transition: 'width 0.3s' }} />
                        </div>
                        <div style={{ fontSize: '10px', color: colors.textDimmer, marginBottom: '15px' }}>
                          {item.atResistance}% of {item.votes.toLocaleString()} people at resistance
                        </div>

                        <div style={{ display: 'flex', gap: '6px', flexWrap: 'wrap' }}>
                          {[1.15, 1.3, 1.5, 2].map(mult => {
                            const threshold = (item.current * mult).toFixed(2);
                            const isSelected = priceVotes[item.item] === threshold;
                            return (
                              <button
                                key={mult}
                                onClick={() => handlePriceVote(item.item, threshold, item.id)}
                                style={{
                                  padding: '8px 12px',
                                  backgroundColor: isSelected ? colors.primary : colors.bgLighter,
                                  color: isSelected ? '#000' : colors.textMuted,
                                  border: `1px solid ${isSelected ? colors.primary : colors.borderLight}`,
                                  cursor: 'pointer',
                                  fontFamily: 'inherit',
                                  fontSize: '11px',
                                  fontWeight: isSelected ? 700 : 400
                                }}
                              >
                                ${threshold}
                              </button>
                            );
                          })}
                        </div>
                      </div>
                    ))}
                  </div>
                </section>

                {/* The Shelter Tax */}
                <section style={{ marginTop: '60px' }}>
                  <h2 style={styles.sectionHeader}>The Shelter Tax</h2>
                  <p style={{ color: colors.textDim, marginBottom: '20px', fontSize: '13px' }}>
                    Compare housing costs in Time, not Dollars. How many hours of your life does rent claim?
                  </p>

                  <form onSubmit={calculateShelterTax} style={{ marginBottom: '30px' }}>
                    <div style={{ display: 'flex', gap: '15px', alignItems: 'center', flexWrap: 'wrap' }}>
                      <label style={{ color: colors.textMuted, fontSize: '11px' }}>MONTHLY RENT ($):</label>
                      <input
                        type="number"
                        value={shelterRent}
                        onChange={(e) => setShelterRent(e.target.value)}
                        placeholder="1500"
                        min={1}
                        style={{ ...styles.input, width: '120px' }}
                      />
                      <label style={{ color: colors.textMuted, fontSize: '11px' }}>ANNUAL SALARY ($):</label>
                      <input
                        type="number"
                        value={shelterSalary}
                        onChange={(e) => setShelterSalary(e.target.value)}
                        placeholder="50000"
                        min={1}
                        style={{ ...styles.input, width: '120px' }}
                      />
                      <button type="submit" style={styles.button('primary')}>
                        Calculate
                      </button>
                    </div>
                  </form>

                  {shelterResults && (
                    <div style={{ ...styles.card, padding: '30px' }}>
                      {/* Visualization Bar */}
                      <div style={{ marginBottom: '25px' }}>
                        <div style={{ fontSize: '10px', color: colors.textDimmer, marginBottom: '10px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                          Hours per Month (160 = Full-Time)
                        </div>
                        <div style={{ position: 'relative', height: '60px', backgroundColor: colors.bgLight, border: `1px solid ${colors.border}` }}>
                          {/* Your rent hours (red fill) */}
                          <div style={{
                            position: 'absolute',
                            left: 0,
                            top: 0,
                            height: '100%',
                            width: `${Math.min((shelterResults.hoursRentNow / shelterResults.fullTimeMonth) * 100, 100)}%`,
                            backgroundColor: 'rgba(255, 51, 51, 0.7)',
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center'
                          }}>
                            <span style={{ color: '#fff', fontWeight: 700, fontSize: '14px', textShadow: '0 1px 2px rgba(0,0,0,0.5)' }}>
                              {shelterResults.hoursRentNow}h
                            </span>
                          </div>
                          {/* 1985 Standard Line (40 hours = 25%) */}
                          <div style={{
                            position: 'absolute',
                            left: `${(40 / 160) * 100}%`,
                            top: 0,
                            height: '100%',
                            width: '2px',
                            backgroundColor: colors.success
                          }} />
                          <div style={{
                            position: 'absolute',
                            left: `${(40 / 160) * 100}%`,
                            top: '-20px',
                            transform: 'translateX(-50%)',
                            fontSize: '10px',
                            color: colors.success,
                            whiteSpace: 'nowrap'
                          }}>
                            1985 Standard (40h)
                          </div>
                        </div>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '5px', fontSize: '10px', color: colors.textDimmest }}>
                          <span>0h</span>
                          <span>40h</span>
                          <span>80h</span>
                          <span>120h</span>
                          <span>160h</span>
                        </div>
                      </div>

                      {/* Results Text */}
                      <div style={{
                        padding: '20px',
                        backgroundColor: '#1a0a0a',
                        border: `1px solid ${colors.primary}`,
                        textAlign: 'center'
                      }}>
                        <p style={{ fontSize: '15px', color: colors.text, lineHeight: 1.8, margin: 0 }}>
                          In 1985, a worker paid <strong style={{ color: colors.success }}>40 hours</strong> of life for shelter.
                          <br />
                          You pay <strong style={{ color: colors.primary }}>{shelterResults.hoursRentNow} hours</strong>.
                          <br />
                          {shelterResults.extraHours > 0 ? (
                            <span style={{ marginTop: '10px', display: 'inline-block' }}>
                              The market claims <strong style={{ color: colors.warning }}>{shelterResults.extraHours} extra hours</strong> of your life.
                            </span>
                          ) : (
                            <span style={{ marginTop: '10px', display: 'inline-block', color: colors.success }}>
                              Your rent burden is below the 1985 baseline.
                            </span>
                          )}
                        </p>
                      </div>

                      {/* Additional Stats */}
                      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '15px', marginTop: '20px' }}>
                        <div style={{ textAlign: 'center', padding: '15px', backgroundColor: colors.bg }}>
                          <div style={{ fontSize: '24px', fontWeight: 700, color: colors.primary }}>{shelterResults.percentOfMonth}%</div>
                          <div style={{ fontSize: '10px', color: colors.textDimmer }}>of work month</div>
                        </div>
                        <div style={{ textAlign: 'center', padding: '15px', backgroundColor: colors.bg }}>
                          <div style={{ fontSize: '24px', fontWeight: 700, color: colors.text }}>${shelterResults.hourlyWage}</div>
                          <div style={{ fontSize: '10px', color: colors.textDimmer }}>hourly rate</div>
                        </div>
                        <div style={{ textAlign: 'center', padding: '15px', backgroundColor: colors.bg }}>
                          <div style={{ fontSize: '24px', fontWeight: 700, color: shelterResults.extraHours > 0 ? colors.warning : colors.success }}>
                            {shelterResults.extraHours > 0 ? '+' : ''}{shelterResults.extraHours}h
                          </div>
                          <div style={{ fontSize: '10px', color: colors.textDimmer }}>vs 1985</div>
                        </div>
                      </div>

                      <div style={{ marginTop: '20px', fontSize: '10px', color: colors.textDimmest, textAlign: 'center' }}>
                        1985 baseline: 25% of gross income = 40 hours of a 160-hour work month. Source: Census Bureau rent-to-income data.
                      </div>
                    </div>
                  )}
                </section>

                {/* Corporate Conquest Map */}
                <section style={{ marginTop: '60px' }}>
                  <h2 style={styles.sectionHeader}>Corporate Conquest Map</h2>
                  <p style={{ color: colors.textDim, marginBottom: '20px', fontSize: '13px' }}>
                    State-by-state corporate investor ownership of housing. Hover over states for details. Red = High corporate ownership.
                  </p>

                  {mapData && (
                    <div>
                      {/* Interactive SVG Map */}
                      <div style={{
                        backgroundColor: colors.cardBg,
                        border: `1px solid ${colors.border}`,
                        borderRadius: '4px',
                        padding: '20px',
                        marginBottom: '20px',
                        overflow: 'hidden'
                      }}>
                        <svg
                          viewBox="0 0 960 620"
                          style={{
                            width: '100%',
                            height: 'auto',
                            maxHeight: '500px'
                          }}
                        >
                          {Object.entries(US_STATES_SVG).map(([stateCode, stateData]) => {
                            const data = mapData[stateCode] || mapData.default || { corporate_pct: 0, price_to_income: 0 };
                            const pct = data.corporate_pct || 0;
                            // Color coding: higher corporate % = more red
                            const hue = Math.max(0, 120 - (pct * 4)); // 0 = red, 120 = green
                            const fillColor = `hsl(${hue}, 70%, 30%)`;
                            const strokeColor = `hsl(${hue}, 70%, 45%)`;

                            return (
                              <path
                                key={stateCode}
                                d={stateData.path}
                                fill={fillColor}
                                stroke={strokeColor}
                                strokeWidth="1"
                                style={{
                                  cursor: 'pointer',
                                  transition: 'all 0.2s ease'
                                }}
                                onMouseEnter={(e) => {
                                  e.target.style.fill = `hsl(${hue}, 80%, 40%)`;
                                  e.target.style.strokeWidth = '2';
                                }}
                                onMouseLeave={(e) => {
                                  e.target.style.fill = fillColor;
                                  e.target.style.strokeWidth = '1';
                                }}
                              >
                                <title>{stateData.name}: {pct}% corporate ownership, Price-to-income: {data.price_to_income}x</title>
                              </path>
                            );
                          })}
                        </svg>
                      </div>

                      {/* Legend */}
                      <div style={{
                        display: 'flex',
                        justifyContent: 'center',
                        alignItems: 'center',
                        gap: '20px',
                        marginBottom: '20px',
                        flexWrap: 'wrap'
                      }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                          <div style={{ width: '20px', height: '20px', backgroundColor: 'hsl(0, 70%, 30%)', border: '1px solid hsl(0, 70%, 45%)' }} />
                          <span style={{ fontSize: '11px', color: colors.textMuted }}>High (30%+)</span>
                        </div>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                          <div style={{ width: '20px', height: '20px', backgroundColor: 'hsl(40, 70%, 30%)', border: '1px solid hsl(40, 70%, 45%)' }} />
                          <span style={{ fontSize: '11px', color: colors.textMuted }}>Medium (20-29%)</span>
                        </div>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                          <div style={{ width: '20px', height: '20px', backgroundColor: 'hsl(80, 70%, 30%)', border: '1px solid hsl(80, 70%, 45%)' }} />
                          <span style={{ fontSize: '11px', color: colors.textMuted }}>Low (10-19%)</span>
                        </div>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                          <div style={{ width: '20px', height: '20px', backgroundColor: 'hsl(120, 70%, 30%)', border: '1px solid hsl(120, 70%, 45%)' }} />
                          <span style={{ fontSize: '11px', color: colors.textMuted }}>Lowest (&lt;10%)</span>
                        </div>
                      </div>

                      {/* Top 5 States Detail Cards */}
                      <h3 style={{ fontSize: '13px', color: colors.textMuted, marginBottom: '15px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                        Highest Corporate Ownership States
                      </h3>
                      <div style={{
                        display: 'grid',
                        gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',
                        gap: '15px'
                      }}>
                        {Object.entries(mapData)
                          .filter(([state]) => state !== 'default')
                          .sort((a, b) => b[1].corporate_pct - a[1].corporate_pct)
                          .slice(0, 5)
                          .map(([state, data]) => {
                            const stateInfo = US_STATES_SVG[state];
                            const pct = data.corporate_pct;
                            const hue = Math.max(0, 120 - (pct * 4));
                            return (
                              <div key={state} style={{
                                ...styles.card,
                                borderLeft: `3px solid hsl(${hue}, 70%, 45%)`,
                                padding: '15px'
                              }}>
                                <div style={{ fontSize: '14px', fontWeight: 700, color: colors.text, marginBottom: '8px' }}>
                                  {stateInfo ? stateInfo.name : state} ({state})
                                </div>
                                <div style={{ fontSize: '11px', color: colors.textMuted, marginBottom: '5px' }}>
                                  <strong style={{ color: `hsl(${hue}, 70%, 55%)` }}>{data.corporate_pct}%</strong> of homes owned by investors
                                </div>
                                <div style={{ fontSize: '11px', color: colors.textDim }}>
                                  Price-to-income ratio: {data.price_to_income}x
                                </div>
                              </div>
                            );
                          })}
                      </div>

                      <div style={{ marginTop: '20px', fontSize: '10px', color: colors.textDimmest, textAlign: 'center' }}>
                        Sources: CoreLogic, ATTOM Data, Redfin investor activity reports. "Corporate" includes institutional investors, REITs, and investment LLCs.
                      </div>
                    </div>
                  )}

                  {!mapData && (
                    <div style={{ ...styles.card, textAlign: 'center', padding: '40px', color: colors.textMuted }}>
                      Loading corporate ownership data...
                    </div>
                  )}
                </section>

                {/* ==================== THE PROFIT STOPWATCH ==================== */}
                <section style={{ marginTop: '60px' }}>
                  <h2 style={styles.sectionHeader}>The Profit Stopwatch</h2>
                  <p style={{ color: colors.textDim, marginBottom: '20px', fontSize: '13px' }}>
                    Visualize how much of your workday goes to shareholders vs. your own survival. Watch the clock divide.
                  </p>

                  <form onSubmit={handleStopwatchCalculate} style={{ marginBottom: '30px' }}>
                    <div style={{ display: 'flex', gap: '15px', alignItems: 'flex-end', flexWrap: 'wrap' }}>
                      <div>
                        <label style={{ display: 'block', color: colors.textMuted, fontSize: '11px', marginBottom: '5px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                          Hourly Wage
                        </label>
                        <input
                          type="number"
                          value={hourlyWage}
                          onChange={(e) => setHourlyWage(e.target.value)}
                          placeholder="15.00"
                          step="0.01"
                          style={{ ...styles.input, width: '120px' }}
                        />
                      </div>
                      <div>
                        <label style={{ display: 'block', color: colors.textMuted, fontSize: '11px', marginBottom: '5px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                          Hours Per Day
                        </label>
                        <input
                          type="number"
                          value={hoursWorkedPerDay}
                          onChange={(e) => setHoursWorkedPerDay(e.target.value)}
                          placeholder="8"
                          step="0.5"
                          style={{ ...styles.input, width: '120px' }}
                        />
                      </div>
                      <div>
                        <label style={{ display: 'block', color: colors.textMuted, fontSize: '11px', marginBottom: '5px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                          Industry
                        </label>
                        <select
                          value={industry}
                          onChange={(e) => setIndustry(e.target.value)}
                          style={{ ...styles.input, width: '180px' }}
                        >
                          <option>Technology</option>
                          <option>Retail</option>
                          <option>Healthcare</option>
                          <option>Manufacturing</option>
                          <option>Food Service</option>
                          <option>Finance</option>
                          <option>Construction</option>
                          <option>Hospitality</option>
                        </select>
                      </div>
                      <button type="submit" style={styles.button('primary')}>
                        Calculate
                      </button>
                    </div>
                  </form>

                  {stopwatchResults && (
                    <div>
                      {/* SVG Analog Clock */}
                      <div style={{
                        display: 'flex',
                        justifyContent: 'center',
                        marginBottom: '30px',
                        animation: 'jolt 0.3s ease-out'
                      }}>
                        <svg width="300" height="300" viewBox="0 0 300 300" style={{ filter: 'drop-shadow(0 4px 12px rgba(0,0,0,0.5))' }}>
                          {/* Clock face */}
                          <circle cx="150" cy="150" r="140" fill="#111" stroke={colors.border} strokeWidth="2"/>

                          {/* Hour markers */}
                          {[...Array(12)].map((_, i) => {
                            const angle = (i * 30 - 90) * Math.PI / 180;
                            const x1 = 150 + 130 * Math.cos(angle);
                            const y1 = 150 + 130 * Math.sin(angle);
                            const x2 = 150 + 120 * Math.cos(angle);
                            const y2 = 150 + 120 * Math.sin(angle);
                            return (
                              <line key={i} x1={x1} y1={y1} x2={x2} y2={y2} stroke={colors.textDimmest} strokeWidth="2"/>
                            );
                          })}

                          {/* Hour numbers */}
                          {[12, 3, 6, 9].map((hour) => {
                            const angle = ((hour === 12 ? 0 : hour) * 30 - 90) * Math.PI / 180;
                            const x = 150 + 100 * Math.cos(angle);
                            const y = 150 + 100 * Math.sin(angle);
                            return (
                              <text key={hour} x={x} y={y} textAnchor="middle" dy="5" fill={colors.textDim} fontSize="18" fontWeight="700">
                                {hour}
                              </text>
                            );
                          })}

                          {/* Green arc (paid time) */}
                          <path
                            d={`M 150 150 L 150 10 A 140 140 0 ${stopwatchResults.breakEvenAngle > 180 ? 1 : 0} 1 ${150 + 140 * Math.sin(stopwatchResults.breakEvenAngle * Math.PI / 180)} ${150 - 140 * Math.cos(stopwatchResults.breakEvenAngle * Math.PI / 180)} Z`}
                            fill={colors.success}
                            opacity="0.3"
                            stroke={colors.success}
                            strokeWidth="2"
                          />

                          {/* Red slice (stolen time) - lifted effect */}
                          <path
                            d={`M 150 150 L ${150 + 140 * Math.sin(stopwatchResults.breakEvenAngle * Math.PI / 180)} ${150 - 140 * Math.cos(stopwatchResults.breakEvenAngle * Math.PI / 180)} A 140 140 0 ${stopwatchResults.stolenAngle > 180 ? 1 : 0} 1 150 10 Z`}
                            fill={colors.primary}
                            opacity="0.6"
                            stroke={colors.primary}
                            strokeWidth="3"
                            style={{
                              filter: 'drop-shadow(0 8px 20px rgba(255, 51, 51, 0.6))',
                              cursor: 'pointer',
                              transition: 'all 0.3s ease'
                            }}
                            onMouseEnter={(e) => {
                              e.target.style.opacity = '0.9';
                              e.target.style.filter = 'drop-shadow(0 12px 30px rgba(255, 51, 51, 0.9))';
                            }}
                            onMouseLeave={(e) => {
                              e.target.style.opacity = '0.6';
                              e.target.style.filter = 'drop-shadow(0 8px 20px rgba(255, 51, 51, 0.6))';
                            }}
                          />

                          {/* Center dot */}
                          <circle cx="150" cy="150" r="8" fill={colors.text}/>
                        </svg>
                      </div>

                      {/* Results */}
                      <div style={{
                        textAlign: 'center',
                        padding: '25px',
                        backgroundColor: '#051a05',
                        border: `2px solid ${colors.success}`,
                        marginBottom: '20px'
                      }}>
                        <div style={{ fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '10px' }}>
                          Break-Even Time
                        </div>
                        <div className="pop-out" style={{ fontSize: '56px', fontWeight: 700, color: colors.success, lineHeight: 1, textShadow: `0 0 20px ${colors.success}80` }}>
                          {stopwatchResults.breakEvenTime}
                        </div>
                      </div>

                      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '15px' }}>
                        <div style={{ ...styles.card, borderLeft: `3px solid ${colors.primary}`, padding: '20px' }}>
                          <div style={{ fontSize: '10px', color: colors.textDimmer, textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px' }}>
                            Stolen Time
                          </div>
                          <div style={{ fontSize: '32px', fontWeight: 700, color: colors.primary, marginBottom: '5px' }}>
                            {stopwatchResults.stolenHours}h
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textMuted }}>
                            Pure volunteer work
                          </div>
                        </div>
                        <div style={{ ...styles.card, borderLeft: `3px solid ${colors.warning}`, padding: '20px' }}>
                          <div style={{ fontSize: '10px', color: colors.textDimmer, textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px' }}>
                            Profit Per Hour
                          </div>
                          <div style={{ fontSize: '32px', fontWeight: 700, color: colors.warning, marginBottom: '5px' }}>
                            ${stopwatchResults.profitPerHour}
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textMuted }}>
                            {stopwatchResults.profitMargin}% margin
                          </div>
                        </div>
                      </div>

                      <p style={{ marginTop: '20px', color: colors.textDim, fontSize: '13px', textAlign: 'center', fontStyle: 'italic' }}>
                        By {stopwatchResults.breakEvenTime}, you're paid up. The red slice? Pure volunteer work for shareholders.
                      </p>
                    </div>
                  )}
                </section>

                {/* ==================== THE CALENDAR OF SERVITUDE ==================== */}
                <section style={{ marginTop: '60px' }}>
                  <h2 style={styles.sectionHeader}>The Calendar of Servitude</h2>
                  <p style={{ color: colors.textDim, marginBottom: '20px', fontSize: '13px' }}>
                    How many days of the month do you work just to pay rent? See when you start earning for yourself.
                  </p>

                  <form onSubmit={handleCalendarCalculate} style={{ marginBottom: '30px' }}>
                    <div style={{ display: 'flex', gap: '15px', alignItems: 'flex-end', flexWrap: 'wrap' }}>
                      <div>
                        <label style={{ display: 'block', color: colors.textMuted, fontSize: '11px', marginBottom: '5px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                          Monthly Rent
                        </label>
                        <input
                          type="number"
                          value={monthlyRent}
                          onChange={(e) => setMonthlyRent(e.target.value)}
                          placeholder="1500"
                          step="50"
                          style={{ ...styles.input, width: '140px' }}
                        />
                      </div>
                      <div>
                        <label style={{ display: 'block', color: colors.textMuted, fontSize: '11px', marginBottom: '5px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                          Monthly Income
                        </label>
                        <input
                          type="number"
                          value={monthlyIncome}
                          onChange={(e) => setMonthlyIncome(e.target.value)}
                          placeholder="3000"
                          step="100"
                          style={{ ...styles.input, width: '140px' }}
                        />
                      </div>
                      <button type="submit" style={styles.button('primary')}>
                        Calculate
                      </button>
                    </div>
                  </form>

                  {calendarResults && (
                    <div>
                      {/* 30-day calendar grid */}
                      <div style={{
                        display: 'grid',
                        gridTemplateColumns: 'repeat(7, 1fr)',
                        gap: '8px',
                        marginBottom: '30px',
                        maxWidth: '500px',
                        margin: '0 auto 30px'
                      }}>
                        {[...Array(30)].map((_, i) => {
                          const day = i + 1;
                          const isLandlordDay = day <= calendarResults.rentDays;
                          const isFreedomDay = day === calendarResults.freedomDay;

                          return (
                            <div
                              key={day}
                              style={{
                                aspectRatio: '1',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                backgroundColor: isLandlordDay ? 'rgba(255, 51, 51, 0.3)' : 'rgba(51, 255, 51, 0.1)',
                                border: isFreedomDay ? `2px solid ${colors.success}` : `1px solid ${colors.border}`,
                                color: isFreedomDay ? colors.success : isLandlordDay ? colors.primary : colors.textMuted,
                                fontSize: isFreedomDay ? '18px' : '14px',
                                fontWeight: isFreedomDay ? 700 : 400,
                                cursor: 'pointer',
                                transform: isLandlordDay ? 'scale(0.95)' : isFreedomDay ? 'scale(1.2)' : 'scale(1)',
                                boxShadow: isFreedomDay ? `0 4px 12px ${colors.success}80` : isLandlordDay ? 'inset 0 2px 4px rgba(0,0,0,0.3)' : 'none',
                                transition: 'all 0.3s ease',
                                position: 'relative',
                                animation: isFreedomDay ? 'intensityPulse 2s infinite' : 'none'
                              }}
                              title={isLandlordDay ? 'Working for your landlord' : 'Working for yourself'}
                              onMouseEnter={(e) => {
                                if (!isFreedomDay) {
                                  e.currentTarget.style.transform = isLandlordDay ? 'scale(1)' : 'scale(1.1)';
                                }
                              }}
                              onMouseLeave={(e) => {
                                if (!isFreedomDay) {
                                  e.currentTarget.style.transform = isLandlordDay ? 'scale(0.95)' : 'scale(1)';
                                }
                              }}
                            >
                              {day}
                            </div>
                          );
                        })}
                      </div>

                      {/* Legend */}
                      <div style={{ display: 'flex', gap: '20px', justifyContent: 'center', marginBottom: '30px', flexWrap: 'wrap' }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                          <div style={{ width: '20px', height: '20px', backgroundColor: 'rgba(255, 51, 51, 0.3)', border: `1px solid ${colors.border}` }}></div>
                          <span style={{ fontSize: '12px', color: colors.textMuted }}>Landlord Days ({calendarResults.rentDays})</span>
                        </div>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                          <div style={{ width: '20px', height: '20px', border: `2px solid ${colors.success}`, backgroundColor: 'rgba(51, 255, 51, 0.1)' }}></div>
                          <span style={{ fontSize: '12px', color: colors.textMuted }}>Freedom Day ({calendarResults.freedomDay})</span>
                        </div>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                          <div style={{ width: '20px', height: '20px', backgroundColor: 'rgba(51, 255, 51, 0.1)', border: `1px solid ${colors.border}` }}></div>
                          <span style={{ fontSize: '12px', color: colors.textMuted }}>Free Days ({calendarResults.freeDays})</span>
                        </div>
                      </div>

                      {/* Stats */}
                      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '15px' }}>
                        <div style={{ ...styles.card, borderLeft: `3px solid ${colors.primary}`, padding: '20px' }}>
                          <div style={{ fontSize: '10px', color: colors.textDimmer, textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px' }}>
                            Rent Burden
                          </div>
                          <div style={{ fontSize: '36px', fontWeight: 700, color: colors.primary, marginBottom: '5px' }}>
                            {calendarResults.rentPercent}%
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textMuted }}>
                            of monthly income
                          </div>
                        </div>
                        <div style={{ ...styles.card, borderLeft: `3px solid ${colors.success}`, padding: '20px' }}>
                          <div style={{ fontSize: '10px', color: colors.textDimmer, textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px' }}>
                            Freedom Day
                          </div>
                          <div style={{ fontSize: '36px', fontWeight: 700, color: colors.success, marginBottom: '5px' }}>
                            Day {calendarResults.freedomDay}
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textMuted }}>
                            Start earning for yourself
                          </div>
                        </div>
                      </div>

                      <p style={{ marginTop: '20px', color: colors.textDim, fontSize: '13px', textAlign: 'center', fontStyle: 'italic' }}>
                        You don't start earning for yourself until the {calendarResults.freedomDay}th.
                      </p>
                    </div>
                  )}
                </section>

                {/* ==================== THE ONE BAD DAY ==================== */}
                <section style={{ marginTop: '60px' }}>
                  <h2 style={styles.sectionHeader}>The One Bad Day</h2>
                  <p style={{ color: colors.textDim, marginBottom: '20px', fontSize: '13px' }}>
                    Test your financial resilience. One emergency. That's all it takes.
                  </p>

                  <div style={{ marginBottom: '30px' }}>
                    <label style={{ display: 'block', color: colors.textMuted, fontSize: '11px', marginBottom: '8px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                      Current Savings
                    </label>
                    <input
                      type="number"
                      value={currentSavings}
                      onChange={(e) => {
                        setCurrentSavings(e.target.value);
                        if (selectedEmergency) {
                          handleEmergencyToggle(selectedEmergency);
                        }
                      }}
                      placeholder="850"
                      step="50"
                      style={{ ...styles.input, width: '200px' }}
                    />
                  </div>

                  {currentSavings && parseFloat(currentSavings) >= 0 && (
                    <div>
                      {/* Savings bar */}
                      <div style={{ marginBottom: '20px' }}>
                        <div style={{ fontSize: '11px', color: colors.textDimmer, textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '8px' }}>
                          {emergencyResults && emergencyResults.isNegative ? 'Deficit' : 'Savings'}
                        </div>
                        <div style={{
                          height: '40px',
                          backgroundColor: colors.bgLight,
                          border: `1px solid ${colors.border}`,
                          position: 'relative',
                          overflow: 'hidden'
                        }}>
                          <div style={{
                            height: '100%',
                            width: emergencyResults && emergencyResults.isNegative ? '100%' : `${Math.min((parseFloat(currentSavings) / 2000) * 100, 100)}%`,
                            backgroundColor: emergencyResults && emergencyResults.isNegative ? colors.primary : colors.success,
                            transition: emergencyResults && emergencyResults.isNegative ? 'none' : 'all 0.3s ease',
                            display: 'flex',
                            alignItems: 'center',
                            paddingLeft: '15px'
                          }}>
                            <span style={{
                              fontSize: '16px',
                              fontWeight: 700,
                              color: '#000'
                            }}>
                              ${emergencyResults && emergencyResults.isNegative ? Math.abs(emergencyResults.deficit) : currentSavings}
                            </span>
                          </div>
                        </div>
                      </div>

                      {/* Emergency toggle buttons */}
                      <div style={{ marginBottom: '30px' }}>
                        <div style={{ fontSize: '11px', color: colors.textMuted, marginBottom: '10px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                          Select Emergency
                        </div>
                        <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>
                          {['Flat Tire', 'ER Visit', 'Broken Phone'].map((emergency) => {
                            const costs = { 'Flat Tire': 300, 'ER Visit': 1200, 'Broken Phone': 400 };
                            const isSelected = selectedEmergency === emergency;
                            return (
                              <button
                                key={emergency}
                                onClick={() => handleEmergencyToggle(emergency)}
                                style={{
                                  padding: '12px 20px',
                                  backgroundColor: isSelected ? colors.primary : 'transparent',
                                  color: isSelected ? '#000' : colors.textMuted,
                                  border: `1px solid ${isSelected ? colors.primary : colors.borderLight}`,
                                  cursor: 'pointer',
                                  fontFamily: 'inherit',
                                  fontSize: '12px',
                                  fontWeight: 600,
                                  transition: 'all 0.15s',
                                  textTransform: 'uppercase',
                                  letterSpacing: '0.5px'
                                }}
                                onMouseEnter={(e) => {
                                  if (!isSelected) {
                                    e.target.style.borderColor = colors.primary;
                                    e.target.style.color = colors.primary;
                                  }
                                }}
                                onMouseLeave={(e) => {
                                  if (!isSelected) {
                                    e.target.style.borderColor = colors.borderLight;
                                    e.target.style.color = colors.textMuted;
                                  }
                                }}
                              >
                                {emergency} (${costs[emergency]})
                              </button>
                            );
                          })}
                        </div>
                      </div>

                      {/* Results */}
                      {emergencyResults && emergencyResults.isNegative && (
                        <div style={{
                          textAlign: 'center',
                          padding: '30px',
                          backgroundColor: '#1a0505',
                          border: `2px solid ${colors.primary}`,
                          marginBottom: '20px'
                        }}>
                          <div style={{ fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '10px' }}>
                            Deficit After {emergencyResults.emergencyType}
                          </div>
                          <div className="heartbeat" style={{ fontSize: '64px', fontWeight: 700, color: colors.primary, lineHeight: 1, textShadow: `0 0 30px ${colors.primary}80` }}>
                            -${Math.abs(emergencyResults.deficit)}
                          </div>
                        </div>
                      )}

                      {emergencyResults && !emergencyResults.isNegative && emergencyResults.emergencyType && (
                        <div style={{
                          textAlign: 'center',
                          padding: '30px',
                          backgroundColor: '#051a05',
                          border: `2px solid ${colors.success}`,
                          marginBottom: '20px'
                        }}>
                          <div style={{ fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '10px' }}>
                            Remaining After {emergencyResults.emergencyType}
                          </div>
                          <div style={{ fontSize: '64px', fontWeight: 700, color: colors.success, lineHeight: 1 }}>
                            ${emergencyResults.deficit}
                          </div>
                        </div>
                      )}

                      <p style={{ marginTop: '20px', color: colors.textDim, fontSize: '13px', textAlign: 'center', fontStyle: 'italic' }}>
                        One bad day. That's all it takes.
                      </p>
                    </div>
                  )}
                </section>
              </div>
            )}

            {/* ==================== FORMATION TAB ==================== */}
            {activeTab === 'formation' && (
              <div>
                <div style={styles.subNav}>
                  {[
                    { id: 'sentiment', label: textConfig.subtab_sentiment },
                    { id: 'tenant', label: textConfig.subtab_tenant },
                    { id: 'worker', label: textConfig.subtab_worker },
                    { id: 'consumer', label: textConfig.subtab_consumer },
                    { id: 'petition', label: textConfig.subtab_petitions }
                  ].map(sub => (
                    <button key={sub.id} onClick={() => setActiveSubTab(sub.id)} style={styles.subNavButton(activeSubTab === sub.id)}>
                      {sub.label}
                    </button>
                  ))}
                </div>

                {/* Work Sentiment */}
                {activeSubTab === 'sentiment' && (
                  <section>
                    <h2 style={styles.sectionHeader}>{textConfig.sentiment_section_title}</h2>

                    <div style={styles.card}>
                      <p style={{ color: colors.textMuted, marginBottom: '25px', textAlign: 'center', fontSize: '16px' }}>
                        {textConfig.sentiment_question}
                      </p>
                      <div style={{ display: 'flex', gap: '20px', justifyContent: 'center', marginBottom: '30px' }}>
                        {['yes', 'no'].map(vote => (
                          <button
                            key={vote}
                            onClick={() => !workSentiment && handleSentimentVote(vote)}
                            disabled={workSentiment !== null}
                            style={{
                              padding: '25px 50px',
                              backgroundColor: workSentiment === vote ? (vote === 'yes' ? colors.success : colors.primary) : colors.bgLighter,
                              color: workSentiment === vote ? '#000' : (vote === 'yes' ? colors.success : colors.primary),
                              border: `2px solid ${vote === 'yes' ? colors.success : colors.primary}`,
                              cursor: workSentiment ? 'default' : 'pointer',
                              opacity: workSentiment && workSentiment !== vote ? 0.4 : 1,
                              fontFamily: 'inherit',
                              fontWeight: 700,
                              fontSize: '18px',
                              transition: 'all 0.15s'
                            }}
                          >
                            {vote === 'yes' ? textConfig.sentiment_yes : textConfig.sentiment_no}
                          </button>
                        ))}
                      </div>

                      {workSentiment && (
                        <div style={{ textAlign: 'center', marginBottom: '25px', fontSize: '12px', color: colors.success }}>
                          ✓ {textConfig.sentiment_recorded}
                        </div>
                      )}

                      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', textAlign: 'center', marginBottom: '30px' }}>
                        <div style={{ padding: '25px', backgroundColor: colors.bg }}>
                          <div style={{ fontSize: '56px', fontWeight: 700, color: colors.primary }}>
                            {Math.round((todaySentiment.unwilling / todaySentiment.total) * 100)}%
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '1px' }}>
                            {textConfig.sentiment_unwilling}
                          </div>
                        </div>
                        <div style={{ padding: '25px', backgroundColor: colors.bg }}>
                          <div style={{ fontSize: '56px', fontWeight: 700, color: colors.textMuted }}>
                            {todaySentiment.total}
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '1px' }}>
                            {textConfig.sentiment_responses}
                          </div>
                        </div>
                      </div>

                      {/* Trend */}
                      <div>
                        <div style={{ fontSize: '10px', color: colors.textDimmer, textTransform: 'uppercase', marginBottom: '15px' }}>
                          {textConfig.sentiment_trend}
                        </div>
                        <div style={{ display: 'flex', alignItems: 'flex-end', height: '120px', gap: '15px' }}>
                          {sentimentHistory.map((week, i) => (
                            <div key={week.week} style={{ flex: 1, textAlign: 'center' }}>
                              <div style={{
                                height: `${week.unwilling * 1.5}px`,
                                backgroundColor: i === sentimentHistory.length - 1 ? colors.primary : colors.borderLight,
                                marginBottom: '8px',
                                transition: 'height 0.3s',
                                borderRadius: '2px 2px 0 0'
                              }} />
                              <div style={{ fontSize: '11px', color: colors.textDimmer }}>{week.week}</div>
                              <div style={{ fontSize: '13px', color: colors.textMuted, fontWeight: 500 }}>{week.unwilling}%</div>
                            </div>
                          ))}
                        </div>
                        <div style={{ marginTop: '20px', fontSize: '13px', color: colors.primary, textAlign: 'center' }}>
                          ↑ Worker unwillingness rising 14 points over 4 weeks
                        </div>
                      </div>
                    </div>
                  </section>
                )}

                {/* Tenant Unions */}
                {activeSubTab === 'tenant' && (
                  <section>
                    <h2 style={styles.sectionHeader}>Tenant Union Builder</h2>
                    <p style={{ color: colors.textDim, marginBottom: '20px' }}>
                      Find and connect with other tenants in your building. No personal data required.
                    </p>

                    <div style={{ display: 'flex', gap: '10px', marginBottom: '25px', flexWrap: 'wrap' }}>
                      <input
                        type="text"
                        value={zipCode}
                        onChange={(e) => setZipCode(e.target.value)}
                        placeholder="Enter ZIP to find buildings"
                        style={{ ...styles.input, width: '200px' }}
                      />
                      <button onClick={() => { fetchBuildings(zipCode); showNotification(`Showing buildings in ${zipCode || 'your area'}`); }} style={styles.button('secondary')}>
                        Search Buildings
                      </button>
                    </div>

                    <div style={styles.grid}>
                      {buildings.map(building => {
                        const joined = joinedBuildings.includes(building.id);
                        const orgPct = Math.round((building.members / building.units) * 100);
                        return (
                          <div key={building.id} style={{
                            ...styles.card,
                            border: joined ? `1px solid ${colors.success}` : `1px solid ${colors.border}`
                          }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>
                              <div>
                                <div style={{ fontWeight: 700, marginBottom: '4px' }}>{building.address}</div>
                                <div style={{ fontSize: '12px', color: colors.textDim }}>Landlord: {building.landlord}</div>
                              </div>
                              {joined && <span style={styles.badge(colors.success)}>Joined</span>}
                            </div>

                            {building.issues.length > 0 && (
                              <div style={{ marginBottom: '12px' }}>
                                {building.issues.map(issue => (
                                  <span key={issue} style={{ ...styles.badge(colors.warning), marginBottom: '4px' }}>{issue}</span>
                                ))}
                              </div>
                            )}

                            <div style={{ display: 'flex', gap: '25px', marginBottom: '15px' }}>
                              <div>
                                <div style={{ fontSize: '28px', fontWeight: 700 }}>{building.members}</div>
                                <div style={{ fontSize: '10px', color: colors.textDimmer }}>MEMBERS</div>
                              </div>
                              <div>
                                <div style={{ fontSize: '28px', fontWeight: 700, color: colors.textDim }}>{building.units}</div>
                                <div style={{ fontSize: '10px', color: colors.textDimmer }}>UNITS</div>
                              </div>
                              <div>
                                <div style={{ fontSize: '28px', fontWeight: 700, color: orgPct > 30 ? colors.success : colors.primary }}>
                                  {orgPct}%
                                </div>
                                <div style={{ fontSize: '10px', color: colors.textDimmer }}>ORGANIZED</div>
                              </div>
                            </div>

                            {!joined ? (
                              <button onClick={() => handleJoinBuilding(building)} style={{ ...styles.button('secondary'), width: '100%' }}>
                                Join Tenant Group →
                              </button>
                            ) : (
                              <button
                                onClick={() => setSelectedBuilding(building.id === selectedBuilding ? null : building.id)}
                                style={{ ...styles.button('primary'), width: '100%' }}
                              >
                                {selectedBuilding === building.id ? 'Hide Discussion' : 'View Discussion →'}
                              </button>
                            )}
                          </div>
                        );
                      })}
                    </div>

                    {/* Discussion */}
                    {selectedBuilding && joinedBuildings.includes(selectedBuilding) && (
                      <div style={{ ...styles.card, marginTop: '25px' }}>
                        <h3 style={{ margin: '0 0 20px 0', fontSize: '14px' }}>
                          Building Discussion — {buildings.find(b => b.id === selectedBuilding)?.address}
                        </h3>

                        {tenantMessages.filter(m => m.building === selectedBuilding).map(msg => (
                          <div key={msg.id} style={{
                            padding: '15px',
                            backgroundColor: msg.pinned ? '#1a1a0a' : colors.bg,
                            border: msg.pinned ? `1px solid ${colors.warning}` : 'none',
                            marginBottom: '10px'
                          }}>
                            {msg.pinned && <span style={{ ...styles.badge(colors.warning), marginBottom: '8px' }}>📌 Pinned</span>}
                            <div style={{ marginBottom: '8px' }}>{msg.text}</div>
                            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '11px', color: colors.textDimmer }}>
                              <span>{msg.author} • {msg.time}</span>
                              <span>{msg.replies} replies</span>
                            </div>
                          </div>
                        ))}

                        <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>
                          <input
                            type="text"
                            value={newTenantMessage}
                            onChange={(e) => setNewTenantMessage(e.target.value)}
                            placeholder="Share with your building..."
                            style={{ ...styles.input, flex: 1 }}
                            onKeyPress={(e) => {
                              if (e.key === 'Enter' && newTenantMessage) {
                                fetch(`${API_BASE}/buildings/${selectedBuilding}/messages`, {
                                  method: 'POST',
                                  headers: { 'Content-Type': 'application/json' },
                                  body: JSON.stringify({ text: newTenantMessage, author: 'You' }),
                                })
                                  .then(r => r.json())
                                  .then(msg => {
                                    setTenantMessages([msg, ...tenantMessages]);
                                    setNewTenantMessage('');
                                    showNotification('Message posted anonymously');
                                  })
                                  .catch(() => showNotification('Failed to post message', 'error'));
                              }
                            }}
                          />
                          <button
                            onClick={() => {
                              if (newTenantMessage) {
                                fetch(`${API_BASE}/buildings/${selectedBuilding}/messages`, {
                                  method: 'POST',
                                  headers: { 'Content-Type': 'application/json' },
                                  body: JSON.stringify({ text: newTenantMessage, author: 'You' }),
                                })
                                  .then(r => r.json())
                                  .then(msg => {
                                    setTenantMessages([msg, ...tenantMessages]);
                                    setNewTenantMessage('');
                                    showNotification('Message posted anonymously');
                                  })
                                  .catch(() => showNotification('Failed to post message', 'error'));
                              }
                            }}
                            style={styles.button('primary')}
                          >
                            Post
                          </button>
                        </div>
                        <p style={{ fontSize: '10px', color: colors.textDimmest, marginTop: '10px', marginBottom: 0 }}>
                          Messages are anonymous. Tied to browser fingerprint, not identity.
                        </p>
                      </div>
                    )}
                  </section>
                )}

                {/* Worker Collectives */}
                {activeSubTab === 'worker' && (
                  <section>
                    <h2 style={styles.sectionHeader}>Worker Collectives</h2>
                    <p style={{ color: colors.textDim, marginBottom: '20px' }}>
                      Anonymous coordination for workplace issues. Find your coworkers.
                    </p>

                    <div style={styles.grid}>
                      {workerCollectives.map(collective => {
                        const joined = joinedCollectives.includes(collective.id);
                        return (
                          <div key={collective.id} style={{
                            ...styles.card,
                            border: joined ? `1px solid ${colors.success}` : `1px solid ${colors.border}`,
                            opacity: collective.active ? 1 : 0.7
                          }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>
                              <span style={styles.badge(colors.textMuted)}>{collective.industry}</span>
                              <span style={styles.badge(collective.active ? colors.success : colors.warning)}>
                                {collective.active ? 'Active' : 'Forming'}
                              </span>
                            </div>

                            <div style={{ fontWeight: 700, fontSize: '16px', marginBottom: '12px' }}>{collective.company}</div>

                            <div style={{ marginBottom: '15px' }}>
                              <div style={{ fontSize: '10px', color: colors.textDimmer, marginBottom: '6px' }}>ORGANIZING AROUND:</div>
                              <div style={{ display: 'flex', gap: '5px', flexWrap: 'wrap' }}>
                                {collective.issues.map(issue => (
                                  <span key={issue} style={{ ...styles.badge(colors.primary), marginRight: 0 }}>{issue}</span>
                                ))}
                              </div>
                            </div>

                            <div style={{ marginBottom: '15px' }}>
                              <span style={{ fontSize: '28px', fontWeight: 700 }}>{collective.members}</span>
                              <span style={{ fontSize: '12px', color: colors.textDim, marginLeft: '8px' }}>members</span>
                            </div>

                            {collective.telegram_url && (
                              <a
                                href={collective.telegram_url}
                                target="_blank"
                                rel="noopener noreferrer"
                                style={{
                                  display: 'flex',
                                  alignItems: 'center',
                                  gap: '8px',
                                  padding: '10px 12px',
                                  marginBottom: '15px',
                                  backgroundColor: '#0088cc15',
                                  border: '1px solid #0088cc40',
                                  color: '#0088cc',
                                  textDecoration: 'none',
                                  fontSize: '12px',
                                  fontWeight: 500,
                                }}
                              >
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                  <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.161c-.18 1.897-.962 6.502-1.359 8.627-.168.9-.5 1.201-.82 1.23-.697.064-1.226-.461-1.901-.903-1.056-.692-1.653-1.123-2.678-1.799-1.185-.781-.417-1.21.258-1.911.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.139-5.062 3.345-.479.329-.913.489-1.302.481-.428-.009-1.252-.242-1.865-.442-.751-.244-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.831-2.529 6.998-3.015 3.333-1.386 4.025-1.627 4.477-1.635.099-.002.321.023.465.14.121.099.154.232.17.325.015.094.034.31.019.478z"/>
                                </svg>
                                Join Telegram Channel
                              </a>
                            )}

                            {!joined ? (
                              <button onClick={() => handleJoinCollective(collective)} style={{ ...styles.button('secondary'), width: '100%' }}>
                                Join Collective →
                              </button>
                            ) : (
                              <button
                                onClick={() => setSelectedCollective(collective.id === selectedCollective ? null : collective.id)}
                                style={{ ...styles.button('primary'), width: '100%' }}
                              >
                                {selectedCollective === collective.id ? 'Hide Discussion' : 'Open Discussion →'}
                              </button>
                            )}
                          </div>
                        );
                      })}
                    </div>

                    {/* Collective Discussion */}
                    {selectedCollective && joinedCollectives.includes(selectedCollective) && (
                      <div style={{ ...styles.card, marginTop: '25px' }}>
                        <h3 style={{ margin: '0 0 20px 0', fontSize: '14px' }}>
                          {workerCollectives.find(c => c.id === selectedCollective)?.company} — Worker Discussion
                        </h3>

                        {collectiveMessages.filter(m => m.collective === selectedCollective).map(msg => (
                          <div key={msg.id} style={{
                            padding: '15px',
                            backgroundColor: msg.pinned ? '#1a1a0a' : colors.bg,
                            border: msg.pinned ? `1px solid ${colors.warning}` : 'none',
                            marginBottom: '10px'
                          }}>
                            {msg.pinned && <span style={{ ...styles.badge(colors.warning), marginBottom: '8px' }}>📌 Pinned</span>}
                            <div style={{ marginBottom: '8px' }}>{msg.text}</div>
                            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '11px', color: colors.textDimmer }}>
                              <span>{msg.author} • {msg.time}</span>
                              {msg.replies && <span>{msg.replies} replies</span>}
                            </div>
                          </div>
                        ))}

                        <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>
                          <input
                            type="text"
                            value={newCollectiveMessage}
                            onChange={(e) => setNewCollectiveMessage(e.target.value)}
                            placeholder="Share with your coworkers..."
                            style={{ ...styles.input, flex: 1 }}
                            onKeyPress={(e) => {
                              if (e.key === 'Enter' && newCollectiveMessage) {
                                fetch(`${API_BASE}/worker-collectives/${selectedCollective}/messages`, {
                                  method: 'POST',
                                  headers: { 'Content-Type': 'application/json' },
                                  body: JSON.stringify({ text: newCollectiveMessage }),
                                })
                                  .then(r => r.json())
                                  .then(msg => {
                                    setCollectiveMessages([msg, ...collectiveMessages]);
                                    setNewCollectiveMessage('');
                                    showNotification('Message posted anonymously');
                                  })
                                  .catch(() => showNotification('Failed to post message', 'error'));
                              }
                            }}
                          />
                          <button
                            onClick={() => {
                              if (newCollectiveMessage) {
                                fetch(`${API_BASE}/worker-collectives/${selectedCollective}/messages`, {
                                  method: 'POST',
                                  headers: { 'Content-Type': 'application/json' },
                                  body: JSON.stringify({ text: newCollectiveMessage }),
                                })
                                  .then(r => r.json())
                                  .then(msg => {
                                    setCollectiveMessages([msg, ...collectiveMessages]);
                                    setNewCollectiveMessage('');
                                    showNotification('Message posted anonymously');
                                  })
                                  .catch(() => showNotification('Failed to post message', 'error'));
                              }
                            }}
                            style={styles.button('primary')}
                          >
                            Post
                          </button>
                        </div>
                      </div>
                    )}

                    {/* New Collective */}
                    <div style={{ ...styles.card, marginTop: '30px', textAlign: 'center' }}>
                      <p style={{ color: colors.textMuted, marginBottom: '15px' }}>Don't see your workplace?</p>
                      <button onClick={() => setShowNewCollectiveForm(true)} style={styles.button('secondary')}>
                        + Start a New Collective
                      </button>
                    </div>

                    {/* New Collective Modal */}
                    {showNewCollectiveForm && (
                      <div style={styles.modal} className="modal-enter">
                        <div style={{ ...styles.card, maxWidth: '500px', width: '100%' }}>
                          <h3 style={{ marginTop: 0, marginBottom: '20px' }}>Start a Worker Collective</h3>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Company Name
                            </label>
                            <input
                              type="text"
                              value={newCollective.company}
                              onChange={(e) => setNewCollective({ ...newCollective, company: e.target.value })}
                              placeholder="Where do you work?"
                              style={styles.input}
                            />
                          </div>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Telegram Channel <span style={{ color: colors.textDimmer, fontWeight: 400 }}>(optional)</span>
                            </label>
                            <input
                              type="url"
                              value={newCollective.telegram_url}
                              onChange={(e) => setNewCollective({ ...newCollective, telegram_url: e.target.value })}
                              placeholder="https://t.me/your_channel"
                              style={styles.input}
                            />
                            <div style={{ fontSize: '10px', color: colors.textDimmer, marginTop: '4px' }}>
                              Link a Telegram channel for organizing outside this site
                            </div>
                          </div>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Industry
                            </label>
                            <select
                              value={newCollective.industry}
                              onChange={(e) => setNewCollective({ ...newCollective, industry: e.target.value })}
                              style={{ ...styles.input, cursor: 'pointer' }}
                            >
                              <option value="">Select industry...</option>
                              {['Retail', 'Food Service', 'Warehouse', 'Healthcare', 'Tech', 'Education', 'Transportation', 'Manufacturing', 'Other'].map(ind => (
                                <option key={ind} value={ind}>{ind}</option>
                              ))}
                            </select>
                          </div>

                          <div style={{ marginBottom: '20px' }}>
                            <label style={{ display: 'block', marginBottom: '10px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Issues to organize around
                            </label>
                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                              {['Wages', 'Scheduling', 'Safety', 'Benefits', 'Understaffing', 'Management', 'Other'].map(issue => (
                                <label key={issue} style={{
                                  display: 'flex',
                                  alignItems: 'center',
                                  gap: '8px',
                                  padding: '8px 12px',
                                  backgroundColor: newCollective.issues.includes(issue) ? '#ff333320' : colors.bgLighter,
                                  border: `1px solid ${newCollective.issues.includes(issue) ? colors.primary : colors.borderLight}`,
                                  cursor: 'pointer',
                                  fontSize: '12px'
                                }}>
                                  <input
                                    type="checkbox"
                                    checked={newCollective.issues.includes(issue)}
                                    onChange={() => toggleCollectiveIssue(issue)}
                                    style={{ accentColor: colors.primary }}
                                  />
                                  {issue}
                                </label>
                              ))}
                            </div>
                          </div>

                          <div style={{ display: 'flex', gap: '10px' }}>
                            <button onClick={() => setShowNewCollectiveForm(false)} style={{ ...styles.button('secondary'), flex: 1 }}>
                              Cancel
                            </button>
                            <button onClick={handleCreateCollective} style={{ ...styles.button('primary'), flex: 1 }}>
                              Create
                            </button>
                          </div>
                        </div>
                      </div>
                    )}
                  </section>
                )}

                {/* Consumer Groups */}
                {activeSubTab === 'consumer' && (
                  <section>
                    <h2 style={styles.sectionHeader}>Consumer Collectives</h2>
                    <p style={{ color: colors.textDim, marginBottom: '20px' }}>
                      Group buying power. Negotiate bulk rates for utilities and necessities.
                    </p>

                    <div style={styles.grid}>
                      {consumerGroups.map(group => {
                        const joined = joinedConsumerGroups.includes(group.id);
                        return (
                          <div key={group.id} style={{
                            ...styles.card,
                            border: joined ? `1px solid ${colors.success}` : `1px solid ${colors.border}`
                          }}>
                            <div style={{ fontWeight: 700, fontSize: '16px', marginBottom: '8px' }}>{group.name}</div>
                            <div style={{ fontSize: '12px', color: colors.textDim, marginBottom: '15px' }}>{group.description}</div>

                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>
                              <div>
                                <div style={{ fontSize: '28px', fontWeight: 700 }}>{group.members}</div>
                                <div style={{ fontSize: '10px', color: colors.textDimmer }}>MEMBERS</div>
                              </div>
                              <div style={{ textAlign: 'right' }}>
                                <div style={{ fontSize: '28px', fontWeight: 700, color: colors.success }}>{group.savings}</div>
                                <div style={{ fontSize: '10px', color: colors.textDimmer }}>AVG SAVINGS</div>
                              </div>
                            </div>

                            {!joined ? (
                              <button onClick={() => handleJoinConsumerGroup(group)} style={{ ...styles.button('secondary'), width: '100%' }}>
                                Join Group →
                              </button>
                            ) : (
                              <div style={{ textAlign: 'center', color: colors.success, fontSize: '12px', padding: '12px' }}>
                                ✓ You're a member
                              </div>
                            )}
                          </div>
                        );
                      })}
                    </div>
                  </section>
                )}

                {/* Petitions */}
                {activeSubTab === 'petition' && (
                  <section>
                    <h2 style={styles.sectionHeader}>Local Petitions</h2>

                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '25px', flexWrap: 'wrap', gap: '15px' }}>
                      <p style={{ color: colors.textDim, margin: 0 }}>
                        Local petitions powered by Change.org. Signatures tracked live.
                      </p>
                      <button onClick={() => setShowPetitionForm(true)} style={styles.button('primary')}>
                        + Link Petition
                      </button>
                    </div>

                    {petitions.map(petition => {
                      const pct = petition.goal > 0 ? Math.min((petition.signatures / petition.goal) * 100, 100) : 0;
                      return (
                        <div key={petition.id} style={{
                          ...styles.card,
                          border: petition.status === 'won' ? `1px solid ${colors.success}` : `1px solid ${colors.border}`
                        }}>
                          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '10px' }}>
                            <div style={{ flex: 1 }}>
                              <div style={{ fontWeight: 700, fontSize: '15px', marginBottom: '5px' }}>{petition.title}</div>
                              <div style={{ fontSize: '11px', color: colors.textDimmer }}>Area: {petition.area} • Created {petition.created}</div>
                              {petition.description && (
                                <div style={{ fontSize: '12px', color: colors.textDim, marginTop: '8px' }}>{petition.description}</div>
                              )}
                              {petition.changeorg_url && (
                                <a href={petition.changeorg_url} target="_blank" rel="noopener noreferrer"
                                  style={{ fontSize: '11px', color: colors.primary, textDecoration: 'none', display: 'inline-block', marginTop: '6px' }}>
                                  View on Change.org ↗
                                </a>
                              )}
                            </div>
                            {petition.status === 'won' && <span style={styles.badge(colors.success)}>✓ Won!</span>}
                            {petition.status === 'active' && <span style={styles.badge(colors.warning)}>Active</span>}
                          </div>

                          <div style={{ marginTop: '15px', marginBottom: '15px' }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '12px', marginBottom: '6px' }}>
                              <span style={{ fontWeight: 700 }}>{petition.signatures} signatures</span>
                              <span style={{ color: colors.textDimmer }}>Goal: {petition.goal}</span>
                            </div>
                            <div style={{ height: '10px', backgroundColor: colors.border, borderRadius: '5px' }}>
                              <div style={{
                                height: '100%',
                                width: `${pct}%`,
                                backgroundColor: petition.signatures >= petition.goal ? colors.success : colors.primary,
                                borderRadius: '5px',
                                transition: 'width 0.3s'
                              }} />
                            </div>
                          </div>

                          <div style={{ display: 'flex', gap: '10px' }}>
                            {petition.status === 'active' && petition.changeorg_url && (
                              <a href={petition.changeorg_url} target="_blank" rel="noopener noreferrer"
                                style={{ ...styles.button('secondary'), flex: 1, textAlign: 'center', textDecoration: 'none', display: 'block' }}>
                                Sign on Change.org →
                              </a>
                            )}
                            {petition.changeorg_url && (
                              <button onClick={() => handleRefreshPetition(petition)}
                                style={{ ...styles.button('secondary'), fontSize: '11px', padding: '10px 14px' }}
                                title="Refresh signature count from Change.org">
                                ↻ Refresh
                              </button>
                            )}
                          </div>
                        </div>
                      );
                    })}

                    {/* Petition Modal */}
                    {showPetitionForm && (
                      <div style={styles.modal} className="modal-enter">
                        <div style={{ ...styles.card, maxWidth: '500px', width: '100%' }}>
                          <h3 style={{ marginTop: 0, marginBottom: '20px' }}>Link Change.org Petition</h3>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Change.org URL *
                            </label>
                            <input
                              type="url"
                              value={newPetition.changeorg_url}
                              onChange={(e) => setNewPetition({ ...newPetition, changeorg_url: e.target.value })}
                              placeholder="https://www.change.org/p/your-petition"
                              style={styles.input}
                            />
                            <p style={{ fontSize: '10px', color: colors.textDimmest, margin: '5px 0 0 0' }}>
                              Paste the full URL of your Change.org petition. Signature counts will be pulled automatically.
                            </p>
                          </div>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Title *
                            </label>
                            <input
                              type="text"
                              value={newPetition.title}
                              onChange={(e) => setNewPetition({ ...newPetition, title: e.target.value })}
                              placeholder="What are you petitioning for?"
                              style={styles.input}
                            />
                          </div>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Area (ZIP or Neighborhood) *
                            </label>
                            <input
                              type="text"
                              value={newPetition.area}
                              onChange={(e) => setNewPetition({ ...newPetition, area: e.target.value })}
                              placeholder="Where does this apply?"
                              style={styles.input}
                            />
                          </div>

                          <div style={{ marginBottom: '20px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Description
                            </label>
                            <textarea
                              rows={4}
                              value={newPetition.description}
                              onChange={(e) => setNewPetition({ ...newPetition, description: e.target.value })}
                              placeholder="Explain the issue..."
                              style={{ ...styles.input, resize: 'vertical' }}
                            />
                          </div>

                          <div style={{ display: 'flex', gap: '10px' }}>
                            <button onClick={() => setShowPetitionForm(false)} style={{ ...styles.button('secondary'), flex: 1 }}>
                              Cancel
                            </button>
                            <button
                              onClick={handleCreatePetition}
                              disabled={!newPetition.changeorg_url || !newPetition.title || !newPetition.area}
                              style={{
                                ...styles.button('primary'), flex: 1,
                                opacity: (!newPetition.changeorg_url || !newPetition.title || !newPetition.area) ? 0.5 : 1,
                                cursor: (!newPetition.changeorg_url || !newPetition.title || !newPetition.area) ? 'not-allowed' : 'pointer'
                              }}>
                              Link Petition
                            </button>
                          </div>
                          <p style={{ fontSize: '10px', color: colors.textDimmest, marginTop: '15px', marginBottom: 0 }}>
                            Signatures and goals are pulled directly from Change.org. Click "Refresh" on any petition to update.
                          </p>
                        </div>
                      </div>
                    )}
                  </section>
                )}
              </div>
            )}

            {/* ==================== ACCOUNTABILITY TAB ==================== */}
            {activeTab === 'accountability' && (
              <div>
                <section style={{ marginBottom: '60px' }}>
                  <h2 style={styles.sectionHeader}>{textConfig.report_section_title}</h2>

                  <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>
                    {['landlord', 'employer'].map(type => (
                      <button
                        key={type}
                        onClick={() => setReportType(type)}
                        style={{
                          padding: '12px 25px',
                          backgroundColor: reportType === type ? colors.primary : 'transparent',
                          color: reportType === type ? '#000' : colors.textMuted,
                          border: `1px solid ${reportType === type ? colors.primary : colors.borderLight}`,
                          cursor: 'pointer',
                          fontFamily: 'inherit',
                          textTransform: 'uppercase',
                          fontSize: '12px',
                          letterSpacing: '1px',
                          fontWeight: reportType === type ? 700 : 400
                        }}
                      >
                        {type === 'landlord' ? textConfig.report_type_landlord : textConfig.report_type_employer}
                      </button>
                    ))}
                  </div>

                  <div style={styles.card}>
                    <div style={{ marginBottom: '20px' }}>
                      <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                        {reportType === 'landlord' ? textConfig.report_name_landlord : textConfig.report_name_employer}
                      </label>
                      <input
                        type="text"
                        value={newReport.name}
                        onChange={(e) => setNewReport({ ...newReport, name: e.target.value })}
                        placeholder={reportType === 'landlord' ? textConfig.report_name_landlord_placeholder : textConfig.report_name_employer_placeholder}
                        style={styles.input}
                      />
                    </div>

                    {reportType === 'landlord' && (
                      <div style={{ marginBottom: '20px' }}>
                        <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                          {textConfig.report_address_label}
                        </label>
                        <input
                          type="text"
                          value={newReport.address}
                          onChange={(e) => setNewReport({ ...newReport, address: e.target.value })}
                          placeholder={textConfig.report_address_placeholder}
                          style={styles.input}
                        />
                      </div>
                    )}

                    <div style={{ marginBottom: '20px' }}>
                      <label style={{ display: 'block', marginBottom: '10px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                        {textConfig.report_issues_label}
                      </label>
                      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                        {(reportType === 'landlord'
                          ? [textConfig.issue_no_repairs, textConfig.issue_illegal_fees, textConfig.issue_harassment, textConfig.issue_safety_hazard, textConfig.issue_discrimination, textConfig.issue_retaliation, textConfig.issue_pest, textConfig.issue_no_heat, textConfig.issue_other]
                          : [textConfig.issue_wage_theft, textConfig.issue_unsafe, textConfig.issue_retaliation, textConfig.issue_discrimination, textConfig.issue_harassment, textConfig.issue_scheduling, textConfig.issue_unpaid_ot, textConfig.issue_other]
                        ).map(issue => (
                          <label key={issue} style={{
                            display: 'flex',
                            alignItems: 'center',
                            gap: '8px',
                            padding: '10px 14px',
                            backgroundColor: newReport.issues.includes(issue) ? '#ff333320' : colors.bgLighter,
                            border: `1px solid ${newReport.issues.includes(issue) ? colors.primary : colors.borderLight}`,
                            cursor: 'pointer',
                            fontSize: '12px'
                          }}>
                            <input
                              type="checkbox"
                              checked={newReport.issues.includes(issue)}
                              onChange={() => toggleReportIssue(issue)}
                              style={{ accentColor: colors.primary }}
                            />
                            {issue}
                          </label>
                        ))}
                      </div>
                    </div>

                    <div style={{ marginBottom: '20px' }}>
                      <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                        {textConfig.report_desc_label}
                      </label>
                      <textarea
                        rows={4}
                        value={newReport.description}
                        onChange={(e) => setNewReport({ ...newReport, description: e.target.value })}
                        placeholder={textConfig.report_desc_placeholder}
                        style={{ ...styles.input, resize: 'vertical' }}
                      />
                    </div>

                    <div style={{ marginBottom: '25px' }}>
                      <label style={{ display: 'flex', alignItems: 'center', gap: '10px', cursor: 'pointer' }}>
                        <input
                          type="checkbox"
                          checked={newReport.anonymous}
                          onChange={(e) => setNewReport({ ...newReport, anonymous: e.target.checked })}
                          style={{ accentColor: colors.primary, width: '18px', height: '18px' }}
                        />
                        <span style={{ fontSize: '13px', color: colors.textMuted }}>{textConfig.report_anonymous}</span>
                      </label>
                    </div>

                    <button onClick={handleSubmitReport} style={{ ...styles.button('primary'), width: '100%', padding: '15px' }}>
                      {textConfig.report_submit_btn}
                    </button>

                    <p style={{ fontSize: '10px', color: colors.textDimmest, marginTop: '15px', textAlign: 'center' }}>
                      {textConfig.report_footer}
                    </p>
                  </div>
                </section>

                <section>
                  <h2 style={styles.sectionHeader}>{textConfig.reports_section_title}</h2>

                  <div style={{ display: 'flex', gap: '10px', marginBottom: '25px' }}>
                    {[
                      { key: 'all', label: textConfig.reports_filter_all },
                      { key: 'landlord', label: textConfig.reports_filter_landlord },
                      { key: 'employer', label: textConfig.reports_filter_employer }
                    ].map(filter => (
                      <button
                        key={filter.key}
                        onClick={() => setReportFilter(filter.key)}
                        style={{
                          padding: '8px 15px',
                          backgroundColor: reportFilter === filter.key ? colors.primary : 'transparent',
                          color: reportFilter === filter.key ? '#000' : colors.textDim,
                          border: `1px solid ${reportFilter === filter.key ? colors.primary : colors.borderLight}`,
                          cursor: 'pointer',
                          fontFamily: 'inherit',
                          fontSize: '11px',
                          textTransform: 'capitalize'
                        }}
                      >
                        {filter.label}
                      </button>
                    ))}
                  </div>

                  {reports.map(report => (
                    <div key={report.id} style={{
                      ...styles.card,
                      display: 'flex',
                      justifyContent: 'space-between',
                      alignItems: 'center',
                      flexWrap: 'wrap',
                      gap: '15px'
                    }}>
                      <div style={{ flex: 1, minWidth: '200px' }}>
                        <div style={{ marginBottom: '8px' }}>
                          <span style={styles.badge(report.type === 'landlord' ? colors.warning : colors.purple)}>
                            {report.type === 'landlord' ? '🏠' : '💼'} {report.type}
                          </span>
                        </div>
                        <div style={{ fontWeight: 700, fontSize: '15px', marginBottom: '4px' }}>{report.name}</div>
                        {report.address && <div style={{ fontSize: '12px', color: colors.textDim, marginBottom: '8px' }}>{report.address}</div>}
                        <div style={{ display: 'flex', gap: '5px', flexWrap: 'wrap' }}>
                          {report.issues.map(issue => (
                            <span key={issue} style={{ ...styles.badge(colors.primary), marginRight: 0 }}>{issue}</span>
                          ))}
                        </div>
                      </div>
                      <div style={{ textAlign: 'right' }}>
                        <div style={{ fontSize: '36px', fontWeight: 700, color: colors.primary }}>{report.reports}</div>
                        <div style={{ fontSize: '10px', color: colors.textDimmer }}>{textConfig.reports_count_label}</div>
                        <div style={{ fontSize: '11px', color: colors.textDimmest, marginTop: '5px' }}>{textConfig.reports_last} {report.lastReport}</div>
                      </div>
                    </div>
                  ))}
                </section>
              </div>
            )}
          </main>

          {/* Customization Panel Toggle Button */}
          <button
            onClick={() => setShowCustomizationPanel(!showCustomizationPanel)}
            style={{
              position: 'fixed',
              bottom: '20px',
              right: '20px',
              width: '50px',
              height: '50px',
              borderRadius: '50%',
              backgroundColor: colors.primary,
              color: '#000',
              border: 'none',
              cursor: 'pointer',
              fontSize: '20px',
              fontWeight: 700,
              zIndex: 999,
              boxShadow: '0 4px 12px rgba(0,0,0,0.5)',
              transition: 'transform 0.2s',
            }}
            title="Customize Text & Styling"
          >
            ⚙
          </button>

          {/* Customization Panel */}
          {showCustomizationPanel && (
            <div style={{
              position: 'fixed',
              top: 0,
              right: 0,
              width: '450px',
              maxWidth: '100vw',
              height: '100vh',
              backgroundColor: colors.bgLight,
              borderLeft: `2px solid ${colors.primary}`,
              zIndex: 1000,
              display: 'flex',
              flexDirection: 'column',
              boxShadow: '-4px 0 20px rgba(0,0,0,0.5)',
            }} className="modal-enter">
              {/* Panel Header */}
              <div style={{
                padding: '20px',
                borderBottom: `1px solid ${colors.border}`,
                display: 'flex',
                justifyContent: 'space-between',
                alignItems: 'center',
              }}>
                <div>
                  <h2 style={{ margin: 0, fontSize: '16px', fontWeight: 700, color: colors.primary }}>
                    CUSTOMIZATION CONTROL PANEL
                  </h2>
                  <p style={{ margin: '4px 0 0', fontSize: '11px', color: colors.textDim }}>
                    Edit text, colors, and fonts
                  </p>
                </div>
                <button
                  onClick={() => setShowCustomizationPanel(false)}
                  style={{
                    background: 'none',
                    border: 'none',
                    color: colors.textMuted,
                    cursor: 'pointer',
                    fontSize: '24px',
                    padding: '5px',
                  }}
                >
                  ×
                </button>
              </div>

              {/* Panel Tabs */}
              <div style={{
                display: 'flex',
                borderBottom: `1px solid ${colors.border}`,
              }}>
                {['text', 'colors', 'fonts'].map(tab => (
                  <button
                    key={tab}
                    onClick={() => setPanelTab(tab)}
                    style={{
                      flex: 1,
                      padding: '12px',
                      backgroundColor: panelTab === tab ? colors.bgLighter : 'transparent',
                      color: panelTab === tab ? colors.primary : colors.textDim,
                      border: 'none',
                      borderBottom: panelTab === tab ? `2px solid ${colors.primary}` : '2px solid transparent',
                      cursor: 'pointer',
                      fontFamily: 'inherit',
                      fontSize: '11px',
                      textTransform: 'uppercase',
                      letterSpacing: '1px',
                      fontWeight: panelTab === tab ? 700 : 400,
                    }}
                  >
                    {tab}
                  </button>
                ))}
              </div>

              {/* Panel Content */}
              <div style={{
                flex: 1,
                overflow: 'auto',
                padding: '20px',
              }}>
                {/* Text Tab */}
                {panelTab === 'text' && (
                  <div>
                    {/* Search Filter */}
                    <input
                      type="text"
                      placeholder="Filter text elements..."
                      value={textFilter}
                      onChange={(e) => setTextFilter(e.target.value)}
                      style={{
                        ...styles.input,
                        marginBottom: '20px',
                        fontSize: '12px',
                      }}
                    />

                    {/* Text Categories */}
                    {Object.entries(textCategories).map(([category, keys]) => {
                      const filteredKeys = keys.filter(key =>
                        !textFilter ||
                        key.toLowerCase().includes(textFilter.toLowerCase()) ||
                        (textConfig[key] && textConfig[key].toLowerCase().includes(textFilter.toLowerCase()))
                      );
                      if (filteredKeys.length === 0) return null;

                      return (
                        <div key={category} style={{ marginBottom: '25px' }}>
                          <h3 style={{
                            fontSize: '11px',
                            color: colors.primary,
                            textTransform: 'uppercase',
                            letterSpacing: '2px',
                            marginBottom: '12px',
                            paddingBottom: '8px',
                            borderBottom: `1px solid ${colors.border}`,
                          }}>
                            {category}
                          </h3>
                          {filteredKeys.map(key => (
                            <div key={key} style={{ marginBottom: '12px' }}>
                              <label style={{
                                display: 'block',
                                fontSize: '10px',
                                color: colors.textDim,
                                marginBottom: '4px',
                                textTransform: 'uppercase',
                                letterSpacing: '0.5px',
                              }}>
                                {key.replace(/_/g, ' ')}
                              </label>
                              <input
                                type="text"
                                value={textConfig[key] || ''}
                                onChange={(e) => updateText(key, e.target.value)}
                                style={{
                                  ...styles.input,
                                  fontSize: '12px',
                                  padding: '8px 10px',
                                }}
                              />
                            </div>
                          ))}
                        </div>
                      );
                    })}
                  </div>
                )}

                {/* Colors Tab */}
                {panelTab === 'colors' && (
                  <div>
                    <p style={{ fontSize: '11px', color: colors.textDim, marginBottom: '20px' }}>
                      Customize the color scheme. Changes apply immediately.
                    </p>
                    {Object.entries(colorConfig).map(([key, value]) => (
                      <div key={key} style={{
                        display: 'flex',
                        alignItems: 'center',
                        marginBottom: '15px',
                        gap: '12px',
                      }}>
                        <input
                          type="color"
                          value={value}
                          onChange={(e) => updateColor(key, e.target.value)}
                          style={{
                            width: '40px',
                            height: '40px',
                            border: `1px solid ${colors.borderLight}`,
                            borderRadius: '4px',
                            cursor: 'pointer',
                            padding: '2px',
                            backgroundColor: colors.bgLighter,
                          }}
                        />
                        <div style={{ flex: 1 }}>
                          <div style={{
                            fontSize: '12px',
                            color: colors.text,
                            marginBottom: '2px',
                            textTransform: 'capitalize',
                          }}>
                            {key.replace(/([A-Z])/g, ' $1').trim()}
                          </div>
                          <div style={{ fontSize: '10px', color: colors.textDim }}>
                            {value}
                          </div>
                        </div>
                        <input
                          type="text"
                          value={value}
                          onChange={(e) => updateColor(key, e.target.value)}
                          style={{
                            ...styles.input,
                            width: '90px',
                            fontSize: '11px',
                            padding: '6px 8px',
                          }}
                        />
                      </div>
                    ))}
                  </div>
                )}

                {/* Fonts Tab */}
                {panelTab === 'fonts' && (
                  <div>
                    <p style={{ fontSize: '11px', color: colors.textDim, marginBottom: '20px' }}>
                      Choose fonts for different elements. Changes apply immediately.
                    </p>
                    {Object.entries(fontConfig).map(([key, value]) => (
                      <div key={key} style={{ marginBottom: '20px' }}>
                        <label style={{
                          display: 'block',
                          fontSize: '11px',
                          color: colors.textMuted,
                          marginBottom: '8px',
                          textTransform: 'uppercase',
                          letterSpacing: '1px',
                        }}>
                          {key} Font
                        </label>
                        <select
                          value={value}
                          onChange={(e) => updateFont(key, e.target.value)}
                          style={{
                            ...styles.input,
                            fontSize: '12px',
                            cursor: 'pointer',
                          }}
                        >
                          {fontOptions.map(font => (
                            <option key={font} value={font} style={{ fontFamily: font }}>
                              {font.split(',')[0].replace(/'/g, '')}
                            </option>
                          ))}
                        </select>
                        <div style={{
                          marginTop: '8px',
                          padding: '12px',
                          backgroundColor: colors.bgLighter,
                          border: `1px solid ${colors.border}`,
                          fontFamily: value,
                          fontSize: '14px',
                        }}>
                          Preview: The quick brown fox jumps over the lazy dog
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>

              {/* Panel Footer */}
              <div style={{
                padding: '15px 20px',
                borderTop: `1px solid ${colors.border}`,
                display: 'flex',
                flexDirection: 'column',
                gap: '10px',
              }}>
                <div style={{ display: 'flex', gap: '10px' }}>
                  <button
                    onClick={exportConfig}
                    style={{
                      ...styles.button('secondary'),
                      flex: 1,
                      padding: '10px',
                      fontSize: '10px',
                    }}
                  >
                    Export
                  </button>
                  <label style={{
                    ...styles.button('secondary'),
                    flex: 1,
                    padding: '10px',
                    fontSize: '10px',
                    textAlign: 'center',
                    cursor: 'pointer',
                  }}>
                    Import
                    <input
                      type="file"
                      accept=".json"
                      onChange={importConfig}
                      style={{ display: 'none' }}
                    />
                  </label>
                </div>
                <button
                  onClick={resetAllConfig}
                  style={{
                    ...styles.button('primary'),
                    padding: '10px',
                    fontSize: '10px',
                    backgroundColor: colors.warning,
                    color: '#000',
                  }}
                >
                  Reset All to Defaults
                </button>
              </div>
            </div>
          )}

          {/* Footer */}
          <footer style={{
            borderTop: `1px solid ${colors.border}`,
            padding: '30px 40px',
            marginTop: '60px',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            flexWrap: 'wrap',
            gap: '20px'
          }}>
            <div style={{ fontSize: '11px', color: colors.textDimmest }}>
              <div style={{ fontWeight: 700, marginBottom: '4px' }}>{textConfig.footer_brand}</div>
              <div>{textConfig.footer_tagline}</div>
            </div>
            <div style={{ display: 'flex', gap: '25px', fontSize: '11px' }}>
              <a href="#" style={{ color: colors.textDim, textDecoration: 'none' }}>{textConfig.footer_source}</a>
              <a href="#" style={{ color: colors.textDim, textDecoration: 'none' }}>{textConfig.footer_data}</a>
              <a href="#" style={{ color: colors.textDim, textDecoration: 'none' }}>{textConfig.footer_privacy}</a>
            </div>
          </footer>
        </div>
      );
    };

    // Render
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<SolidarityPlatform />);
  </script>
</body>
</html>
