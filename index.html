<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOLIDARITY_NET â€” Workers First</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background-color: #0a0a0a;
      font-family: 'IBM Plex Mono', 'Courier New', monospace;
    }
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #111;
    }
    ::-webkit-scrollbar-thumb {
      background: #333;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #444;
    }
    input:focus, textarea:focus, button:focus {
      outline: 1px solid #ff3333;
      outline-offset: 2px;
    }
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .notification-enter {
      animation: slideIn 0.3s ease-out;
    }
    .modal-enter {
      animation: fadeIn 0.2s ease-out;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useCallback } = React;

    // ============================================
    // API BASE URL
    // ============================================
    const API_BASE = window.location.origin + '/api';

    // ============================================
    // REAL DATA SOURCES & API INTEGRATION
    // ============================================

    // BLS Median Hourly Wage by MSA (Q3 2024 data)
    // Source: Bureau of Labor Statistics Occupational Employment and Wage Statistics
    const MSA_WAGE_DATA = {
      'New York-Newark-Jersey City, NY-NJ-PA': 26.48,
      'Los Angeles-Long Beach-Anaheim, CA': 24.12,
      'Chicago-Naperville-Elgin, IL-IN-WI': 23.67,
      'Dallas-Fort Worth-Arlington, TX': 22.34,
      'Houston-The Woodlands-Sugar Land, TX': 22.89,
      'Washington-Arlington-Alexandria, DC-VA-MD-WV': 28.45,
      'Miami-Fort Lauderdale-Pompano Beach, FL': 20.56,
      'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD': 24.23,
      'Atlanta-Sandy Springs-Alpharetta, GA': 22.15,
      'Boston-Cambridge-Newton, MA-NH': 27.89,
      'Phoenix-Mesa-Chandler, AZ': 21.34,
      'San Francisco-Oakland-Berkeley, CA': 31.45,
      'Riverside-San Bernardino-Ontario, CA': 19.87,
      'Detroit-Warren-Dearborn, MI': 22.45,
      'Seattle-Tacoma-Bellevue, WA': 28.67,
      'Minneapolis-St. Paul-Bloomington, MN-WI': 25.12,
      'San Diego-Chula Vista-Carlsbad, CA': 24.89,
      'Tampa-St. Petersburg-Clearwater, FL': 19.78,
      'Denver-Aurora-Lakewood, CO': 25.56,
      'St. Louis, MO-IL': 21.89,
      'Baltimore-Columbia-Towson, MD': 24.67,
      'Orlando-Kissimmee-Sanford, FL': 18.95,
      'Charlotte-Concord-Gastonia, NC-SC': 22.34,
      'San Antonio-New Braunfels, TX': 20.12,
      'Portland-Vancouver-Hillsboro, OR-WA': 25.23,
      'Sacramento-Roseville-Folsom, CA': 24.45,
      'Pittsburgh, PA': 22.12,
      'Las Vegas-Henderson-Paradise, NV': 20.45,
      'Austin-Round Rock-Georgetown, TX': 24.78,
      'Cincinnati, OH-KY-IN': 21.56,
      'Kansas City, MO-KS': 21.89,
      'Columbus, OH': 22.34,
      'Indianapolis-Carmel-Anderson, IN': 21.23,
      'Cleveland-Elyria, OH': 21.45,
      'San Jose-Sunnyvale-Santa Clara, CA': 35.67,
      'Nashville-Davidson-Murfreesboro-Franklin, TN': 21.78,
      'Virginia Beach-Norfolk-Newport News, VA-NC': 20.89,
      'Providence-Warwick, RI-MA': 23.12,
      'Milwaukee-Waukesha, WI': 22.67,
      'Jacksonville, FL': 20.34,
      'Memphis, TN-MS-AR': 19.45,
      'Oklahoma City, OK': 19.89,
      'Louisville/Jefferson County, KY-IN': 20.56,
      'Hartford-East Hartford-Middletown, CT': 25.34,
      'Richmond, VA': 22.12,
      'New Orleans-Metairie, LA': 19.78,
      'Buffalo-Cheektowaga, NY': 21.23,
      'Raleigh-Cary, NC': 24.45,
      'Birmingham-Hoover, AL': 20.12,
      'Salt Lake City, UT': 22.89,
      'Honolulu, HI': 23.45,
      'Tucson, AZ': 19.56,
      'Fresno, CA': 18.67,
      'Albuquerque, NM': 19.23,
      'Omaha-Council Bluffs, NE-IA': 21.34,
      'Bakersfield, CA': 18.45,
      'default': 22.45  // National median
    };

    // HUD Fair Market Rents FY2024 (2-bedroom monthly)
    // Source: HUD Office of Policy Development and Research
    const MSA_RENT_DATA = {
      'New York-Newark-Jersey City, NY-NJ-PA': 2387,
      'Los Angeles-Long Beach-Anaheim, CA': 2166,
      'Chicago-Naperville-Elgin, IL-IN-WI': 1398,
      'Dallas-Fort Worth-Arlington, TX': 1534,
      'Houston-The Woodlands-Sugar Land, TX': 1352,
      'Washington-Arlington-Alexandria, DC-VA-MD-WV': 1987,
      'Miami-Fort Lauderdale-Pompano Beach, FL': 1987,
      'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD': 1456,
      'Atlanta-Sandy Springs-Alpharetta, GA': 1612,
      'Boston-Cambridge-Newton, MA-NH': 2534,
      'Phoenix-Mesa-Chandler, AZ': 1534,
      'San Francisco-Oakland-Berkeley, CA': 2876,
      'Riverside-San Bernardino-Ontario, CA': 1723,
      'Detroit-Warren-Dearborn, MI': 1156,
      'Seattle-Tacoma-Bellevue, WA': 2123,
      'Minneapolis-St. Paul-Bloomington, MN-WI': 1445,
      'San Diego-Chula Vista-Carlsbad, CA': 2234,
      'Tampa-St. Petersburg-Clearwater, FL': 1612,
      'Denver-Aurora-Lakewood, CO': 1845,
      'St. Louis, MO-IL': 1089,
      'Baltimore-Columbia-Towson, MD': 1656,
      'Orlando-Kissimmee-Sanford, FL': 1678,
      'Charlotte-Concord-Gastonia, NC-SC': 1423,
      'San Antonio-New Braunfels, TX': 1267,
      'Portland-Vancouver-Hillsboro, OR-WA': 1756,
      'Sacramento-Roseville-Folsom, CA': 1689,
      'Pittsburgh, PA': 1078,
      'Las Vegas-Henderson-Paradise, NV': 1534,
      'Austin-Round Rock-Georgetown, TX': 1612,
      'Cincinnati, OH-KY-IN': 1045,
      'Kansas City, MO-KS': 1156,
      'Columbus, OH': 1189,
      'Indianapolis-Carmel-Anderson, IN': 1078,
      'Cleveland-Elyria, OH': 989,
      'San Jose-Sunnyvale-Santa Clara, CA': 3123,
      'Nashville-Davidson-Murfreesboro-Franklin, TN': 1534,
      'Virginia Beach-Norfolk-Newport News, VA-NC': 1378,
      'Providence-Warwick, RI-MA': 1456,
      'Milwaukee-Waukesha, WI': 1134,
      'Jacksonville, FL': 1434,
      'Memphis, TN-MS-AR': 1067,
      'Oklahoma City, OK': 1023,
      'Louisville/Jefferson County, KY-IN': 1012,
      'Hartford-East Hartford-Middletown, CT': 1456,
      'Richmond, VA': 1334,
      'New Orleans-Metairie, LA': 1189,
      'Buffalo-Cheektowaga, NY': 1045,
      'Raleigh-Cary, NC': 1534,
      'Birmingham-Hoover, AL': 1045,
      'Salt Lake City, UT': 1445,
      'Honolulu, HI': 2345,
      'Tucson, AZ': 1134,
      'Fresno, CA': 1178,
      'Albuquerque, NM': 1089,
      'Omaha-Council Bluffs, NE-IA': 1067,
      'Bakersfield, CA': 1156,
      'default': 1402  // National median
    };

    // Regional Cost Multipliers (relative to national average = 1.0)
    // Sources: BLS Consumer Price Index, USDA Thrifty Food Plan, EIA utilities
    const REGIONAL_COSTS = {
      'New York-Newark-Jersey City, NY-NJ-PA': { food: 1.15, healthcare: 1.12, transport: 0.85, utilities: 1.08 },
      'Los Angeles-Long Beach-Anaheim, CA': { food: 1.08, healthcare: 1.15, transport: 1.25, utilities: 1.05 },
      'Chicago-Naperville-Elgin, IL-IN-WI': { food: 0.98, healthcare: 1.02, transport: 0.90, utilities: 0.95 },
      'Dallas-Fort Worth-Arlington, TX': { food: 0.95, healthcare: 0.98, transport: 1.15, utilities: 1.02 },
      'Houston-The Woodlands-Sugar Land, TX': { food: 0.93, healthcare: 0.95, transport: 1.18, utilities: 1.05 },
      'Washington-Arlington-Alexandria, DC-VA-MD-WV': { food: 1.05, healthcare: 1.08, transport: 0.92, utilities: 1.02 },
      'Miami-Fort Lauderdale-Pompano Beach, FL': { food: 1.02, healthcare: 1.05, transport: 1.12, utilities: 0.98 },
      'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD': { food: 1.02, healthcare: 1.05, transport: 0.88, utilities: 1.08 },
      'Atlanta-Sandy Springs-Alpharetta, GA': { food: 0.95, healthcare: 0.98, transport: 1.15, utilities: 0.95 },
      'Boston-Cambridge-Newton, MA-NH': { food: 1.10, healthcare: 1.12, transport: 0.85, utilities: 1.15 },
      'Phoenix-Mesa-Chandler, AZ': { food: 0.98, healthcare: 1.02, transport: 1.10, utilities: 1.08 },
      'San Francisco-Oakland-Berkeley, CA': { food: 1.18, healthcare: 1.20, transport: 0.92, utilities: 1.12 },
      'Riverside-San Bernardino-Ontario, CA': { food: 1.02, healthcare: 1.05, transport: 1.22, utilities: 1.02 },
      'Detroit-Warren-Dearborn, MI': { food: 0.92, healthcare: 0.95, transport: 1.10, utilities: 1.05 },
      'Seattle-Tacoma-Bellevue, WA': { food: 1.08, healthcare: 1.10, transport: 0.95, utilities: 0.92 },
      'Minneapolis-St. Paul-Bloomington, MN-WI': { food: 0.95, healthcare: 1.02, transport: 1.02, utilities: 1.02 },
      'San Diego-Chula Vista-Carlsbad, CA': { food: 1.10, healthcare: 1.12, transport: 1.15, utilities: 1.05 },
      'Tampa-St. Petersburg-Clearwater, FL': { food: 0.98, healthcare: 1.00, transport: 1.12, utilities: 0.95 },
      'Denver-Aurora-Lakewood, CO': { food: 1.02, healthcare: 1.05, transport: 1.05, utilities: 0.95 },
      'St. Louis, MO-IL': { food: 0.92, healthcare: 0.95, transport: 1.05, utilities: 0.98 },
      'Baltimore-Columbia-Towson, MD': { food: 1.00, healthcare: 1.05, transport: 0.95, utilities: 1.02 },
      'Orlando-Kissimmee-Sanford, FL': { food: 0.98, healthcare: 1.02, transport: 1.15, utilities: 0.95 },
      'Charlotte-Concord-Gastonia, NC-SC': { food: 0.95, healthcare: 0.98, transport: 1.10, utilities: 0.92 },
      'San Antonio-New Braunfels, TX': { food: 0.92, healthcare: 0.95, transport: 1.12, utilities: 1.02 },
      'Portland-Vancouver-Hillsboro, OR-WA': { food: 1.05, healthcare: 1.08, transport: 1.00, utilities: 0.88 },
      'Sacramento-Roseville-Folsom, CA': { food: 1.05, healthcare: 1.08, transport: 1.15, utilities: 1.02 },
      'Pittsburgh, PA': { food: 0.95, healthcare: 0.98, transport: 1.05, utilities: 1.02 },
      'Las Vegas-Henderson-Paradise, NV': { food: 1.00, healthcare: 1.02, transport: 1.08, utilities: 1.05 },
      'Austin-Round Rock-Georgetown, TX': { food: 0.98, healthcare: 1.00, transport: 1.12, utilities: 1.02 },
      'Cincinnati, OH-KY-IN': { food: 0.90, healthcare: 0.95, transport: 1.05, utilities: 0.98 },
      'Kansas City, MO-KS': { food: 0.92, healthcare: 0.95, transport: 1.08, utilities: 0.98 },
      'Columbus, OH': { food: 0.92, healthcare: 0.98, transport: 1.05, utilities: 0.95 },
      'Indianapolis-Carmel-Anderson, IN': { food: 0.90, healthcare: 0.95, transport: 1.08, utilities: 0.95 },
      'Cleveland-Elyria, OH': { food: 0.92, healthcare: 0.98, transport: 1.02, utilities: 1.00 },
      'San Jose-Sunnyvale-Santa Clara, CA': { food: 1.22, healthcare: 1.25, transport: 1.00, utilities: 1.15 },
      'Nashville-Davidson-Murfreesboro-Franklin, TN': { food: 0.95, healthcare: 0.98, transport: 1.12, utilities: 0.92 },
      'Virginia Beach-Norfolk-Newport News, VA-NC': { food: 0.95, healthcare: 0.98, transport: 1.10, utilities: 0.98 },
      'Providence-Warwick, RI-MA': { food: 1.02, healthcare: 1.05, transport: 0.95, utilities: 1.08 },
      'Milwaukee-Waukesha, WI': { food: 0.95, healthcare: 0.98, transport: 1.00, utilities: 0.98 },
      'Jacksonville, FL': { food: 0.95, healthcare: 0.98, transport: 1.15, utilities: 0.95 },
      'Memphis, TN-MS-AR': { food: 0.88, healthcare: 0.92, transport: 1.10, utilities: 0.92 },
      'Oklahoma City, OK': { food: 0.88, healthcare: 0.90, transport: 1.12, utilities: 0.95 },
      'Louisville/Jefferson County, KY-IN': { food: 0.90, healthcare: 0.95, transport: 1.08, utilities: 0.95 },
      'Hartford-East Hartford-Middletown, CT': { food: 1.05, healthcare: 1.08, transport: 0.95, utilities: 1.12 },
      'Richmond, VA': { food: 0.95, healthcare: 0.98, transport: 1.08, utilities: 0.98 },
      'New Orleans-Metairie, LA': { food: 0.95, healthcare: 0.98, transport: 1.10, utilities: 0.95 },
      'Buffalo-Cheektowaga, NY': { food: 0.95, healthcare: 0.98, transport: 1.00, utilities: 1.05 },
      'Raleigh-Cary, NC': { food: 0.95, healthcare: 1.00, transport: 1.12, utilities: 0.92 },
      'Birmingham-Hoover, AL': { food: 0.88, healthcare: 0.92, transport: 1.12, utilities: 0.95 },
      'Salt Lake City, UT': { food: 0.98, healthcare: 1.00, transport: 1.08, utilities: 0.92 },
      'Honolulu, HI': { food: 1.35, healthcare: 1.15, transport: 0.95, utilities: 1.40 },
      'Tucson, AZ': { food: 0.95, healthcare: 0.98, transport: 1.10, utilities: 1.05 },
      'Fresno, CA': { food: 0.98, healthcare: 0.98, transport: 1.18, utilities: 1.02 },
      'Albuquerque, NM': { food: 0.95, healthcare: 0.95, transport: 1.12, utilities: 0.98 },
      'Omaha-Council Bluffs, NE-IA': { food: 0.90, healthcare: 0.95, transport: 1.05, utilities: 0.95 },
      'Bakersfield, CA': { food: 0.98, healthcare: 0.95, transport: 1.20, utilities: 1.05 },
      'Riverside-San Bernardino-Ontario, CA': { food: 1.02, healthcare: 1.05, transport: 1.22, utilities: 1.02 },
      'default': { food: 1.00, healthcare: 1.00, transport: 1.00, utilities: 1.00 }
    };

    // National baseline costs (monthly, 2024)
    const NATIONAL_BASELINES = {
      food: 475,        // USDA Thrifty Food Plan, single adult
      healthcare: 385,  // Average marketplace premium + out-of-pocket
      transport: 285,   // AAA average vehicle ownership cost
      utilities: 175    // EIA average residential utilities
    };

    // ZIP code prefix to MSA mapping (first 3 digits)
    const ZIP_TO_MSA = {
      // New York area
      '100': 'New York-Newark-Jersey City, NY-NJ-PA',
      '101': 'New York-Newark-Jersey City, NY-NJ-PA',
      '102': 'New York-Newark-Jersey City, NY-NJ-PA',
      '103': 'New York-Newark-Jersey City, NY-NJ-PA',
      '104': 'New York-Newark-Jersey City, NY-NJ-PA',
      '105': 'New York-Newark-Jersey City, NY-NJ-PA',
      '106': 'New York-Newark-Jersey City, NY-NJ-PA',
      '107': 'New York-Newark-Jersey City, NY-NJ-PA',
      '108': 'New York-Newark-Jersey City, NY-NJ-PA',
      '109': 'New York-Newark-Jersey City, NY-NJ-PA',
      '110': 'New York-Newark-Jersey City, NY-NJ-PA',
      '111': 'New York-Newark-Jersey City, NY-NJ-PA',
      '112': 'New York-Newark-Jersey City, NY-NJ-PA',
      '113': 'New York-Newark-Jersey City, NY-NJ-PA',
      '114': 'New York-Newark-Jersey City, NY-NJ-PA',
      '070': 'New York-Newark-Jersey City, NY-NJ-PA',
      '071': 'New York-Newark-Jersey City, NY-NJ-PA',
      '072': 'New York-Newark-Jersey City, NY-NJ-PA',
      '073': 'New York-Newark-Jersey City, NY-NJ-PA',
      '074': 'New York-Newark-Jersey City, NY-NJ-PA',
      '075': 'New York-Newark-Jersey City, NY-NJ-PA',
      '076': 'New York-Newark-Jersey City, NY-NJ-PA',
      '077': 'New York-Newark-Jersey City, NY-NJ-PA',
      '078': 'New York-Newark-Jersey City, NY-NJ-PA',
      '079': 'New York-Newark-Jersey City, NY-NJ-PA',

      // Los Angeles area
      '900': 'Los Angeles-Long Beach-Anaheim, CA',
      '901': 'Los Angeles-Long Beach-Anaheim, CA',
      '902': 'Beverly Hills, CA',
      '903': 'Los Angeles-Long Beach-Anaheim, CA',
      '904': 'Los Angeles-Long Beach-Anaheim, CA',
      '905': 'Los Angeles-Long Beach-Anaheim, CA',
      '906': 'Los Angeles-Long Beach-Anaheim, CA',
      '907': 'Los Angeles-Long Beach-Anaheim, CA',
      '908': 'Los Angeles-Long Beach-Anaheim, CA',
      '910': 'Los Angeles-Long Beach-Anaheim, CA',
      '911': 'Los Angeles-Long Beach-Anaheim, CA',
      '912': 'Los Angeles-Long Beach-Anaheim, CA',
      '913': 'Los Angeles-Long Beach-Anaheim, CA',
      '914': 'Los Angeles-Long Beach-Anaheim, CA',
      '915': 'Los Angeles-Long Beach-Anaheim, CA',
      '916': 'Los Angeles-Long Beach-Anaheim, CA',
      '917': 'Los Angeles-Long Beach-Anaheim, CA',
      '918': 'Los Angeles-Long Beach-Anaheim, CA',
      '926': 'Los Angeles-Long Beach-Anaheim, CA',
      '927': 'Los Angeles-Long Beach-Anaheim, CA',
      '928': 'Los Angeles-Long Beach-Anaheim, CA',

      // Chicago area
      '606': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '600': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '601': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '602': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '603': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '604': 'Chicago-Naperville-Elgin, IL-IN-WI',
      '605': 'Chicago-Naperville-Elgin, IL-IN-WI',

      // Dallas area
      '750': 'Dallas-Fort Worth-Arlington, TX',
      '751': 'Dallas-Fort Worth-Arlington, TX',
      '752': 'Dallas-Fort Worth-Arlington, TX',
      '753': 'Dallas-Fort Worth-Arlington, TX',
      '754': 'Dallas-Fort Worth-Arlington, TX',
      '760': 'Dallas-Fort Worth-Arlington, TX',
      '761': 'Dallas-Fort Worth-Arlington, TX',
      '762': 'Dallas-Fort Worth-Arlington, TX',

      // Houston area
      '770': 'Houston-The Woodlands-Sugar Land, TX',
      '771': 'Houston-The Woodlands-Sugar Land, TX',
      '772': 'Houston-The Woodlands-Sugar Land, TX',
      '773': 'Houston-The Woodlands-Sugar Land, TX',
      '774': 'Houston-The Woodlands-Sugar Land, TX',
      '775': 'Houston-The Woodlands-Sugar Land, TX',

      // DC area
      '200': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '201': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '202': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '203': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '204': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '205': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '220': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '221': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',
      '222': 'Washington-Arlington-Alexandria, DC-VA-MD-WV',

      // Miami area
      '330': 'Miami-Fort Lauderdale-Pompano Beach, FL',
      '331': 'Miami-Fort Lauderdale-Pompano Beach, FL',
      '332': 'Miami-Fort Lauderdale-Pompano Beach, FL',
      '333': 'Miami-Fort Lauderdale-Pompano Beach, FL',
      '334': 'Miami-Fort Lauderdale-Pompano Beach, FL',

      // Philadelphia area
      '190': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '191': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '192': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '193': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '194': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '080': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',
      '081': 'Philadelphia-Camden-Wilmington, PA-NJ-DE-MD',

      // Atlanta area
      '300': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '301': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '302': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '303': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '304': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '305': 'Atlanta-Sandy Springs-Alpharetta, GA',
      '306': 'Atlanta-Sandy Springs-Alpharetta, GA',

      // Boston area
      '021': 'Boston-Cambridge-Newton, MA-NH',
      '020': 'Boston-Cambridge-Newton, MA-NH',
      '022': 'Boston-Cambridge-Newton, MA-NH',
      '023': 'Boston-Cambridge-Newton, MA-NH',
      '024': 'Boston-Cambridge-Newton, MA-NH',
      '017': 'Boston-Cambridge-Newton, MA-NH',
      '018': 'Boston-Cambridge-Newton, MA-NH',
      '019': 'Boston-Cambridge-Newton, MA-NH',

      // Phoenix area
      '850': 'Phoenix-Mesa-Chandler, AZ',
      '851': 'Phoenix-Mesa-Chandler, AZ',
      '852': 'Phoenix-Mesa-Chandler, AZ',
      '853': 'Phoenix-Mesa-Chandler, AZ',

      // San Francisco area
      '941': 'San Francisco-Oakland-Berkeley, CA',
      '940': 'San Francisco-Oakland-Berkeley, CA',
      '942': 'San Francisco-Oakland-Berkeley, CA',
      '943': 'San Francisco-Oakland-Berkeley, CA',
      '944': 'San Francisco-Oakland-Berkeley, CA',
      '945': 'San Francisco-Oakland-Berkeley, CA',
      '946': 'San Francisco-Oakland-Berkeley, CA',
      '947': 'San Francisco-Oakland-Berkeley, CA',

      // Detroit area
      '480': 'Detroit-Warren-Dearborn, MI',
      '481': 'Detroit-Warren-Dearborn, MI',
      '482': 'Detroit-Warren-Dearborn, MI',
      '483': 'Detroit-Warren-Dearborn, MI',

      // Seattle area
      '980': 'Seattle-Tacoma-Bellevue, WA',
      '981': 'Seattle-Tacoma-Bellevue, WA',
      '982': 'Seattle-Tacoma-Bellevue, WA',
      '983': 'Seattle-Tacoma-Bellevue, WA',
      '984': 'Seattle-Tacoma-Bellevue, WA',

      // San Antonio area
      '782': 'San Antonio-New Braunfels, TX',
      '780': 'San Antonio-New Braunfels, TX',
      '781': 'San Antonio-New Braunfels, TX',

      // Denver area
      '800': 'Denver-Aurora-Lakewood, CO',
      '801': 'Denver-Aurora-Lakewood, CO',
      '802': 'Denver-Aurora-Lakewood, CO',
      '803': 'Denver-Aurora-Lakewood, CO',
      '804': 'Denver-Aurora-Lakewood, CO',

      // San Diego area
      '919': 'San Diego-Chula Vista-Carlsbad, CA',
      '920': 'San Diego-Chula Vista-Carlsbad, CA',
      '921': 'San Diego-Chula Vista-Carlsbad, CA',

      // Minneapolis area
      '553': 'Minneapolis-St. Paul-Bloomington, MN-WI',
      '554': 'Minneapolis-St. Paul-Bloomington, MN-WI',
      '555': 'Minneapolis-St. Paul-Bloomington, MN-WI',

      // Tampa area
      '336': 'Tampa-St. Petersburg-Clearwater, FL',
      '335': 'Tampa-St. Petersburg-Clearwater, FL',
      '337': 'Tampa-St. Petersburg-Clearwater, FL',

      // Austin area
      '786': 'Austin-Round Rock-Georgetown, TX',
      '787': 'Austin-Round Rock-Georgetown, TX',

      // Portland area
      '970': 'Portland-Vancouver-Hillsboro, OR-WA',
      '971': 'Portland-Vancouver-Hillsboro, OR-WA',
      '972': 'Portland-Vancouver-Hillsboro, OR-WA',

      // San Jose area
      '950': 'San Jose-Sunnyvale-Santa Clara, CA',
      '951': 'San Jose-Sunnyvale-Santa Clara, CA',

      // Salt Lake City
      '841': 'Salt Lake City, UT',
      '840': 'Salt Lake City, UT',

      // Las Vegas
      '891': 'Las Vegas-Henderson-Paradise, NV',
      '890': 'Las Vegas-Henderson-Paradise, NV',

      // Honolulu
      '967': 'Honolulu, HI',
      '968': 'Honolulu, HI',

      // Orlando
      '328': 'Orlando-Kissimmee-Sanford, FL',
      '327': 'Orlando-Kissimmee-Sanford, FL',
      '347': 'Orlando-Kissimmee-Sanford, FL',

      // Raleigh-Durham
      '276': 'Raleigh-Cary, NC',
      '277': 'Raleigh-Cary, NC',

      // Nashville
      '370': 'Nashville-Davidson-Murfreesboro-Franklin, TN',
      '371': 'Nashville-Davidson-Murfreesboro-Franklin, TN',
      '372': 'Nashville-Davidson-Murfreesboro-Franklin, TN',

      // Charlotte
      '280': 'Charlotte-Concord-Gastonia, NC-SC',
      '281': 'Charlotte-Concord-Gastonia, NC-SC',
      '282': 'Charlotte-Concord-Gastonia, NC-SC',

      // Indianapolis
      '460': 'Indianapolis-Carmel-Anderson, IN',
      '461': 'Indianapolis-Carmel-Anderson, IN',
      '462': 'Indianapolis-Carmel-Anderson, IN',

      // Columbus OH
      '430': 'Columbus, OH',
      '431': 'Columbus, OH',
      '432': 'Columbus, OH',
      '433': 'Columbus, OH',

      // Cleveland
      '440': 'Cleveland-Elyria, OH',
      '441': 'Cleveland-Elyria, OH',
      '442': 'Cleveland-Elyria, OH',

      // Cincinnati
      '450': 'Cincinnati, OH-KY-IN',
      '451': 'Cincinnati, OH-KY-IN',
      '452': 'Cincinnati, OH-KY-IN',

      // Pittsburgh
      '150': 'Pittsburgh, PA',
      '151': 'Pittsburgh, PA',
      '152': 'Pittsburgh, PA',

      // Kansas City
      '640': 'Kansas City, MO-KS',
      '641': 'Kansas City, MO-KS',
      '660': 'Kansas City, MO-KS',
      '661': 'Kansas City, MO-KS',

      // St. Louis
      '630': 'St. Louis, MO-IL',
      '631': 'St. Louis, MO-IL',
      '633': 'St. Louis, MO-IL',

      // Baltimore
      '210': 'Baltimore-Columbia-Towson, MD',
      '211': 'Baltimore-Columbia-Towson, MD',
      '212': 'Baltimore-Columbia-Towson, MD',

      // Milwaukee
      '530': 'Milwaukee-Waukesha, WI',
      '531': 'Milwaukee-Waukesha, WI',
      '532': 'Milwaukee-Waukesha, WI',

      // Sacramento
      '956': 'Sacramento-Roseville-Folsom, CA',
      '957': 'Sacramento-Roseville-Folsom, CA',
      '958': 'Sacramento-Roseville-Folsom, CA',

      // Riverside
      '925': 'Riverside-San Bernardino-Ontario, CA',
      '923': 'Riverside-San Bernardino-Ontario, CA',
      '924': 'Riverside-San Bernardino-Ontario, CA',

      // Jacksonville
      '322': 'Jacksonville, FL',
      '320': 'Jacksonville, FL',

      // Oklahoma City
      '730': 'Oklahoma City, OK',
      '731': 'Oklahoma City, OK',
      '731': 'Oklahoma City, OK',

      // Memphis
      '380': 'Memphis, TN-MS-AR',
      '381': 'Memphis, TN-MS-AR',
      '382': 'Memphis, TN-MS-AR',

      // Louisville
      '400': 'Louisville/Jefferson County, KY-IN',
      '401': 'Louisville/Jefferson County, KY-IN',
      '402': 'Louisville/Jefferson County, KY-IN',

      // Richmond
      '230': 'Richmond, VA',
      '231': 'Richmond, VA',
      '232': 'Richmond, VA',

      // New Orleans
      '700': 'New Orleans-Metairie, LA',
      '701': 'New Orleans-Metairie, LA',

      // Hartford
      '060': 'Hartford-East Hartford-Middletown, CT',
      '061': 'Hartford-East Hartford-Middletown, CT',

      // Providence
      '028': 'Providence-Warwick, RI-MA',
      '029': 'Providence-Warwick, RI-MA',

      // Birmingham
      '350': 'Birmingham-Hoover, AL',
      '351': 'Birmingham-Hoover, AL',
      '352': 'Birmingham-Hoover, AL',

      // Buffalo
      '140': 'Buffalo-Cheektowaga, NY',
      '141': 'Buffalo-Cheektowaga, NY',
      '142': 'Buffalo-Cheektowaga, NY',

      // Tucson
      '856': 'Tucson, AZ',
      '857': 'Tucson, AZ',

      // Fresno
      '936': 'Fresno, CA',
      '937': 'Fresno, CA',

      // Albuquerque
      '871': 'Albuquerque, NM',
      '870': 'Albuquerque, NM',

      // Omaha
      '680': 'Omaha-Council Bluffs, NE-IA',
      '681': 'Omaha-Council Bluffs, NE-IA',

      // Bakersfield
      '932': 'Bakersfield, CA',
      '933': 'Bakersfield, CA',

      // Virginia Beach
      '233': 'Virginia Beach-Norfolk-Newport News, VA-NC',
      '234': 'Virginia Beach-Norfolk-Newport News, VA-NC',
      '235': 'Virginia Beach-Norfolk-Newport News, VA-NC',
      '236': 'Virginia Beach-Norfolk-Newport News, VA-NC',
    };

    // Fetch location data from ZIP code API
    const fetchZipData = async (zipCode) => {
      try {
        const response = await fetch(`https://api.zippopotam.us/us/${zipCode}`);
        if (!response.ok) throw new Error('Invalid ZIP code');
        const data = await response.json();
        return {
          city: data.places[0]['place name'],
          state: data.places[0]['state abbreviation'],
          stateFull: data.places[0]['state'],
          latitude: parseFloat(data.places[0].latitude),
          longitude: parseFloat(data.places[0].longitude)
        };
      } catch (error) {
        return null;
      }
    };

    // Get MSA from ZIP code
    const getMSAFromZip = (zipCode) => {
      const prefix = zipCode.substring(0, 3);
      return ZIP_TO_MSA[prefix] || 'default';
    };

    // Calculate local cost data based on ZIP
    const calculateLocalData = (zipCode, locationInfo) => {
      const msa = getMSAFromZip(zipCode);
      const wage = MSA_WAGE_DATA[msa] || MSA_WAGE_DATA.default;
      const rent = MSA_RENT_DATA[msa] || MSA_RENT_DATA.default;
      const costs = REGIONAL_COSTS[msa] || REGIONAL_COSTS.default;

      const areaName = locationInfo
        ? `${locationInfo.city}, ${locationInfo.state}`
        : (msa !== 'default' ? msa.split(',')[0] : 'National Average');

      return {
        medianWage: wage,
        rent: rent,
        food: Math.round(NATIONAL_BASELINES.food * costs.food),
        healthcare: Math.round(NATIONAL_BASELINES.healthcare * costs.healthcare),
        transport: Math.round(NATIONAL_BASELINES.transport * costs.transport),
        utilities: Math.round(NATIONAL_BASELINES.utilities * costs.utilities),
        area: areaName,
        msa: msa !== 'default' ? msa : null,
        dataQuality: msa !== 'default' ? 'MSA-level data' : 'National averages'
      };
    };

    const MOCK_BUILDINGS = {
      '10001': [
        { id: 'b1', address: '123 Main St, Apt 1-24', units: 24, members: 8, landlord: 'Greystone Properties', issues: ['Heat', 'Repairs'] },
        { id: 'b2', address: '456 Oak Ave, Units A-L', units: 12, members: 3, landlord: 'Metro Housing LLC', issues: ['Fees'] },
        { id: 'b3', address: '789 Park Blvd', units: 48, members: 15, landlord: 'Urban Living Corp', issues: ['Security', 'Pests'] },
      ],
      '60601': [
        { id: 'b4', address: '100 Lake Shore Dr', units: 200, members: 42, landlord: 'Lakeside Management', issues: ['Rent increases'] },
        { id: 'b5', address: '250 State St', units: 36, members: 11, landlord: 'Downtown Rentals Inc', issues: ['Maintenance'] },
      ],
      '90210': [
        { id: 'b6', address: '9000 Wilshire Blvd', units: 80, members: 22, landlord: 'Luxury Living LA', issues: ['Parking', 'Amenities'] },
      ],
      'default': [
        { id: 'b7', address: '500 Example St', units: 20, members: 5, landlord: 'Sample Properties', issues: ['General'] },
      ]
    };

    const MOCK_WORKER_COLLECTIVES = [
      { id: 'w1', industry: 'Retail', company: 'MegaMart', members: 127, issues: ['Scheduling', 'Understaffing'], active: true, messages: [] },
      { id: 'w2', industry: 'Food Service', company: 'QuickBite Chain', members: 89, issues: ['Wage theft', 'No breaks'], active: true, messages: [] },
      { id: 'w3', industry: 'Warehouse', company: 'FastShip Logistics', members: 234, issues: ['Safety', 'Quotas'], active: true, messages: [] },
      { id: 'w4', industry: 'Healthcare', company: 'CareFirst Hospital', members: 156, issues: ['Understaffing', 'Mandatory OT'], active: true, messages: [] },
      { id: 'w5', industry: 'Tech', company: 'Anonymous Startup', members: 45, issues: ['Layoffs', 'RTO mandate'], active: false, messages: [] },
      { id: 'w6', industry: 'Education', company: 'City School District', members: 312, issues: ['Class sizes', 'Resources'], active: true, messages: [] },
    ];

    const MOCK_CONSUMER_GROUPS = [
      { id: 'c1', name: 'Internet Access Collective', members: 342, target: 'ISP bulk negotiation', savings: '$15/mo avg', description: 'Negotiating group rates with local ISPs' },
      { id: 'c2', name: 'Grocery Bulk Buy', members: 89, target: 'Wholesale access', savings: '$80/mo avg', description: 'Weekly bulk orders from wholesalers' },
      { id: 'c3', name: 'Utility Bill Co-op', members: 156, target: 'Solar installation', savings: '$45/mo avg', description: 'Community solar purchasing program' },
      { id: 'c4', name: 'Prescription Pool', members: 203, target: 'Medication costs', savings: '$120/mo avg', description: 'Group purchasing for common medications' },
    ];

    const MOCK_PETITIONS = [
      { id: 'p1', title: 'Stop Rent Increase at 123 Main St', area: '10001', signatures: 18, goal: 24, status: 'active', created: '2 days ago', description: 'Landlord proposing 15% increase despite no improvements.' },
      { id: 'p2', title: 'Demand Fair Scheduling at MegaMart', area: '60601', signatures: 89, goal: 100, status: 'active', created: '1 week ago', description: 'End on-call scheduling and provide 2-week advance notice.' },
      { id: 'p3', title: 'Fix Dangerous Intersection on Oak Ave', area: '10001', signatures: 156, goal: 150, status: 'won', created: '3 weeks ago', description: 'Traffic light installed after petition delivered to city council.' },
      { id: 'p4', title: 'Oppose Utility Rate Hike', area: '30301', signatures: 423, goal: 500, status: 'active', created: '4 days ago', description: 'Power company requesting 22% rate increase.' },
      { id: 'p5', title: 'Keep Community Health Clinic Open', area: '48127', signatures: 267, goal: 300, status: 'active', created: '5 days ago', description: 'Only clinic serving uninsured residents in the area.' },
    ];

    const MOCK_REPORTS = [
      { id: 'r1', type: 'landlord', name: 'Greystone Properties', address: '123 Main St', issues: ['No repairs', 'Harassment'], reports: 12, lastReport: '2h ago', details: [] },
      { id: 'r2', type: 'employer', name: 'QuickBite Chain', address: null, issues: ['Wage theft', 'No breaks'], reports: 34, lastReport: '5h ago', details: [] },
      { id: 'r3', type: 'landlord', name: 'Metro Housing LLC', address: '456 Oak Ave', issues: ['Safety hazard', 'Illegal fees'], reports: 7, lastReport: '1d ago', details: [] },
      { id: 'r4', type: 'employer', name: 'FastShip Logistics', address: null, issues: ['Unsafe conditions', 'Retaliation'], reports: 56, lastReport: '3h ago', details: [] },
      { id: 'r5', type: 'landlord', name: 'Urban Living Corp', address: '789 Park Blvd', issues: ['Pest infestation', 'No heat'], reports: 23, lastReport: '8h ago', details: [] },
    ];

    const MOCK_PRICE_RESISTANCE = [
      { id: 'pr1', item: 'Gallon of Gas', current: 3.45, resistance: 4.50, votes: 1247, atResistance: 72 },
      { id: 'pr2', item: 'Dozen Eggs', current: 4.20, resistance: 5.00, votes: 892, atResistance: 85 },
      { id: 'pr3', item: 'Gallon of Milk', current: 3.80, resistance: 5.00, votes: 756, atResistance: 68 },
      { id: 'pr4', item: 'Loaf of Bread', current: 3.50, resistance: 4.50, votes: 634, atResistance: 55 },
      { id: 'pr5', item: 'Internet (Basic)', current: 65, resistance: 80, votes: 1089, atResistance: 45 },
      { id: 'pr6', item: 'Electricity (avg/mo)', current: 150, resistance: 200, votes: 923, atResistance: 38 },
      { id: 'pr7', item: 'Ground Beef (1 lb)', current: 5.50, resistance: 7.00, votes: 445, atResistance: 62 },
      { id: 'pr8', item: 'Streaming Service', current: 15.99, resistance: 20.00, votes: 1567, atResistance: 78 },
    ];

    // ============================================
    // MAIN COMPONENT
    // ============================================

    const SolidarityPlatform = () => {
      // Navigation
      const [activeTab, setActiveTab] = useState('information');
      const [activeSubTab, setActiveSubTab] = useState('sentiment');
      const [notification, setNotification] = useState(null);

      // Information State
      const [zipCode, setZipCode] = useState('');
      const [localData, setLocalData] = useState(null);
      const [loading, setLoading] = useState(false);
      const [zipError, setZipError] = useState(null);
      const [priceVotes, setPriceVotes] = useState({});
      const [priceResistanceItems, setPriceResistanceItems] = useState([]);

      // Formation State
      const [workSentiment, setWorkSentiment] = useState(null);
      const [sentimentHistory, setSentimentHistory] = useState([]);
      const [todaySentiment, setTodaySentiment] = useState({ willing: 0, unwilling: 0, total: 0 });

      // Tenant State
      const [buildings, setBuildings] = useState([]);
      const [selectedBuilding, setSelectedBuilding] = useState(null);
      const [joinedBuildings, setJoinedBuildings] = useState([]);
      const [tenantMessages, setTenantMessages] = useState([]);
      const [newTenantMessage, setNewTenantMessage] = useState('');

      // Worker State
      const [workerCollectives, setWorkerCollectives] = useState([]);
      const [joinedCollectives, setJoinedCollectives] = useState([]);
      const [selectedCollective, setSelectedCollective] = useState(null);
      const [collectiveMessages, setCollectiveMessages] = useState([]);
      const [newCollectiveMessage, setNewCollectiveMessage] = useState('');

      // Consumer State
      const [consumerGroups, setConsumerGroups] = useState([]);
      const [joinedConsumerGroups, setJoinedConsumerGroups] = useState([]);

      // Petition State
      const [petitions, setPetitions] = useState([]);
      const [signedPetitions, setSignedPetitions] = useState([]);
      const [showPetitionForm, setShowPetitionForm] = useState(false);
      const [newPetition, setNewPetition] = useState({ title: '', area: '', description: '', goal: 100 });

      // Report State
      const [reports, setReports] = useState([]);
      const [reportType, setReportType] = useState('landlord');
      const [reportFilter, setReportFilter] = useState('all');
      const [newReport, setNewReport] = useState({ name: '', address: '', issues: [], description: '', anonymous: true });

      // New Collective Form
      const [showNewCollectiveForm, setShowNewCollectiveForm] = useState(false);
      const [newCollective, setNewCollective] = useState({ company: '', industry: '', issues: [] });

      // ============================================
      // DATA FETCHING
      // ============================================

      // Fetch initial data on mount
      useEffect(() => {
        // Fetch price resistance items
        fetch(`${API_BASE}/price-resistance`)
          .then(r => r.json())
          .then(data => setPriceResistanceItems(data))
          .catch(() => {});

        // Fetch sentiment data
        fetch(`${API_BASE}/sentiment`)
          .then(r => r.json())
          .then(data => {
            setSentimentHistory(data.history);
            setTodaySentiment(data.today);
          })
          .catch(() => {});

        // Fetch worker collectives
        fetch(`${API_BASE}/worker-collectives`)
          .then(r => r.json())
          .then(data => setWorkerCollectives(data))
          .catch(() => {});

        // Fetch consumer groups
        fetch(`${API_BASE}/consumer-groups`)
          .then(r => r.json())
          .then(data => setConsumerGroups(data))
          .catch(() => {});

        // Fetch petitions
        fetch(`${API_BASE}/petitions`)
          .then(r => r.json())
          .then(data => setPetitions(data))
          .catch(() => {});

        // Fetch reports
        fetch(`${API_BASE}/reports`)
          .then(r => r.json())
          .then(data => setReports(data))
          .catch(() => {});
      }, []);

      // Fetch buildings when ZIP changes
      const fetchBuildings = useCallback((zip) => {
        const code = zip || 'default';
        fetch(`${API_BASE}/buildings/${code}`)
          .then(r => r.json())
          .then(data => setBuildings(data))
          .catch(() => {});
      }, []);

      // Fetch messages when a building is selected
      useEffect(() => {
        if (selectedBuilding) {
          fetch(`${API_BASE}/buildings/${selectedBuilding}/messages`)
            .then(r => r.json())
            .then(data => setTenantMessages(data))
            .catch(() => {});
        }
      }, [selectedBuilding]);

      // Fetch messages when a collective is selected
      useEffect(() => {
        if (selectedCollective) {
          fetch(`${API_BASE}/worker-collectives/${selectedCollective}/messages`)
            .then(r => r.json())
            .then(data => setCollectiveMessages(data))
            .catch(() => {});
        }
      }, [selectedCollective]);

      // Fetch reports when filter changes
      useEffect(() => {
        const query = reportFilter !== 'all' ? `?type=${reportFilter}` : '';
        fetch(`${API_BASE}/reports${query}`)
          .then(r => r.json())
          .then(data => setReports(data))
          .catch(() => {});
      }, [reportFilter]);

      // ============================================
      // HELPERS
      // ============================================

      const showNotification = useCallback((message, type = 'success') => {
        setNotification({ message, type });
        setTimeout(() => setNotification(null), 3000);
      }, []);

      const calculateHours = (cost, wage) => Math.ceil(cost / wage);

      const handleZipSubmit = async (e) => {
        e.preventDefault();
        if (!zipCode || zipCode.length !== 5 || !/^\d{5}$/.test(zipCode)) {
          setZipError('Please enter a valid 5-digit ZIP code');
          showNotification('Invalid ZIP code format', 'error');
          return;
        }

        setLoading(true);
        setZipError(null);

        try {
          // Fetch location info from ZIP code API
          const locationInfo = await fetchZipData(zipCode);

          if (!locationInfo) {
            setZipError('ZIP code not found. Please check and try again.');
            showNotification('ZIP code not found', 'error');
            setLoading(false);
            return;
          }

          // Calculate local cost data
          const data = calculateLocalData(zipCode, locationInfo);
          setLocalData(data);
          showNotification(`Loaded data for ${data.area}`);
        } catch (error) {
          setZipError('Error fetching data. Please try again.');
          showNotification('Error loading data', 'error');
        } finally {
          setLoading(false);
        }
      };

      const handleSentimentVote = (vote) => {
        fetch(`${API_BASE}/sentiment/vote`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ vote }),
        })
          .then(r => r.json())
          .then(() => {
            setWorkSentiment(vote);
            setTodaySentiment(prev => ({
              ...prev,
              [vote === 'yes' ? 'willing' : 'unwilling']: prev[vote === 'yes' ? 'willing' : 'unwilling'] + 1,
              total: prev.total + 1
            }));
            showNotification('Response recorded anonymously');
          })
          .catch(() => showNotification('Failed to record vote', 'error'));
      };

      const handlePriceVote = (itemName, threshold, itemId) => {
        fetch(`${API_BASE}/price-resistance/${itemId}/vote`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ threshold: parseFloat(threshold) }),
        })
          .then(r => r.json())
          .then(() => {
            setPriceVotes({ ...priceVotes, [itemName]: threshold });
            showNotification(`Recorded: Stop buying ${itemName} at $${threshold}`);
          })
          .catch(() => showNotification('Failed to record vote', 'error'));
      };

      const handleJoinBuilding = (building) => {
        if (!joinedBuildings.includes(building.id)) {
          fetch(`${API_BASE}/buildings/${building.id}/join`, { method: 'POST' })
            .then(r => r.json())
            .then(() => {
              setJoinedBuildings([...joinedBuildings, building.id]);
              showNotification(`Joined tenant group at ${building.address}`);
            })
            .catch(() => showNotification('Failed to join', 'error'));
        }
      };

      const handleJoinCollective = (collective) => {
        if (!joinedCollectives.includes(collective.id)) {
          fetch(`${API_BASE}/worker-collectives/${collective.id}/join`, { method: 'POST' })
            .then(r => r.json())
            .then(() => {
              setJoinedCollectives([...joinedCollectives, collective.id]);
              showNotification(`Joined ${collective.company} worker collective`);
            })
            .catch(() => showNotification('Failed to join', 'error'));
        }
      };

      const handleJoinConsumerGroup = (group) => {
        if (!joinedConsumerGroups.includes(group.id)) {
          fetch(`${API_BASE}/consumer-groups/${group.id}/join`, { method: 'POST' })
            .then(r => r.json())
            .then(() => {
              setJoinedConsumerGroups([...joinedConsumerGroups, group.id]);
              showNotification(`Joined ${group.name}`);
            })
            .catch(() => showNotification('Failed to join', 'error'));
        }
      };

      const handleSignPetition = (petition) => {
        if (!signedPetitions.includes(petition.id)) {
          fetch(`${API_BASE}/petitions/${petition.id}/sign`, { method: 'POST' })
            .then(r => r.json())
            .then(() => {
              setSignedPetitions([...signedPetitions, petition.id]);
              setPetitions(petitions.map(p =>
                p.id === petition.id ? { ...p, signatures: p.signatures + 1 } : p
              ));
              showNotification('Petition signed anonymously');
            })
            .catch(() => showNotification('Failed to sign petition', 'error'));
        }
      };

      const handleCreatePetition = () => {
        if (newPetition.title && newPetition.area) {
          fetch(`${API_BASE}/petitions`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(newPetition),
          })
            .then(r => r.json())
            .then(petition => {
              setPetitions([petition, ...petitions]);
              setSignedPetitions([...signedPetitions, petition.id]);
              setNewPetition({ title: '', area: '', description: '', goal: 100 });
              setShowPetitionForm(false);
              showNotification('Petition created successfully');
            })
            .catch(() => showNotification('Failed to create petition', 'error'));
        }
      };

      const handleSubmitReport = () => {
        if (newReport.name && newReport.issues.length > 0) {
          fetch(`${API_BASE}/reports`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              type: reportType,
              name: newReport.name,
              address: newReport.address,
              issues: newReport.issues,
              description: newReport.description,
            }),
          })
            .then(r => r.json())
            .then(result => {
              if (result.merged) {
                setReports(reports.map(r =>
                  r.id === result.id ? { ...r, reports: result.reports, lastReport: 'Just now' } : r
                ));
                showNotification('Report added to existing record');
              } else {
                setReports([result, ...reports]);
                showNotification('Report submitted successfully');
              }
              setNewReport({ name: '', address: '', issues: [], description: '', anonymous: true });
            })
            .catch(() => showNotification('Failed to submit report', 'error'));
        }
      };

      const handleCreateCollective = () => {
        if (newCollective.company && newCollective.industry) {
          fetch(`${API_BASE}/worker-collectives`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(newCollective),
          })
            .then(r => r.json())
            .then(collective => {
              setWorkerCollectives([collective, ...workerCollectives]);
              setJoinedCollectives([...joinedCollectives, collective.id]);
              setNewCollective({ company: '', industry: '', issues: [] });
              setShowNewCollectiveForm(false);
              showNotification('Collective created - invite your coworkers!');
            })
            .catch(() => showNotification('Failed to create collective', 'error'));
        }
      };

      const toggleReportIssue = (issue) => {
        setNewReport(prev => ({
          ...prev,
          issues: prev.issues.includes(issue)
            ? prev.issues.filter(i => i !== issue)
            : [...prev.issues, issue]
        }));
      };

      const toggleCollectiveIssue = (issue) => {
        setNewCollective(prev => ({
          ...prev,
          issues: prev.issues.includes(issue)
            ? prev.issues.filter(i => i !== issue)
            : [...prev.issues, issue]
        }));
      };

      // Calculations
      const totalMonthlyHours = localData ?
        calculateHours(localData.rent, localData.medianWage) +
        calculateHours(localData.food, localData.medianWage) +
        calculateHours(localData.healthcare, localData.medianWage) +
        calculateHours(localData.transport, localData.medianWage) +
        calculateHours(localData.utilities, localData.medianWage) : 0;

      const availableHours = 160;
      const deficit = availableHours - totalMonthlyHours;
      const weeksToAffordMonth = localData ? (totalMonthlyHours / 40).toFixed(1) : 0;

      // ============================================
      // STYLES
      // ============================================

      const colors = {
        bg: '#0a0a0a',
        bgLight: '#111',
        bgLighter: '#1a1a1a',
        border: '#222',
        borderLight: '#333',
        text: '#e8e8e8',
        textMuted: '#888',
        textDim: '#666',
        textDimmer: '#555',
        textDimmest: '#444',
        primary: '#ff3333',
        primaryDark: '#cc2929',
        success: '#33ff33',
        successDark: '#29cc29',
        warning: '#ffaa00',
        purple: '#aa00ff',
      };

      const styles = {
        container: {
          minHeight: '100vh',
          backgroundColor: colors.bg,
          color: colors.text,
          fontFamily: "'IBM Plex Mono', 'Courier New', monospace",
          fontSize: '14px',
          lineHeight: '1.6'
        },
        header: {
          borderBottom: `2px solid ${colors.primary}`,
          padding: '20px 40px',
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'center',
          flexWrap: 'wrap',
          gap: '15px'
        },
        nav: {
          display: 'flex',
          borderBottom: `1px solid ${colors.border}`,
          backgroundColor: colors.bgLight
        },
        navButton: (active) => ({
          flex: 1,
          padding: '16px 20px',
          backgroundColor: active ? colors.bgLighter : 'transparent',
          color: active ? colors.primary : colors.textDim,
          border: 'none',
          borderBottom: active ? `2px solid ${colors.primary}` : '2px solid transparent',
          cursor: 'pointer',
          fontFamily: 'inherit',
          fontSize: '12px',
          textTransform: 'uppercase',
          letterSpacing: '2px',
          fontWeight: active ? 700 : 400,
          transition: 'all 0.2s'
        }),
        subNav: {
          display: 'flex',
          gap: '10px',
          marginBottom: '30px',
          flexWrap: 'wrap'
        },
        subNavButton: (active) => ({
          padding: '10px 15px',
          backgroundColor: active ? colors.primary : 'transparent',
          color: active ? '#000' : colors.textMuted,
          border: `1px solid ${active ? colors.primary : colors.borderLight}`,
          cursor: 'pointer',
          fontFamily: 'inherit',
          fontSize: '11px',
          textTransform: 'uppercase',
          letterSpacing: '1px',
          transition: 'all 0.15s'
        }),
        main: {
          padding: '40px',
          maxWidth: '1200px',
          margin: '0 auto'
        },
        sectionHeader: {
          fontSize: '11px',
          color: colors.textDimmer,
          textTransform: 'uppercase',
          letterSpacing: '3px',
          marginBottom: '20px',
          borderBottom: `1px solid ${colors.border}`,
          paddingBottom: '10px'
        },
        card: {
          backgroundColor: colors.bgLight,
          border: `1px solid ${colors.border}`,
          padding: '25px',
          marginBottom: '15px'
        },
        input: {
          backgroundColor: colors.bgLighter,
          border: `1px solid ${colors.borderLight}`,
          color: '#fff',
          padding: '12px',
          fontFamily: 'inherit',
          fontSize: '14px',
          width: '100%',
          boxSizing: 'border-box'
        },
        button: (variant = 'primary') => ({
          padding: '12px 20px',
          backgroundColor: variant === 'primary' ? colors.primary : 'transparent',
          color: variant === 'primary' ? '#000' : colors.primary,
          border: variant === 'primary' ? 'none' : `1px solid ${colors.primary}`,
          cursor: 'pointer',
          fontFamily: 'inherit',
          fontWeight: 700,
          textTransform: 'uppercase',
          letterSpacing: '1px',
          fontSize: '11px',
          transition: 'all 0.15s'
        }),
        badge: (color) => ({
          display: 'inline-block',
          padding: '3px 8px',
          backgroundColor: `${color}20`,
          color: color,
          fontSize: '10px',
          textTransform: 'uppercase',
          marginRight: '8px'
        }),
        grid: {
          display: 'grid',
          gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',
          gap: '15px'
        },
        modal: {
          position: 'fixed',
          inset: 0,
          backgroundColor: 'rgba(0,0,0,0.9)',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          zIndex: 1000,
          padding: '20px'
        },
        notification: (type) => ({
          position: 'fixed',
          top: '20px',
          right: '20px',
          padding: '15px 25px',
          backgroundColor: type === 'success' ? '#1a3d1a' : '#3d1a1a',
          border: `1px solid ${type === 'success' ? colors.success : colors.primary}`,
          color: type === 'success' ? colors.success : colors.primary,
          zIndex: 1001,
          fontFamily: 'inherit',
          fontSize: '12px',
          maxWidth: '300px'
        })
      };

      // ============================================
      // RENDER
      // ============================================

      return (
        <div style={styles.container}>
          {/* Notification */}
          {notification && (
            <div style={styles.notification(notification.type)} className="notification-enter">
              {notification.message}
            </div>
          )}

          {/* Header */}
          <header style={styles.header}>
            <div>
              <h1 style={{ margin: 0, fontSize: '24px', fontWeight: 700, letterSpacing: '-0.5px', color: '#ffffff' }}>
                SOLIDARITY<span style={{ color: colors.primary }}>_</span>NET
              </h1>
              <p style={{ margin: '4px 0 0 0', fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '2px' }}>
                Formation â€¢ Information â€¢ Accountability
              </p>
            </div>
            <div style={{ fontSize: '11px', color: colors.textDimmer, textAlign: 'right' }}>
              <div>NO TRACKING â€¢ NO PROFILES</div>
              <div style={{ color: colors.primary, marginTop: '4px' }}>WORKERS FIRST</div>
            </div>
          </header>

          {/* Navigation */}
          <nav style={styles.nav}>
            {['information', 'formation', 'accountability'].map(tab => (
              <button
                key={tab}
                onClick={() => { setActiveTab(tab); if (tab === 'formation') setActiveSubTab('sentiment'); }}
                style={styles.navButton(activeTab === tab)}
              >
                {tab}
              </button>
            ))}
          </nav>

          {/* Main Content */}
          <main style={styles.main}>

            {/* ==================== INFORMATION TAB ==================== */}
            {activeTab === 'information' && (
              <div>
                {/* Standard of Living Calculator */}
                <section style={{ marginBottom: '60px' }}>
                  <h2 style={styles.sectionHeader}>Standard of Living Calculator</h2>

                  <form onSubmit={handleZipSubmit} style={{ marginBottom: '30px' }}>
                    <div style={{ display: 'flex', gap: '10px', alignItems: 'center', flexWrap: 'wrap' }}>
                      <label style={{ color: colors.textMuted }}>ZIP CODE:</label>
                      <input
                        type="text"
                        value={zipCode}
                        onChange={(e) => {
                          setZipCode(e.target.value.replace(/\D/g, '').slice(0, 5));
                          setZipError(null);
                        }}
                        placeholder="Enter ZIP"
                        maxLength={5}
                        style={{
                          ...styles.input,
                          width: '120px',
                          borderColor: zipError ? colors.primary : colors.borderLight
                        }}
                        disabled={loading}
                      />
                      <button
                        type="submit"
                        style={{
                          ...styles.button('primary'),
                          opacity: loading ? 0.7 : 1,
                          cursor: loading ? 'wait' : 'pointer'
                        }}
                        disabled={loading}
                      >
                        {loading ? 'Loading...' : 'Calculate'}
                      </button>
                    </div>
                    {zipError && (
                      <p style={{ fontSize: '12px', color: colors.primary, marginTop: '8px' }}>
                        {zipError}
                      </p>
                    )}
                    <p style={{ fontSize: '11px', color: colors.textDimmest, marginTop: '8px' }}>
                      Enter any US ZIP code â€” data sourced from BLS, HUD, USDA, AAA, and EIA
                    </p>
                  </form>

                  {localData && (
                    <div style={styles.card}>
                      {/* Key Metric */}
                      <div style={{
                        textAlign: 'center',
                        padding: '30px',
                        marginBottom: '30px',
                        backgroundColor: deficit < 0 ? '#1a0505' : '#051a05',
                        border: `2px solid ${deficit < 0 ? colors.primary : colors.success}`
                      }}>
                        <div style={{ fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '10px' }}>
                          {localData.area}
                        </div>
                        <div style={{ fontSize: '72px', fontWeight: 700, color: deficit < 0 ? colors.primary : colors.success, lineHeight: 1 }}>
                          {weeksToAffordMonth}
                        </div>
                        <div style={{ fontSize: '14px', color: colors.textMuted, marginTop: '10px' }}>
                          weeks of work to afford one month of living
                        </div>
                        {deficit < 0 && (
                          <div style={{ marginTop: '15px', padding: '12px', backgroundColor: '#ff333320', color: '#ff6666', fontSize: '12px' }}>
                            âš  DEFICIT: You need <strong>{Math.abs(deficit)} more hours</strong> than a full-time job provides
                          </div>
                        )}
                        {deficit >= 0 && (
                          <div style={{ marginTop: '15px', padding: '12px', backgroundColor: '#33ff3320', color: '#66ff66', fontSize: '12px' }}>
                            âœ“ Technically sustainable with {deficit} hours of margin
                          </div>
                        )}
                      </div>

                      {/* Wage */}
                      <div style={{ display: 'flex', justifyContent: 'space-between', padding: '12px 0', borderBottom: `1px solid ${colors.border}`, marginBottom: '15px' }}>
                        <span style={{ color: colors.textMuted }}>Median hourly wage</span>
                        <span style={{ fontWeight: 700, fontSize: '18px' }}>${localData.medianWage.toFixed(2)}</span>
                      </div>

                      <div style={{ fontSize: '11px', color: colors.textDimmer, marginBottom: '10px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                        Hours needed per month:
                      </div>

                      {[
                        { label: 'Rent', cost: localData.rent, icon: 'ðŸ ' },
                        { label: 'Food', cost: localData.food, icon: 'ðŸŽ' },
                        { label: 'Healthcare', cost: localData.healthcare, icon: 'ðŸ¥' },
                        { label: 'Transport', cost: localData.transport, icon: 'ðŸš—' },
                        { label: 'Utilities', cost: localData.utilities, icon: 'ðŸ’¡' },
                      ].map(item => {
                        const hours = calculateHours(item.cost, localData.medianWage);
                        const pct = (hours / totalMonthlyHours) * 100;
                        return (
                          <div key={item.label} style={{ marginBottom: '12px' }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '4px' }}>
                              <span style={{ color: colors.textMuted }}>{item.icon} {item.label}</span>
                              <div style={{ display: 'flex', gap: '20px', alignItems: 'center' }}>
                                <span style={{ color: colors.textDimmer, fontSize: '12px' }}>${item.cost}</span>
                                <span style={{ color: '#fff', fontWeight: 700, minWidth: '70px', textAlign: 'right' }}>
                                  {hours} hrs
                                </span>
                              </div>
                            </div>
                            <div style={{ height: '4px', backgroundColor: colors.border, borderRadius: '2px' }}>
                              <div style={{ height: '100%', width: `${pct}%`, backgroundColor: colors.primary, borderRadius: '2px' }} />
                            </div>
                          </div>
                        );
                      })}

                      <div style={{ display: 'flex', justifyContent: 'space-between', padding: '15px 0', borderTop: `2px solid ${colors.borderLight}`, marginTop: '15px' }}>
                        <span style={{ fontWeight: 700 }}>TOTAL REQUIRED</span>
                        <span style={{ fontWeight: 700, color: colors.primary, fontSize: '18px' }}>{totalMonthlyHours} hrs</span>
                      </div>

                      <div style={{ display: 'flex', justifyContent: 'space-between', padding: '10px 0', color: colors.textDim }}>
                        <span>Available (40hr/wk Ã— 4)</span>
                        <span>{availableHours} hrs</span>
                      </div>

                      <div style={{ display: 'flex', justifyContent: 'space-between', padding: '10px 0', fontWeight: 700, fontSize: '16px', color: deficit < 0 ? colors.primary : colors.success }}>
                        <span>{deficit < 0 ? 'MONTHLY DEFICIT' : 'MONTHLY SURPLUS'}</span>
                        <span>{deficit} hrs</span>
                      </div>

                      <div style={{ marginTop: '20px', padding: '15px', backgroundColor: colors.bg, fontSize: '11px', color: colors.textDimmest }}>
                        <div style={{ marginBottom: '8px' }}>
                          <strong>Data quality:</strong>{' '}
                          <span style={{ color: localData.msa ? colors.success : colors.warning }}>
                            {localData.dataQuality}
                          </span>
                          {localData.msa && (
                            <span style={{ color: colors.textDimmer }}> â€” {localData.msa}</span>
                          )}
                        </div>
                        <strong>Sources:</strong> BLS OEWS Q3 2024 (wages), HUD FMR FY2024 (housing), USDA Thrifty Food Plan (food), Healthcare.gov (insurance), AAA (transport), EIA (utilities)
                      </div>
                    </div>
                  )}

                  {loading && (
                    <div style={{
                      ...styles.card,
                      textAlign: 'center',
                      padding: '60px'
                    }}>
                      <div style={{ fontSize: '24px', marginBottom: '15px' }}>â³</div>
                      <div style={{ color: colors.textMuted }}>Loading data for ZIP {zipCode}...</div>
                    </div>
                  )}
                </section>

                {/* Price Resistance */}
                <section>
                  <h2 style={styles.sectionHeader}>Consumer Price Resistance</h2>
                  <p style={{ color: colors.textDim, marginBottom: '20px' }}>
                    "At what price do you stop buying?" â€” Click to set your threshold
                  </p>

                  <div style={styles.grid}>
                    {priceResistanceItems.map(item => (
                      <div key={item.id} style={styles.card}>
                        <div style={{ fontSize: '13px', color: colors.textMuted, marginBottom: '12px', fontWeight: 500 }}>{item.item}</div>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '15px' }}>
                          <div>
                            <div style={{ fontSize: '10px', color: colors.textDimmer }}>CURRENT</div>
                            <div style={{ fontSize: '20px', fontWeight: 700 }}>
                              ${item.current < 10 ? item.current.toFixed(2) : item.current}
                            </div>
                          </div>
                          <div style={{ textAlign: 'right' }}>
                            <div style={{ fontSize: '10px', color: colors.textDimmer }}>COMMUNITY THRESHOLD</div>
                            <div style={{ fontSize: '20px', fontWeight: 700, color: colors.primary }}>
                              ${item.resistance < 10 ? item.resistance.toFixed(2) : item.resistance}
                            </div>
                          </div>
                        </div>

                        <div style={{ height: '6px', backgroundColor: colors.border, borderRadius: '3px', marginBottom: '8px' }}>
                          <div style={{ height: '100%', width: `${item.atResistance}%`, backgroundColor: colors.primary, borderRadius: '3px', transition: 'width 0.3s' }} />
                        </div>
                        <div style={{ fontSize: '10px', color: colors.textDimmer, marginBottom: '15px' }}>
                          {item.atResistance}% of {item.votes.toLocaleString()} people at resistance
                        </div>

                        <div style={{ display: 'flex', gap: '6px', flexWrap: 'wrap' }}>
                          {[1.15, 1.3, 1.5, 2].map(mult => {
                            const threshold = (item.current * mult).toFixed(2);
                            const isSelected = priceVotes[item.item] === threshold;
                            return (
                              <button
                                key={mult}
                                onClick={() => handlePriceVote(item.item, threshold, item.id)}
                                style={{
                                  padding: '8px 12px',
                                  backgroundColor: isSelected ? colors.primary : colors.bgLighter,
                                  color: isSelected ? '#000' : colors.textMuted,
                                  border: `1px solid ${isSelected ? colors.primary : colors.borderLight}`,
                                  cursor: 'pointer',
                                  fontFamily: 'inherit',
                                  fontSize: '11px',
                                  fontWeight: isSelected ? 700 : 400
                                }}
                              >
                                ${threshold}
                              </button>
                            );
                          })}
                        </div>
                      </div>
                    ))}
                  </div>
                </section>
              </div>
            )}

            {/* ==================== FORMATION TAB ==================== */}
            {activeTab === 'formation' && (
              <div>
                <div style={styles.subNav}>
                  {[
                    { id: 'sentiment', label: 'Work Sentiment', icon: 'ðŸ“Š' },
                    { id: 'tenant', label: 'Tenant Unions', icon: 'ðŸ¢' },
                    { id: 'worker', label: 'Worker Collectives', icon: 'âš¡' },
                    { id: 'consumer', label: 'Consumer Groups', icon: 'ðŸ›’' },
                    { id: 'petition', label: 'Petitions', icon: 'ðŸ“‹' }
                  ].map(sub => (
                    <button key={sub.id} onClick={() => setActiveSubTab(sub.id)} style={styles.subNavButton(activeSubTab === sub.id)}>
                      {sub.icon} {sub.label}
                    </button>
                  ))}
                </div>

                {/* Work Sentiment */}
                {activeSubTab === 'sentiment' && (
                  <section>
                    <h2 style={styles.sectionHeader}>Work Sentiment â€” Your Area</h2>

                    <div style={styles.card}>
                      <p style={{ color: colors.textMuted, marginBottom: '25px', textAlign: 'center', fontSize: '16px' }}>
                        Do you feel like working today?
                      </p>
                      <div style={{ display: 'flex', gap: '20px', justifyContent: 'center', marginBottom: '30px' }}>
                        {['yes', 'no'].map(vote => (
                          <button
                            key={vote}
                            onClick={() => !workSentiment && handleSentimentVote(vote)}
                            disabled={workSentiment !== null}
                            style={{
                              padding: '25px 50px',
                              backgroundColor: workSentiment === vote ? (vote === 'yes' ? colors.success : colors.primary) : colors.bgLighter,
                              color: workSentiment === vote ? '#000' : (vote === 'yes' ? colors.success : colors.primary),
                              border: `2px solid ${vote === 'yes' ? colors.success : colors.primary}`,
                              cursor: workSentiment ? 'default' : 'pointer',
                              opacity: workSentiment && workSentiment !== vote ? 0.4 : 1,
                              fontFamily: 'inherit',
                              fontWeight: 700,
                              fontSize: '18px',
                              transition: 'all 0.15s'
                            }}
                          >
                            {vote.toUpperCase()}
                          </button>
                        ))}
                      </div>

                      {workSentiment && (
                        <div style={{ textAlign: 'center', marginBottom: '25px', fontSize: '12px', color: colors.success }}>
                          âœ“ Response recorded anonymously (fingerprint-based, no account)
                        </div>
                      )}

                      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', textAlign: 'center', marginBottom: '30px' }}>
                        <div style={{ padding: '25px', backgroundColor: colors.bg }}>
                          <div style={{ fontSize: '56px', fontWeight: 700, color: colors.primary }}>
                            {Math.round((todaySentiment.unwilling / todaySentiment.total) * 100)}%
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '1px' }}>
                            Don't want to work today
                          </div>
                        </div>
                        <div style={{ padding: '25px', backgroundColor: colors.bg }}>
                          <div style={{ fontSize: '56px', fontWeight: 700, color: colors.textMuted }}>
                            {todaySentiment.total}
                          </div>
                          <div style={{ fontSize: '11px', color: colors.textDim, textTransform: 'uppercase', letterSpacing: '1px' }}>
                            Responses in your area
                          </div>
                        </div>
                      </div>

                      {/* Trend */}
                      <div>
                        <div style={{ fontSize: '10px', color: colors.textDimmer, textTransform: 'uppercase', marginBottom: '15px' }}>
                          4-Week Trend (% unwilling to work)
                        </div>
                        <div style={{ display: 'flex', alignItems: 'flex-end', height: '120px', gap: '15px' }}>
                          {sentimentHistory.map((week, i) => (
                            <div key={week.week} style={{ flex: 1, textAlign: 'center' }}>
                              <div style={{
                                height: `${week.unwilling * 1.5}px`,
                                backgroundColor: i === sentimentHistory.length - 1 ? colors.primary : colors.borderLight,
                                marginBottom: '8px',
                                transition: 'height 0.3s',
                                borderRadius: '2px 2px 0 0'
                              }} />
                              <div style={{ fontSize: '11px', color: colors.textDimmer }}>{week.week}</div>
                              <div style={{ fontSize: '13px', color: colors.textMuted, fontWeight: 500 }}>{week.unwilling}%</div>
                            </div>
                          ))}
                        </div>
                        <div style={{ marginTop: '20px', fontSize: '13px', color: colors.primary, textAlign: 'center' }}>
                          â†‘ Worker unwillingness rising 14 points over 4 weeks
                        </div>
                      </div>
                    </div>
                  </section>
                )}

                {/* Tenant Unions */}
                {activeSubTab === 'tenant' && (
                  <section>
                    <h2 style={styles.sectionHeader}>Tenant Union Builder</h2>
                    <p style={{ color: colors.textDim, marginBottom: '20px' }}>
                      Find and connect with other tenants in your building. No personal data required.
                    </p>

                    <div style={{ display: 'flex', gap: '10px', marginBottom: '25px', flexWrap: 'wrap' }}>
                      <input
                        type="text"
                        value={zipCode}
                        onChange={(e) => setZipCode(e.target.value)}
                        placeholder="Enter ZIP to find buildings"
                        style={{ ...styles.input, width: '200px' }}
                      />
                      <button onClick={() => { fetchBuildings(zipCode); showNotification(`Showing buildings in ${zipCode || 'your area'}`); }} style={styles.button('secondary')}>
                        Search Buildings
                      </button>
                    </div>

                    <div style={styles.grid}>
                      {buildings.map(building => {
                        const joined = joinedBuildings.includes(building.id);
                        const orgPct = Math.round((building.members / building.units) * 100);
                        return (
                          <div key={building.id} style={{
                            ...styles.card,
                            border: joined ? `1px solid ${colors.success}` : `1px solid ${colors.border}`
                          }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>
                              <div>
                                <div style={{ fontWeight: 700, marginBottom: '4px' }}>{building.address}</div>
                                <div style={{ fontSize: '12px', color: colors.textDim }}>Landlord: {building.landlord}</div>
                              </div>
                              {joined && <span style={styles.badge(colors.success)}>Joined</span>}
                            </div>

                            {building.issues.length > 0 && (
                              <div style={{ marginBottom: '12px' }}>
                                {building.issues.map(issue => (
                                  <span key={issue} style={{ ...styles.badge(colors.warning), marginBottom: '4px' }}>{issue}</span>
                                ))}
                              </div>
                            )}

                            <div style={{ display: 'flex', gap: '25px', marginBottom: '15px' }}>
                              <div>
                                <div style={{ fontSize: '28px', fontWeight: 700 }}>{building.members}</div>
                                <div style={{ fontSize: '10px', color: colors.textDimmer }}>MEMBERS</div>
                              </div>
                              <div>
                                <div style={{ fontSize: '28px', fontWeight: 700, color: colors.textDim }}>{building.units}</div>
                                <div style={{ fontSize: '10px', color: colors.textDimmer }}>UNITS</div>
                              </div>
                              <div>
                                <div style={{ fontSize: '28px', fontWeight: 700, color: orgPct > 30 ? colors.success : colors.primary }}>
                                  {orgPct}%
                                </div>
                                <div style={{ fontSize: '10px', color: colors.textDimmer }}>ORGANIZED</div>
                              </div>
                            </div>

                            {!joined ? (
                              <button onClick={() => handleJoinBuilding(building)} style={{ ...styles.button('secondary'), width: '100%' }}>
                                Join Tenant Group â†’
                              </button>
                            ) : (
                              <button
                                onClick={() => setSelectedBuilding(building.id === selectedBuilding ? null : building.id)}
                                style={{ ...styles.button('primary'), width: '100%' }}
                              >
                                {selectedBuilding === building.id ? 'Hide Discussion' : 'View Discussion â†’'}
                              </button>
                            )}
                          </div>
                        );
                      })}
                    </div>

                    {/* Discussion */}
                    {selectedBuilding && joinedBuildings.includes(selectedBuilding) && (
                      <div style={{ ...styles.card, marginTop: '25px' }}>
                        <h3 style={{ margin: '0 0 20px 0', fontSize: '14px' }}>
                          Building Discussion â€” {buildings.find(b => b.id === selectedBuilding)?.address}
                        </h3>

                        {tenantMessages.filter(m => m.building === selectedBuilding).map(msg => (
                          <div key={msg.id} style={{
                            padding: '15px',
                            backgroundColor: msg.pinned ? '#1a1a0a' : colors.bg,
                            border: msg.pinned ? `1px solid ${colors.warning}` : 'none',
                            marginBottom: '10px'
                          }}>
                            {msg.pinned && <span style={{ ...styles.badge(colors.warning), marginBottom: '8px' }}>ðŸ“Œ Pinned</span>}
                            <div style={{ marginBottom: '8px' }}>{msg.text}</div>
                            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '11px', color: colors.textDimmer }}>
                              <span>{msg.author} â€¢ {msg.time}</span>
                              <span>{msg.replies} replies</span>
                            </div>
                          </div>
                        ))}

                        <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>
                          <input
                            type="text"
                            value={newTenantMessage}
                            onChange={(e) => setNewTenantMessage(e.target.value)}
                            placeholder="Share with your building..."
                            style={{ ...styles.input, flex: 1 }}
                            onKeyPress={(e) => {
                              if (e.key === 'Enter' && newTenantMessage) {
                                fetch(`${API_BASE}/buildings/${selectedBuilding}/messages`, {
                                  method: 'POST',
                                  headers: { 'Content-Type': 'application/json' },
                                  body: JSON.stringify({ text: newTenantMessage, author: 'You' }),
                                })
                                  .then(r => r.json())
                                  .then(msg => {
                                    setTenantMessages([msg, ...tenantMessages]);
                                    setNewTenantMessage('');
                                    showNotification('Message posted anonymously');
                                  })
                                  .catch(() => showNotification('Failed to post message', 'error'));
                              }
                            }}
                          />
                          <button
                            onClick={() => {
                              if (newTenantMessage) {
                                fetch(`${API_BASE}/buildings/${selectedBuilding}/messages`, {
                                  method: 'POST',
                                  headers: { 'Content-Type': 'application/json' },
                                  body: JSON.stringify({ text: newTenantMessage, author: 'You' }),
                                })
                                  .then(r => r.json())
                                  .then(msg => {
                                    setTenantMessages([msg, ...tenantMessages]);
                                    setNewTenantMessage('');
                                    showNotification('Message posted anonymously');
                                  })
                                  .catch(() => showNotification('Failed to post message', 'error'));
                              }
                            }}
                            style={styles.button('primary')}
                          >
                            Post
                          </button>
                        </div>
                        <p style={{ fontSize: '10px', color: colors.textDimmest, marginTop: '10px', marginBottom: 0 }}>
                          Messages are anonymous. Tied to browser fingerprint, not identity.
                        </p>
                      </div>
                    )}
                  </section>
                )}

                {/* Worker Collectives */}
                {activeSubTab === 'worker' && (
                  <section>
                    <h2 style={styles.sectionHeader}>Worker Collectives</h2>
                    <p style={{ color: colors.textDim, marginBottom: '20px' }}>
                      Anonymous coordination for workplace issues. Find your coworkers.
                    </p>

                    <div style={styles.grid}>
                      {workerCollectives.map(collective => {
                        const joined = joinedCollectives.includes(collective.id);
                        return (
                          <div key={collective.id} style={{
                            ...styles.card,
                            border: joined ? `1px solid ${colors.success}` : `1px solid ${colors.border}`,
                            opacity: collective.active ? 1 : 0.7
                          }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>
                              <span style={styles.badge(colors.textMuted)}>{collective.industry}</span>
                              <span style={styles.badge(collective.active ? colors.success : colors.warning)}>
                                {collective.active ? 'Active' : 'Forming'}
                              </span>
                            </div>

                            <div style={{ fontWeight: 700, fontSize: '16px', marginBottom: '12px' }}>{collective.company}</div>

                            <div style={{ marginBottom: '15px' }}>
                              <div style={{ fontSize: '10px', color: colors.textDimmer, marginBottom: '6px' }}>ORGANIZING AROUND:</div>
                              <div style={{ display: 'flex', gap: '5px', flexWrap: 'wrap' }}>
                                {collective.issues.map(issue => (
                                  <span key={issue} style={{ ...styles.badge(colors.primary), marginRight: 0 }}>{issue}</span>
                                ))}
                              </div>
                            </div>

                            <div style={{ marginBottom: '15px' }}>
                              <span style={{ fontSize: '28px', fontWeight: 700 }}>{collective.members}</span>
                              <span style={{ fontSize: '12px', color: colors.textDim, marginLeft: '8px' }}>members</span>
                            </div>

                            {!joined ? (
                              <button onClick={() => handleJoinCollective(collective)} style={{ ...styles.button('secondary'), width: '100%' }}>
                                Join Collective â†’
                              </button>
                            ) : (
                              <button
                                onClick={() => setSelectedCollective(collective.id === selectedCollective ? null : collective.id)}
                                style={{ ...styles.button('primary'), width: '100%' }}
                              >
                                {selectedCollective === collective.id ? 'Hide Discussion' : 'Open Discussion â†’'}
                              </button>
                            )}
                          </div>
                        );
                      })}
                    </div>

                    {/* Collective Discussion */}
                    {selectedCollective && joinedCollectives.includes(selectedCollective) && (
                      <div style={{ ...styles.card, marginTop: '25px' }}>
                        <h3 style={{ margin: '0 0 20px 0', fontSize: '14px' }}>
                          {workerCollectives.find(c => c.id === selectedCollective)?.company} â€” Worker Discussion
                        </h3>

                        {collectiveMessages.filter(m => m.collective === selectedCollective).map(msg => (
                          <div key={msg.id} style={{
                            padding: '15px',
                            backgroundColor: msg.pinned ? '#1a1a0a' : colors.bg,
                            border: msg.pinned ? `1px solid ${colors.warning}` : 'none',
                            marginBottom: '10px'
                          }}>
                            {msg.pinned && <span style={{ ...styles.badge(colors.warning), marginBottom: '8px' }}>ðŸ“Œ Pinned</span>}
                            <div style={{ marginBottom: '8px' }}>{msg.text}</div>
                            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '11px', color: colors.textDimmer }}>
                              <span>{msg.author} â€¢ {msg.time}</span>
                              {msg.replies && <span>{msg.replies} replies</span>}
                            </div>
                          </div>
                        ))}

                        <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>
                          <input
                            type="text"
                            value={newCollectiveMessage}
                            onChange={(e) => setNewCollectiveMessage(e.target.value)}
                            placeholder="Share with your coworkers..."
                            style={{ ...styles.input, flex: 1 }}
                            onKeyPress={(e) => {
                              if (e.key === 'Enter' && newCollectiveMessage) {
                                fetch(`${API_BASE}/worker-collectives/${selectedCollective}/messages`, {
                                  method: 'POST',
                                  headers: { 'Content-Type': 'application/json' },
                                  body: JSON.stringify({ text: newCollectiveMessage }),
                                })
                                  .then(r => r.json())
                                  .then(msg => {
                                    setCollectiveMessages([msg, ...collectiveMessages]);
                                    setNewCollectiveMessage('');
                                    showNotification('Message posted anonymously');
                                  })
                                  .catch(() => showNotification('Failed to post message', 'error'));
                              }
                            }}
                          />
                          <button
                            onClick={() => {
                              if (newCollectiveMessage) {
                                fetch(`${API_BASE}/worker-collectives/${selectedCollective}/messages`, {
                                  method: 'POST',
                                  headers: { 'Content-Type': 'application/json' },
                                  body: JSON.stringify({ text: newCollectiveMessage }),
                                })
                                  .then(r => r.json())
                                  .then(msg => {
                                    setCollectiveMessages([msg, ...collectiveMessages]);
                                    setNewCollectiveMessage('');
                                    showNotification('Message posted anonymously');
                                  })
                                  .catch(() => showNotification('Failed to post message', 'error'));
                              }
                            }}
                            style={styles.button('primary')}
                          >
                            Post
                          </button>
                        </div>
                      </div>
                    )}

                    {/* New Collective */}
                    <div style={{ ...styles.card, marginTop: '30px', textAlign: 'center' }}>
                      <p style={{ color: colors.textMuted, marginBottom: '15px' }}>Don't see your workplace?</p>
                      <button onClick={() => setShowNewCollectiveForm(true)} style={styles.button('secondary')}>
                        + Start a New Collective
                      </button>
                    </div>

                    {/* New Collective Modal */}
                    {showNewCollectiveForm && (
                      <div style={styles.modal} className="modal-enter">
                        <div style={{ ...styles.card, maxWidth: '500px', width: '100%' }}>
                          <h3 style={{ marginTop: 0, marginBottom: '20px' }}>Start a Worker Collective</h3>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Company Name
                            </label>
                            <input
                              type="text"
                              value={newCollective.company}
                              onChange={(e) => setNewCollective({ ...newCollective, company: e.target.value })}
                              placeholder="Where do you work?"
                              style={styles.input}
                            />
                          </div>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Industry
                            </label>
                            <select
                              value={newCollective.industry}
                              onChange={(e) => setNewCollective({ ...newCollective, industry: e.target.value })}
                              style={{ ...styles.input, cursor: 'pointer' }}
                            >
                              <option value="">Select industry...</option>
                              {['Retail', 'Food Service', 'Warehouse', 'Healthcare', 'Tech', 'Education', 'Transportation', 'Manufacturing', 'Other'].map(ind => (
                                <option key={ind} value={ind}>{ind}</option>
                              ))}
                            </select>
                          </div>

                          <div style={{ marginBottom: '20px' }}>
                            <label style={{ display: 'block', marginBottom: '10px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Issues to organize around
                            </label>
                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                              {['Wages', 'Scheduling', 'Safety', 'Benefits', 'Understaffing', 'Management', 'Other'].map(issue => (
                                <label key={issue} style={{
                                  display: 'flex',
                                  alignItems: 'center',
                                  gap: '8px',
                                  padding: '8px 12px',
                                  backgroundColor: newCollective.issues.includes(issue) ? '#ff333320' : colors.bgLighter,
                                  border: `1px solid ${newCollective.issues.includes(issue) ? colors.primary : colors.borderLight}`,
                                  cursor: 'pointer',
                                  fontSize: '12px'
                                }}>
                                  <input
                                    type="checkbox"
                                    checked={newCollective.issues.includes(issue)}
                                    onChange={() => toggleCollectiveIssue(issue)}
                                    style={{ accentColor: colors.primary }}
                                  />
                                  {issue}
                                </label>
                              ))}
                            </div>
                          </div>

                          <div style={{ display: 'flex', gap: '10px' }}>
                            <button onClick={() => setShowNewCollectiveForm(false)} style={{ ...styles.button('secondary'), flex: 1 }}>
                              Cancel
                            </button>
                            <button onClick={handleCreateCollective} style={{ ...styles.button('primary'), flex: 1 }}>
                              Create
                            </button>
                          </div>
                        </div>
                      </div>
                    )}
                  </section>
                )}

                {/* Consumer Groups */}
                {activeSubTab === 'consumer' && (
                  <section>
                    <h2 style={styles.sectionHeader}>Consumer Collectives</h2>
                    <p style={{ color: colors.textDim, marginBottom: '20px' }}>
                      Group buying power. Negotiate bulk rates for utilities and necessities.
                    </p>

                    <div style={styles.grid}>
                      {consumerGroups.map(group => {
                        const joined = joinedConsumerGroups.includes(group.id);
                        return (
                          <div key={group.id} style={{
                            ...styles.card,
                            border: joined ? `1px solid ${colors.success}` : `1px solid ${colors.border}`
                          }}>
                            <div style={{ fontWeight: 700, fontSize: '16px', marginBottom: '8px' }}>{group.name}</div>
                            <div style={{ fontSize: '12px', color: colors.textDim, marginBottom: '15px' }}>{group.description}</div>

                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>
                              <div>
                                <div style={{ fontSize: '28px', fontWeight: 700 }}>{group.members}</div>
                                <div style={{ fontSize: '10px', color: colors.textDimmer }}>MEMBERS</div>
                              </div>
                              <div style={{ textAlign: 'right' }}>
                                <div style={{ fontSize: '28px', fontWeight: 700, color: colors.success }}>{group.savings}</div>
                                <div style={{ fontSize: '10px', color: colors.textDimmer }}>AVG SAVINGS</div>
                              </div>
                            </div>

                            {!joined ? (
                              <button onClick={() => handleJoinConsumerGroup(group)} style={{ ...styles.button('secondary'), width: '100%' }}>
                                Join Group â†’
                              </button>
                            ) : (
                              <div style={{ textAlign: 'center', color: colors.success, fontSize: '12px', padding: '12px' }}>
                                âœ“ You're a member
                              </div>
                            )}
                          </div>
                        );
                      })}
                    </div>
                  </section>
                )}

                {/* Petitions */}
                {activeSubTab === 'petition' && (
                  <section>
                    <h2 style={styles.sectionHeader}>Local Petitions</h2>

                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '25px', flexWrap: 'wrap', gap: '15px' }}>
                      <p style={{ color: colors.textDim, margin: 0 }}>
                        Simple local petitions. No email harvesting. Just signatures.
                      </p>
                      <button onClick={() => setShowPetitionForm(true)} style={styles.button('primary')}>
                        + Create Petition
                      </button>
                    </div>

                    {petitions.map(petition => {
                      const signed = signedPetitions.includes(petition.id);
                      const pct = Math.min((petition.signatures / petition.goal) * 100, 100);
                      return (
                        <div key={petition.id} style={{
                          ...styles.card,
                          border: petition.status === 'won' ? `1px solid ${colors.success}` : `1px solid ${colors.border}`
                        }}>
                          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '10px' }}>
                            <div style={{ flex: 1 }}>
                              <div style={{ fontWeight: 700, fontSize: '15px', marginBottom: '5px' }}>{petition.title}</div>
                              <div style={{ fontSize: '11px', color: colors.textDimmer }}>Area: {petition.area} â€¢ Created {petition.created}</div>
                              {petition.description && (
                                <div style={{ fontSize: '12px', color: colors.textDim, marginTop: '8px' }}>{petition.description}</div>
                              )}
                            </div>
                            {petition.status === 'won' && <span style={styles.badge(colors.success)}>âœ“ Won!</span>}
                            {petition.status === 'active' && <span style={styles.badge(colors.warning)}>Active</span>}
                          </div>

                          <div style={{ marginTop: '15px', marginBottom: '15px' }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '12px', marginBottom: '6px' }}>
                              <span style={{ fontWeight: 700 }}>{petition.signatures} signatures</span>
                              <span style={{ color: colors.textDimmer }}>Goal: {petition.goal}</span>
                            </div>
                            <div style={{ height: '10px', backgroundColor: colors.border, borderRadius: '5px' }}>
                              <div style={{
                                height: '100%',
                                width: `${pct}%`,
                                backgroundColor: petition.signatures >= petition.goal ? colors.success : colors.primary,
                                borderRadius: '5px',
                                transition: 'width 0.3s'
                              }} />
                            </div>
                          </div>

                          {petition.status === 'active' && !signed && (
                            <button onClick={() => handleSignPetition(petition)} style={{ ...styles.button('secondary'), width: '100%' }}>
                              Sign Petition â†’
                            </button>
                          )}
                          {signed && (
                            <div style={{ textAlign: 'center', color: colors.success, fontSize: '12px', padding: '12px' }}>
                              âœ“ You signed this petition
                            </div>
                          )}
                        </div>
                      );
                    })}

                    {/* Petition Modal */}
                    {showPetitionForm && (
                      <div style={styles.modal} className="modal-enter">
                        <div style={{ ...styles.card, maxWidth: '500px', width: '100%' }}>
                          <h3 style={{ marginTop: 0, marginBottom: '20px' }}>Create Local Petition</h3>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Title
                            </label>
                            <input
                              type="text"
                              value={newPetition.title}
                              onChange={(e) => setNewPetition({ ...newPetition, title: e.target.value })}
                              placeholder="What are you petitioning for?"
                              style={styles.input}
                            />
                          </div>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Area (ZIP or Neighborhood)
                            </label>
                            <input
                              type="text"
                              value={newPetition.area}
                              onChange={(e) => setNewPetition({ ...newPetition, area: e.target.value })}
                              placeholder="Where does this apply?"
                              style={styles.input}
                            />
                          </div>

                          <div style={{ marginBottom: '15px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Signature Goal
                            </label>
                            <input
                              type="number"
                              value={newPetition.goal}
                              onChange={(e) => setNewPetition({ ...newPetition, goal: parseInt(e.target.value) || 100 })}
                              style={{ ...styles.input, width: '120px' }}
                            />
                          </div>

                          <div style={{ marginBottom: '20px' }}>
                            <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                              Description
                            </label>
                            <textarea
                              rows={4}
                              value={newPetition.description}
                              onChange={(e) => setNewPetition({ ...newPetition, description: e.target.value })}
                              placeholder="Explain the issue..."
                              style={{ ...styles.input, resize: 'vertical' }}
                            />
                          </div>

                          <div style={{ display: 'flex', gap: '10px' }}>
                            <button onClick={() => setShowPetitionForm(false)} style={{ ...styles.button('secondary'), flex: 1 }}>
                              Cancel
                            </button>
                            <button onClick={handleCreatePetition} style={{ ...styles.button('primary'), flex: 1 }}>
                              Publish
                            </button>
                          </div>
                          <p style={{ fontSize: '10px', color: colors.textDimmest, marginTop: '15px', marginBottom: 0 }}>
                            No email required. Petition tied to browser fingerprint, not identity.
                          </p>
                        </div>
                      </div>
                    )}
                  </section>
                )}
              </div>
            )}

            {/* ==================== ACCOUNTABILITY TAB ==================== */}
            {activeTab === 'accountability' && (
              <div>
                <section style={{ marginBottom: '60px' }}>
                  <h2 style={styles.sectionHeader}>Submit Report</h2>

                  <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>
                    {['landlord', 'employer'].map(type => (
                      <button
                        key={type}
                        onClick={() => setReportType(type)}
                        style={{
                          padding: '12px 25px',
                          backgroundColor: reportType === type ? colors.primary : 'transparent',
                          color: reportType === type ? '#000' : colors.textMuted,
                          border: `1px solid ${reportType === type ? colors.primary : colors.borderLight}`,
                          cursor: 'pointer',
                          fontFamily: 'inherit',
                          textTransform: 'uppercase',
                          fontSize: '12px',
                          letterSpacing: '1px',
                          fontWeight: reportType === type ? 700 : 400
                        }}
                      >
                        {type === 'landlord' ? 'ðŸ  Landlord' : 'ðŸ’¼ Employer'}
                      </button>
                    ))}
                  </div>

                  <div style={styles.card}>
                    <div style={{ marginBottom: '20px' }}>
                      <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                        {reportType === 'landlord' ? 'Landlord Name or Management Company' : 'Company Name'}
                      </label>
                      <input
                        type="text"
                        value={newReport.name}
                        onChange={(e) => setNewReport({ ...newReport, name: e.target.value })}
                        placeholder={reportType === 'landlord' ? 'e.g., Greystone Properties' : 'e.g., MegaCorp Inc'}
                        style={styles.input}
                      />
                    </div>

                    {reportType === 'landlord' && (
                      <div style={{ marginBottom: '20px' }}>
                        <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                          Property Address (optional)
                        </label>
                        <input
                          type="text"
                          value={newReport.address}
                          onChange={(e) => setNewReport({ ...newReport, address: e.target.value })}
                          placeholder="e.g., 123 Main St"
                          style={styles.input}
                        />
                      </div>
                    )}

                    <div style={{ marginBottom: '20px' }}>
                      <label style={{ display: 'block', marginBottom: '10px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                        Issue Type (select all that apply)
                      </label>
                      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                        {(reportType === 'landlord'
                          ? ['No repairs', 'Illegal fees', 'Harassment', 'Safety hazard', 'Discrimination', 'Retaliation', 'Pest infestation', 'No heat/AC', 'Other']
                          : ['Wage theft', 'Unsafe conditions', 'Retaliation', 'Discrimination', 'Harassment', 'Scheduling abuse', 'Unpaid overtime', 'Other']
                        ).map(issue => (
                          <label key={issue} style={{
                            display: 'flex',
                            alignItems: 'center',
                            gap: '8px',
                            padding: '10px 14px',
                            backgroundColor: newReport.issues.includes(issue) ? '#ff333320' : colors.bgLighter,
                            border: `1px solid ${newReport.issues.includes(issue) ? colors.primary : colors.borderLight}`,
                            cursor: 'pointer',
                            fontSize: '12px'
                          }}>
                            <input
                              type="checkbox"
                              checked={newReport.issues.includes(issue)}
                              onChange={() => toggleReportIssue(issue)}
                              style={{ accentColor: colors.primary }}
                            />
                            {issue}
                          </label>
                        ))}
                      </div>
                    </div>

                    <div style={{ marginBottom: '20px' }}>
                      <label style={{ display: 'block', marginBottom: '5px', color: colors.textMuted, fontSize: '11px', textTransform: 'uppercase' }}>
                        Description (optional)
                      </label>
                      <textarea
                        rows={4}
                        value={newReport.description}
                        onChange={(e) => setNewReport({ ...newReport, description: e.target.value })}
                        placeholder="What happened? Be specific but protect your identity."
                        style={{ ...styles.input, resize: 'vertical' }}
                      />
                    </div>

                    <div style={{ marginBottom: '25px' }}>
                      <label style={{ display: 'flex', alignItems: 'center', gap: '10px', cursor: 'pointer' }}>
                        <input
                          type="checkbox"
                          checked={newReport.anonymous}
                          onChange={(e) => setNewReport({ ...newReport, anonymous: e.target.checked })}
                          style={{ accentColor: colors.primary, width: '18px', height: '18px' }}
                        />
                        <span style={{ fontSize: '13px', color: colors.textMuted }}>Post anonymously</span>
                      </label>
                    </div>

                    <button onClick={handleSubmitReport} style={{ ...styles.button('primary'), width: '100%', padding: '15px' }}>
                      Submit Report
                    </button>

                    <p style={{ fontSize: '10px', color: colors.textDimmest, marginTop: '15px', textAlign: 'center' }}>
                      Reports are public. No moderation by corporations or landlords.
                    </p>
                  </div>
                </section>

                <section>
                  <h2 style={styles.sectionHeader}>Recent Reports</h2>

                  <div style={{ display: 'flex', gap: '10px', marginBottom: '25px' }}>
                    {['all', 'landlord', 'employer'].map(filter => (
                      <button
                        key={filter}
                        onClick={() => setReportFilter(filter)}
                        style={{
                          padding: '8px 15px',
                          backgroundColor: reportFilter === filter ? colors.primary : 'transparent',
                          color: reportFilter === filter ? '#000' : colors.textDim,
                          border: `1px solid ${reportFilter === filter ? colors.primary : colors.borderLight}`,
                          cursor: 'pointer',
                          fontFamily: 'inherit',
                          fontSize: '11px',
                          textTransform: 'capitalize'
                        }}
                      >
                        {filter === 'all' ? 'All Reports' : filter + 's'}
                      </button>
                    ))}
                  </div>

                  {reports.map(report => (
                    <div key={report.id} style={{
                      ...styles.card,
                      display: 'flex',
                      justifyContent: 'space-between',
                      alignItems: 'center',
                      flexWrap: 'wrap',
                      gap: '15px'
                    }}>
                      <div style={{ flex: 1, minWidth: '200px' }}>
                        <div style={{ marginBottom: '8px' }}>
                          <span style={styles.badge(report.type === 'landlord' ? colors.warning : colors.purple)}>
                            {report.type === 'landlord' ? 'ðŸ ' : 'ðŸ’¼'} {report.type}
                          </span>
                        </div>
                        <div style={{ fontWeight: 700, fontSize: '15px', marginBottom: '4px' }}>{report.name}</div>
                        {report.address && <div style={{ fontSize: '12px', color: colors.textDim, marginBottom: '8px' }}>{report.address}</div>}
                        <div style={{ display: 'flex', gap: '5px', flexWrap: 'wrap' }}>
                          {report.issues.map(issue => (
                            <span key={issue} style={{ ...styles.badge(colors.primary), marginRight: 0 }}>{issue}</span>
                          ))}
                        </div>
                      </div>
                      <div style={{ textAlign: 'right' }}>
                        <div style={{ fontSize: '36px', fontWeight: 700, color: colors.primary }}>{report.reports}</div>
                        <div style={{ fontSize: '10px', color: colors.textDimmer }}>REPORTS</div>
                        <div style={{ fontSize: '11px', color: colors.textDimmest, marginTop: '5px' }}>Last: {report.lastReport}</div>
                      </div>
                    </div>
                  ))}
                </section>
              </div>
            )}
          </main>

          {/* Footer */}
          <footer style={{
            borderTop: `1px solid ${colors.border}`,
            padding: '30px 40px',
            marginTop: '60px',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            flexWrap: 'wrap',
            gap: '20px'
          }}>
            <div style={{ fontSize: '11px', color: colors.textDimmest }}>
              <div style={{ fontWeight: 700, marginBottom: '4px' }}>SOLIDARITY_NET</div>
              <div>Open source. No tracking. No profiles. No ads.</div>
            </div>
            <div style={{ display: 'flex', gap: '25px', fontSize: '11px' }}>
              <a href="#" style={{ color: colors.textDim, textDecoration: 'none' }}>Source Code</a>
              <a href="#" style={{ color: colors.textDim, textDecoration: 'none' }}>Data Sources</a>
              <a href="#" style={{ color: colors.textDim, textDecoration: 'none' }}>Privacy</a>
            </div>
          </footer>
        </div>
      );
    };

    // Render
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<SolidarityPlatform />);
  </script>
</body>
</html>
